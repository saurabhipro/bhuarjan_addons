<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-name="bhuarjan.AdminDashboardTemplate" owl="1">
        <div class="o_admin_dashboard">
            <!-- Header with Role Title -->
            <t t-call="bhuarjan.DashboardHeader">
                <t t-set="title" t-value="pageTitle"/>
                <t t-set="iconClass" t-value="'fa fa-crown'"/>
            </t>
            <!-- Last Update for Admin Dashboard -->
            <div style="text-align: right; margin-top: -15px; margin-bottom: 10px;">
                <span style="color: #8B4513; opacity: 0.9; font-size: 12px;" t-if="state and state.lastUpdate">
                    Last updated: <t t-esc="state.lastUpdate"/>
                </span>
            </div>

            <!-- Loading State -->
            <div t-if="state and state.loading" class="text-center p-4">
                <i class="fa fa-spinner fa-spin fa-2x"/> Loading...
            </div>



            <!-- Warning when Dept/Project not selected -->
            <div t-if="!state.loading and (!state.selectedDepartment or !state.selectedProject)" style="display: flex; justify-content: center; align-items: center; min-height: 400px; padding: 40px;">
                <div style="text-align: center; max-width: 600px; background: linear-gradient(135deg, #FFF8F0 0%, #FDF5E6 50%, #FAF0E6 100%); border: 2px solid #8B4513; border-radius: 12px; padding: 40px; box-shadow: 0 4px 6px rgba(139, 69, 19, 0.1);">
                    <div style="font-size: 64px; color: #8B4513; margin-bottom: 20px;">
                        <i class="fa fa-building-o" style="margin-right: 10px;"/>
                        <i class="fa fa-briefcase"/>
                    </div>
                    <h3 style="color: #8B4513; margin-bottom: 15px; font-weight: bold;">
                        <i class="fa fa-info-circle" style="margin-right: 8px;"/>
                        Selection Required
                    </h3>
                    <p style="color: #8B4513; font-size: 16px; line-height: 1.6; margin-bottom: 20px;">
                        Please select both <strong>Department</strong> and <strong>Project</strong> from the filters above to view the dashboard details.
                    </p>
                    <div style="display: flex; justify-content: center; gap: 20px; margin-top: 20px;">
                        <!-- Department Badge -->
                        <div t-if="!state.selectedDepartment" style="background: white; padding: 12px 20px; border-radius: 8px; border: 1px solid #8B4513;">
                            <i class="fa fa-building-o" style="color: #dc3545; margin-right: 8px;"/>
                            <span style="color: #8B4513; font-weight: 500;">Department: Not Selected</span>
                        </div>
                        <div t-if="state.selectedDepartment" style="background: white; padding: 12px 20px; border-radius: 8px; border: 1px solid #28a745;">
                            <i class="fa fa-check-circle" style="color: #28a745; margin-right: 8px;"/>
                            <span style="color: #28a745; font-weight: 500;">Department: Selected</span>
                        </div>
                        
                        <!-- Project Badge -->
                        <div t-if="!state.selectedProject" style="background: white; padding: 12px 20px; border-radius: 8px; border: 1px solid #8B4513;">
                            <i class="fa fa-briefcase" style="color: #dc3545; margin-right: 8px;"/>
                            <span style="color: #8B4513; font-weight: 500;">Project: Not Selected</span>
                        </div>
                        <div t-if="state.selectedProject" style="background: white; padding: 12px 20px; border-radius: 8px; border: 1px solid #28a745;">
                            <i class="fa fa-check-circle" style="color: #28a745; margin-right: 8px;"/>
                            <span style="color: #28a745; font-weight: 500;">Project: Selected</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Dashboard Content -->
            <div t-if="state and !state.loading and state.selectedDepartment and state.selectedProject" class="o_dashboard_content">
                <div class="o_status_legend_section">
                    <div class="o_status_legend_container" style="display: flex; align-items: center; justify-content: space-between !important;">
                        <div style="display: flex; align-items: center;">
                            <div class="o_status_legend_title" style="margin-right: 5px;">
                                <i class="fa fa-info-circle"/>
                                <span>Status Legend</span>
                            </div>
                            
                            <!-- Separator -->
                            <span style="color: #ccc; margin: 0 15px; font-size: 18px;">|</span>
                            
                            <div class="o_status_legend_items" style="display: flex; align-items: center;">
                                <div class="o_legend_item">
                                    <i class="fa fa-file-o o_legend_icon_draft"/>
                                    <span class="o_legend_label">Draft</span>
                                </div>
                                <span style="color: #ccc; margin: 0 10px;">|</span>
                                <div class="o_legend_item">
                                    <i class="fa fa-paper-plane o_legend_icon_submitted"/>
                                    <span class="o_legend_label">Submitted</span>
                                </div>
                                <span style="color: #ccc; margin: 0 10px;">|</span>
                                <div class="o_legend_item">
                                    <i class="fa fa-check-circle o_legend_icon_approved"/>
                                    <span class="o_legend_label">Approved</span>
                                </div>
                                <span style="color: #ccc; margin: 0 10px;">|</span>
                                <div class="o_legend_item">
                                    <i class="fa fa-times-circle o_legend_icon_rejected"/>
                                    <span class="o_legend_label">Returned</span>
                                </div>
                            </div>
                        </div>

                         <!-- Project Status Flags -->
                        <div class="d-flex align-items-center">
                            <!-- Separator before flags (optional, makes it clear) -->
                            <span style="color: #ccc; margin: 0 15px; font-size: 18px;">|</span>

                            <!-- SIA Exempt -->
                            <div class="d-flex align-items-center me-3" 
                                 t-att-style="state.isProjectExempt ? 'color: #28a745;' : 'color: #dc3545;'">
                                <i t-att-class="state.isProjectExempt ? 'fa fa-check-circle me-1' : 'fa fa-times-circle me-1'" style="font-size: 16px;"></i>
                                <span style="font-weight: 600; font-size: 14px;">SIA Exempt: <t t-esc="state.isProjectExempt ? 'Yes' : 'No'"/></span>
                            </div>
                            
                            <!-- Separator between flags -->
                            <span style="color: #ccc; margin-right: 15px; font-size: 18px;">|</span>

                            <!-- Displacement -->
                            <div class="d-flex align-items-center" 
                                 t-att-style="state.isDisplacement ? 'color: #28a745;' : 'color: #dc3545;'">
                                <i t-att-class="state.isDisplacement ? 'fa fa-check-circle me-1' : 'fa fa-times-circle me-1'" style="font-size: 16px;"></i>
                                <span style="font-weight: 600; font-size: 14px;">Displacement: <t t-esc="state.isDisplacement ? 'Yes' : 'No'"/></span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- List View Section -->
                <div class="o_dashboard_section">
                    

                    <div class="o_sections_list o_sections_list_grid">
                        <!-- Column 1: Steps 1-5 -->
                        <div class="o_sections_column">
                        <!-- Surveys -->
                        <t t-if="this.isSectionVisible('Surveys')">
                        <div class="o_section_list_item o_card_no_click">
                            <div class="o_section_list_step">
                                <span class="o_step_number bg-primary"><t t-esc="this.getStepNumber('Surveys', 'Step 1')"/></span>
                            </div>
                            <div class="o_section_list_icon">
                                <i class="fa fa-clipboard"/>
                            </div>
                            <div class="o_section_list_content">
                                <div class="o_section_list_title">
                                    <i class="fa fa-clipboard" style="margin-right: 8px; color: #8B4513;"/>
                                    Surveys
                                    <t t-if="state.stats &amp;&amp; state.stats.survey_info &amp;&amp; state.stats.survey_info.is_completed">
                                        <span class="o_completion_tick" title="All surveys completed">
                                            <i class="fa fa-check-circle"/>
                                        </span>
                                    </t>
                                    <t t-if="state.selectedProjectName or state.selectedVillageName">
                                        <div style="font-size: 11px; color: #666; margin-top: 4px; font-weight: normal;">
                                            <t t-if="state.selectedProjectName">
                                                <i class="fa fa-briefcase" style="margin-right: 4px;"/> <t t-esc="state.selectedProjectName"/>
                                            </t>
                                            <t t-if="state.selectedProjectName and state.selectedVillageName"> / </t>
                                            <t t-if="state.selectedVillageName">
                                                <i class="fa fa-home" style="margin-right: 4px;"/> <t t-esc="state.selectedVillageName"/>
                                            </t>
                                        </div>
                                    </t>
                                </div>
                                <div class="o_completion_widget_list o_completion_single_line">
                                    <div class="o_completion_percent_list"><t t-esc="state.stats ? (state.stats.survey_completion_percent || 0) : 0"/>% Complete</div>
                                    <div class="o_section_list_count">
                                        <span class="o_count_badge o_count_draft"><i class="fa fa-file-o"/> <t t-esc="state.stats ? (state.stats.survey_info ? state.stats.survey_info.draft_count : 0) : 0"/></span>
                                        <span class="o_count_badge o_count_submitted"><i class="fa fa-paper-plane"/> <t t-esc="state.stats ? (state.stats.survey_info ? state.stats.survey_info.submitted_count : 0) : 0"/></span>
                                        <span class="o_count_badge o_count_approved"><i class="fa fa-check-circle"/> <t t-esc="state.stats ? (state.stats.survey_info ? state.stats.survey_info.approved_count : 0) : 0"/></span>
                                        <span class="o_count_badge o_count_rejected"><i class="fa fa-times-circle"/> <t t-esc="state.stats ? (state.stats.survey_info ? state.stats.survey_info.rejected_count : 0) : 0"/></span>
                                    </div>
                                </div>
                            </div>
                            <div class="o_section_list_actions">
                                <button class="btn btn-sm btn-info" t-on-click.stop="() => this.openSectionList('bhu.survey')">
                                    <i class="fa fa-eye"/> View
                                </button>
                                <button class="btn btn-sm btn-success" t-on-click.stop="() => this.downloadForm10()" 
                                        t-att-disabled="!state.selectedVillage">
                                    <i class="fa fa-download"/> Download Form 10
                                </button>
                            </div>
                        </div>
                        </t>

                        <!-- Section 20 D (Railways) -->
                        <t t-if="this.isSectionVisible('Sec 20 D (Objection) (Railways)')">
                        <div class="o_section_list_item o_card_no_click">
                            <div class="o_section_list_step">
                                <span class="o_step_number bg-primary"><t t-esc="this.getStepNumber('Sec 20 D (Objection) (Railways)', (state.isCollector or state.isAdmin) ? 'Step 13' : 'Step 12')"/></span>
                            </div>
                            <div class="o_section_list_icon">
                                <i class="fa fa-exclamation-triangle"/>
                            </div>
                            <div class="o_section_list_content">
                                <div class="o_section_list_title">
                                    Sec 20 D (Railways)
                                    <t t-if="state.selectedProjectName or state.selectedVillageName">
                                        <div style="font-size: 11px; color: #666; margin-top: 4px; font-weight: normal;">
                                            <t t-if="state.selectedProjectName">
                                                <i class="fa fa-briefcase" style="margin-right: 4px;"/> <t t-esc="state.selectedProjectName"/>
                                            </t>
                                            <t t-if="state.selectedProjectName and state.selectedVillageName"> / </t>
                                            <t t-if="state.selectedVillageName">
                                                <i class="fa fa-home" style="margin-right: 4px;"/> <t t-esc="state.selectedVillageName"/>
                                            </t>
                                        </div>
                                    </t>
                                </div>
                                <div class="o_completion_widget_list o_completion_single_line">
                                    <div class="o_completion_percent_list"><t t-esc="state.stats ? (state.stats.section20d_railways_completion_percent || 0) : 0"/>% Complete</div>
                                    <div class="o_section_list_count">
                                        <span class="o_count_badge o_count_draft"><i class="fa fa-file-o"/> <t t-esc="state.stats ? (state.stats.section20d_railways_info ? state.stats.section20d_railways_info.draft_count : 0) : 0"/></span>
                                        <span class="o_count_badge o_count_submitted"><i class="fa fa-paper-plane"/> <t t-esc="state.stats ? (state.stats.section20d_railways_info ? state.stats.section20d_railways_info.submitted_count : 0) : 0"/></span>
                                        <span class="o_count_badge o_count_approved"><i class="fa fa-check-circle"/> <t t-esc="state.stats ? (state.stats.section20d_railways_info ? state.stats.section20d_railways_info.approved_count : 0) : 0"/></span>
                                        <span class="o_count_badge o_count_rejected"><i class="fa fa-times-circle"/> <t t-esc="state.stats ? (state.stats.section20d_railways_info ? state.stats.section20d_railways_info.send_back_count : 0) : 0"/></span>
                                    </div>
                                </div>
                            </div>
                            <div class="o_section_list_actions">
                                <button class="btn btn-sm btn-primary" t-on-click.stop="() => this.createSectionRecord('bhu.section20d.railways')">
                                    <i class="fa fa-plus"/> Create
                                </button>
                                <button class="btn btn-sm btn-info" 
                                        t-on-click.stop="() => this.openFirstDocument('bhu.section20d.railways', state.stats &amp;&amp; state.stats.section20d_railways_info ? state.stats.section20d_railways_info : null)"
                                        t-att-disabled="!(state.stats &amp;&amp; state.stats.section20d_railways_info &amp;&amp; state.stats.section20d_railways_info.total > 0)">
                                    <i class="fa fa-eye"/> View/Edit
                                </button>
                                <button t-if="state.isCollector or state.isAdmin" class="btn btn-sm btn-success" 
                                        t-on-click.stop="() => this.openFirstPending('bhu.section20d.railways', state.stats &amp;&amp; state.stats.section20d_railways_info ? state.stats.section20d_railways_info.first_pending_id : false, state.stats &amp;&amp; state.stats.section20d_railways_info ? state.stats.section20d_railways_info : null)"
                                        t-att-disabled="state.stats &amp;&amp; state.stats.section20d_railways_info ? this.isAllApproved(state.stats.section20d_railways_info) : true"
                                        title="Approve First Pending">
                                    <i class="fa fa-check"/> Approve
                                </button>
                                <button t-if="state.isCollector or state.isAdmin" class="btn btn-sm btn-danger" 
                                        t-on-click.stop="() => this.openFirstPending('bhu.section20d.railways', state.stats &amp;&amp; state.stats.section20d_railways_info ? state.stats.section20d_railways_info.first_pending_id : false, state.stats &amp;&amp; state.stats.section20d_railways_info ? state.stats.section20d_railways_info : null)"
                                        t-att-disabled="state.stats &amp;&amp; state.stats.section20d_railways_info ? this.isAllApproved(state.stats.section20d_railways_info) : true"
                                        title="Return First Pending">
                                    <i class="fa fa-times"/> Return
                                </button>
                            </div>
                        </div>
                        </t>

                        <!-- Section 3C (NH) -->
                        <t t-if="this.isSectionVisible('Sec 3C (Objection) (NH)')">
                        <div class="o_section_list_item o_card_no_click">
                            <div class="o_section_list_step">
                                <span class="o_step_number bg-primary"><t t-esc="this.getStepNumber('Sec 3C (Objection) (NH)', (state.isCollector or state.isAdmin) ? 'Step 16' : 'Step 15')"/></span>
                            </div>
                            <div class="o_section_list_icon">
                                <i class="fa fa-exclamation-triangle"/>
                            </div>
                            <div class="o_section_list_content">
                                <div class="o_section_list_title">
                                    Sec 3C (NH)
                                    <t t-if="state.selectedProjectName or state.selectedVillageName">
                                        <div style="font-size: 11px; color: #666; margin-top: 4px; font-weight: normal;">
                                            <t t-if="state.selectedProjectName">
                                                <i class="fa fa-briefcase" style="margin-right: 4px;"/> <t t-esc="state.selectedProjectName"/>
                                            </t>
                                            <t t-if="state.selectedProjectName and state.selectedVillageName"> / </t>
                                            <t t-if="state.selectedVillageName">
                                                <i class="fa fa-home" style="margin-right: 4px;"/> <t t-esc="state.selectedVillageName"/>
                                            </t>
                                        </div>
                                    </t>
                                </div>
                                <div class="o_completion_widget_list o_completion_single_line">
                                    <div class="o_completion_percent_list"><t t-esc="state.stats ? (state.stats.section3c_nh_completion_percent || 0) : 0"/>% Complete</div>
                                    <div class="o_section_list_count">
                                        <span class="o_count_badge o_count_draft"><i class="fa fa-file-o"/> <t t-esc="state.stats ? (state.stats.section3c_nh_info ? state.stats.section3c_nh_info.draft_count : 0) : 0"/></span>
                                        <span class="o_count_badge o_count_submitted"><i class="fa fa-paper-plane"/> <t t-esc="state.stats ? (state.stats.section3c_nh_info ? state.stats.section3c_nh_info.submitted_count : 0) : 0"/></span>
                                        <span class="o_count_badge o_count_approved"><i class="fa fa-check-circle"/> <t t-esc="state.stats ? (state.stats.section3c_nh_info ? state.stats.section3c_nh_info.approved_count : 0) : 0"/></span>
                                        <span class="o_count_badge o_count_rejected"><i class="fa fa-times-circle"/> <t t-esc="state.stats ? (state.stats.section3c_nh_info ? state.stats.section3c_nh_info.send_back_count : 0) : 0"/></span>
                                    </div>
                                </div>
                            </div>
                            <div class="o_section_list_actions">
                                <button class="btn btn-sm btn-primary" t-on-click.stop="() => this.createSectionRecord('bhu.section3c.nh')">
                                    <i class="fa fa-plus"/> Create
                                </button>
                                <button class="btn btn-sm btn-info" 
                                        t-on-click.stop="() => this.openFirstDocument('bhu.section3c.nh', state.stats &amp;&amp; state.stats.section3c_nh_info ? state.stats.section3c_nh_info : null)"
                                        t-att-disabled="!(state.stats &amp;&amp; state.stats.section3c_nh_info &amp;&amp; state.stats.section3c_nh_info.total > 0)">
                                    <i class="fa fa-eye"/> View/Edit
                                </button>
                                <button t-if="state.isCollector or state.isAdmin" class="btn btn-sm btn-success" 
                                        t-on-click.stop="() => this.openFirstPending('bhu.section3c.nh', state.stats &amp;&amp; state.stats.section3c_nh_info ? state.stats.section3c_nh_info.first_pending_id : false, state.stats &amp;&amp; state.stats.section3c_nh_info ? state.stats.section3c_nh_info : null)"
                                        t-att-disabled="state.stats &amp;&amp; state.stats.section3c_nh_info ? this.isAllApproved(state.stats.section3c_nh_info) : true"
                                        title="Approve First Pending">
                                    <i class="fa fa-check"/> Approve
                                </button>
                                <button t-if="state.isCollector or state.isAdmin" class="btn btn-sm btn-danger" 
                                        t-on-click.stop="() => this.openFirstPending('bhu.section3c.nh', state.stats &amp;&amp; state.stats.section3c_nh_info ? state.stats.section3c_nh_info.first_pending_id : false, state.stats &amp;&amp; state.stats.section3c_nh_info ? state.stats.section3c_nh_info : null)"
                                        t-att-disabled="state.stats &amp;&amp; state.stats.section3c_nh_info ? this.isAllApproved(state.stats.section3c_nh_info) : true"
                                        title="Return First Pending">
                                    <i class="fa fa-times"/> Return
                                </button>
                            </div>
                        </div>
                        </t>

                        <!-- SIA Team -->
                        <t t-if="this.isSectionVisible('Create SIA Team')">
                        <div class="o_section_list_item o_card_no_click">
                            <div class="o_section_list_step">
                                <span class="o_step_number bg-primary">Step 2</span>
                            </div>
                            <div class="o_section_list_icon">
                                <i class="fa fa-users"/>
                            </div>
                            <div class="o_section_list_content">
                                <div class="o_section_list_title">
                                    Create SIA Team
                                    <t t-if="state.stats &amp;&amp; state.stats.sia_info &amp;&amp; state.stats.sia_info.is_completed">
                                        <span class="o_completion_tick" title="All SIA teams completed">
                                            <i class="fa fa-check-circle"/>
                                        </span>
                                    </t>
                                    <t t-if="state.selectedProjectName">
                                        <div style="font-size: 11px; color: #666; margin-top: 4px; font-weight: normal;">
                                            <i class="fa fa-briefcase" style="margin-right: 4px;"/> <t t-esc="state.selectedProjectName"/>
                                        </div>
                                    </t>
                                </div>
                                <div class="o_completion_widget_list o_completion_single_line">
                                    <div class="o_completion_percent_list"><t t-esc="state.stats ? (state.stats.sia_completion_percent || 0) : 0"/>% Complete</div>
                                    <div class="o_section_list_count">
                                        <span class="o_count_badge o_count_draft"><i class="fa fa-file-o"/> <t t-esc="state.stats ? (state.stats.sia_info ? state.stats.sia_info.draft_count : 0) : 0"/></span>
                                        <span class="o_count_badge o_count_submitted"><i class="fa fa-paper-plane"/> <t t-esc="state.stats ? (state.stats.sia_info ? state.stats.sia_info.submitted_count : 0) : 0"/></span>
                                        <span class="o_count_badge o_count_approved"><i class="fa fa-check-circle"/> <t t-esc="state.stats ? (state.stats.sia_info ? state.stats.sia_info.approved_count : 0) : 0"/></span>
                                        <span class="o_count_badge o_count_rejected"><i class="fa fa-times-circle"/> <t t-esc="state.stats ? (state.stats.sia_info ? state.stats.sia_info.send_back_count : 0) : 0"/></span>
                                    </div>
                                </div>
                            </div>
                            <div class="o_section_list_actions">
                                <button t-if="!state.isCollector or state.isAdmin" class="btn btn-sm btn-primary" t-on-click.stop="() => this.createSectionRecord('bhu.sia.team')">
                                    <i class="fa fa-plus"/> Create
                                </button>
                                <button class="btn btn-sm btn-info" 
                                        t-on-click.stop="() => this.openFirstDocument('bhu.sia.team', state.stats &amp;&amp; state.stats.sia_info ? state.stats.sia_info : null)">
                                    <i class="fa fa-eye"/> View/Edit
                                </button>
                                <button t-if="state.isCollector or state.isAdmin" class="btn btn-sm btn-success" 
                                        t-on-click.stop="() => this.openFirstPending('bhu.sia.team', state.stats &amp;&amp; state.stats.sia_info ? state.stats.sia_info.first_pending_id : false, state.stats &amp;&amp; state.stats.sia_info ? state.stats.sia_info : null)"
                                        t-att-disabled="state.stats &amp;&amp; state.stats.sia_info ? this.isAllApproved(state.stats.sia_info) : true"
                                        title="Approve First Pending">
                                    <i class="fa fa-check"/> Approve
                                </button>
                                <button t-if="state.isCollector or state.isAdmin" class="btn btn-sm btn-danger" 
                                        t-on-click.stop="() => this.openFirstPending('bhu.sia.team', state.stats &amp;&amp; state.stats.sia_info ? state.stats.sia_info.first_pending_id : false, state.stats &amp;&amp; state.stats.sia_info ? state.stats.sia_info : null)"
                                        t-att-disabled="state.stats &amp;&amp; state.stats.sia_info ? this.isAllApproved(state.stats.sia_info) : true"
                                        title="Return First Pending">
                                    <i class="fa fa-times"/> Return
                                </button>
                            </div>
                        </div>
                        </t>

                        <!-- Section 4 -->
                        <t t-if="this.isSectionVisible('(Sec 4) Section 4 Notifications')">
                        <div class="o_section_list_item o_card_no_click">
                            <div class="o_section_list_step">
                                <span class="o_step_number bg-primary">Step 3</span>
                            </div>
                            <div class="o_section_list_icon">
                                <i class="fa fa-bell"/>
                            </div>
                            <div class="o_section_list_content">
                                <div class="o_section_list_title">
                                    (Sec 4) Section 4 Notifications
                                    <t t-if="state.stats &amp;&amp; state.stats.section4_info &amp;&amp; state.stats.section4_info.is_completed">
                                        <span class="o_completion_tick" title="All Section 4 Notifications completed">
                                            <i class="fa fa-check-circle"/>
                                        </span>
                                    </t>
                                    <t t-if="state.selectedProjectName or state.selectedVillageName">
                                        <div style="font-size: 11px; color: #666; margin-top: 4px; font-weight: normal;">
                                            <t t-if="state.selectedProjectName">
                                                <i class="fa fa-briefcase" style="margin-right: 4px;"/> <t t-esc="state.selectedProjectName"/>
                                            </t>
                                            <t t-if="state.selectedProjectName and state.selectedVillageName"> / </t>
                                            <t t-if="state.selectedVillageName">
                                                <i class="fa fa-home" style="margin-right: 4px;"/> <t t-esc="state.selectedVillageName"/>
                                            </t>
                                        </div>
                                    </t>
                                </div>
                                <div class="o_completion_widget_list o_completion_single_line">
                                    <div class="o_completion_percent_list"><t t-esc="state.stats ? (state.stats.section4_completion_percent || 0) : 0"/>% Complete</div>
                                    <div class="o_section_list_count">
                                        <span class="o_count_badge o_count_draft"><i class="fa fa-file-o"/> <t t-esc="state.stats ? (state.stats.section4_info ? state.stats.section4_info.draft_count : 0) : 0"/></span>
                                        <span class="o_count_badge o_count_submitted"><i class="fa fa-paper-plane"/> <t t-esc="state.stats ? (state.stats.section4_info ? state.stats.section4_info.submitted_count : 0) : 0"/></span>
                                        <span class="o_count_badge o_count_approved"><i class="fa fa-check-circle"/> <t t-esc="state.stats ? (state.stats.section4_info ? state.stats.section4_info.approved_count : 0) : 0"/></span>
                                        <span class="o_count_badge o_count_rejected"><i class="fa fa-times-circle"/> <t t-esc="state.stats ? (state.stats.section4_info ? state.stats.section4_info.send_back_count : 0) : 0"/></span>
                                    </div>
                                </div>
                            </div>
                            <div class="o_section_list_actions">
                                <button t-if="!state.isCollector or state.isAdmin" class="btn btn-sm btn-primary" t-on-click.stop="() => this.createSectionRecord('bhu.section4.notification')">
                                    <i class="fa fa-plus"/> Create
                                </button>
                                <button class="btn btn-sm btn-info" 
                                        t-on-click.stop="() => this.openFirstDocument('bhu.section4.notification', state.stats &amp;&amp; state.stats.section4_info ? state.stats.section4_info : null)">
                                    <i class="fa fa-eye"/> View/Edit
                                </button>
                                <button t-if="state.isCollector or state.isAdmin" class="btn btn-sm btn-success" 
                                        t-on-click.stop="() => this.openFirstPending('bhu.section4.notification', state.stats &amp;&amp; state.stats.section4_info ? state.stats.section4_info.first_pending_id : false, state.stats &amp;&amp; state.stats.section4_info ? state.stats.section4_info : null)"
                                        t-att-disabled="state.stats &amp;&amp; state.stats.section4_info ? this.isAllApproved(state.stats.section4_info) : true"
                                        title="Approve First Pending">
                                    <i class="fa fa-check"/> Approve
                                </button>
                                <button t-if="state.isCollector or state.isAdmin" class="btn btn-sm btn-danger" 
                                        t-on-click.stop="() => this.openFirstPending('bhu.section4.notification', state.stats &amp;&amp; state.stats.section4_info ? state.stats.section4_info.first_pending_id : false, state.stats &amp;&amp; state.stats.section4_info ? state.stats.section4_info : null)"
                                        t-att-disabled="state.stats &amp;&amp; state.stats.section4_info ? this.isAllApproved(state.stats.section4_info) : true"
                                        title="Return First Pending">
                                    <i class="fa fa-times"/> Return
                                </button>
                            </div>
                        </div>
                        </t>

                        <!-- Expert Group -->
                        <t t-if="this.isSectionVisible('Expert Group')">
                        <div class="o_section_list_item o_card_no_click">
                            <div class="o_section_list_step">
                                <span class="o_step_number bg-primary">Step 4</span>
                            </div>
                            <div class="o_section_list_icon">
                                <i class="fa fa-graduation-cap"/>
                            </div>
                            <div class="o_section_list_content">
                                <div class="o_section_list_title">
                                    Expert Group
                                    <t t-if="state.stats &amp;&amp; state.stats.expert_info &amp;&amp; state.stats.expert_info.is_completed">
                                        <span class="o_completion_tick" title="All Expert Group completed">
                                            <i class="fa fa-check-circle"/>
                                        </span>
                                    </t>
                                    <t t-if="state.selectedProjectName">
                                        <div style="font-size: 11px; color: #666; margin-top: 4px; font-weight: normal;">
                                            <i class="fa fa-briefcase" style="margin-right: 4px;"/> <t t-esc="state.selectedProjectName"/>
                                        </div>
                                    </t>
                                </div>
                                <div class="o_completion_widget_list o_completion_single_line">
                                    <div class="o_completion_percent_list"><t t-esc="state.stats ? (state.stats.expert_completion_percent || 0) : 0"/>% Complete</div>
                                    <div class="o_section_list_count">
                                        <span class="o_count_badge o_count_draft"><i class="fa fa-file-o"/> <t t-esc="state.stats ? (state.stats.expert_info ? state.stats.expert_info.draft_count : 0) : 0"/></span>
                                        <span class="o_count_badge o_count_submitted"><i class="fa fa-paper-plane"/> <t t-esc="state.stats ? (state.stats.expert_info ? state.stats.expert_info.submitted_count : 0) : 0"/></span>
                                        <span class="o_count_badge o_count_approved"><i class="fa fa-check-circle"/> <t t-esc="state.stats ? (state.stats.expert_info ? state.stats.expert_info.approved_count : 0) : 0"/></span>
                                        <span class="o_count_badge o_count_rejected"><i class="fa fa-times-circle"/> <t t-esc="state.stats ? (state.stats.expert_info ? state.stats.expert_info.send_back_count : 0) : 0"/></span>
                                    </div>
                                </div>
                            </div>
                            <div class="o_section_list_actions">
                                <button t-if="!state.isCollector or state.isAdmin" class="btn btn-sm btn-primary" t-on-click.stop="() => this.createSectionRecord('bhu.expert.committee.report')">
                                    <i class="fa fa-plus"/> Create
                                </button>
                                <button class="btn btn-sm btn-info" 
                                        t-on-click.stop="() => this.openFirstDocument('bhu.expert.committee.report', state.stats &amp;&amp; state.stats.expert_info ? state.stats.expert_info : null)">
                                    <i class="fa fa-eye"/> View/Edit
                                </button>
                                <button t-if="state.isCollector or state.isAdmin" class="btn btn-sm btn-success" 
                                        t-on-click.stop="() => this.openFirstPending('bhu.expert.committee.report', state.stats &amp;&amp; state.stats.expert_info ? state.stats.expert_info.first_pending_id : false, state.stats &amp;&amp; state.stats.expert_info ? state.stats.expert_info : null)"
                                        t-att-disabled="state.stats &amp;&amp; state.stats.expert_info ? this.isAllApproved(state.stats.expert_info) : true"
                                        title="Approve First Pending">
                                    <i class="fa fa-check"/> Approve
                                </button>
                                <button t-if="state.isCollector or state.isAdmin" class="btn btn-sm btn-danger" 
                                        t-on-click.stop="() => this.openFirstPending('bhu.expert.committee.report', state.stats &amp;&amp; state.stats.expert_info ? state.stats.expert_info.first_pending_id : false, state.stats &amp;&amp; state.stats.expert_info ? state.stats.expert_info : null)"
                                        t-att-disabled="state.stats &amp;&amp; state.stats.expert_info ? this.isAllApproved(state.stats.expert_info) : true"
                                        title="Return First Pending">
                                    <i class="fa fa-times"/> Return
                                </button>
                            </div>
                        </div>
                        </t>

                        <!-- Section 8 (Only for Collector, after Expert Group) -->
                        <t t-if="this.isSectionVisible('Section 8')">
                        <div t-if="state.isCollector or state.isAdmin" class="o_section_list_item o_card_no_click">
                            <div class="o_section_list_step">
                                <span class="o_step_number bg-primary">Step 5</span>
                            </div>
                            <div class="o_section_list_icon">
                                <i class="fa fa-check-square-o"/>
                            </div>
                            <div class="o_section_list_content">
                                <div class="o_section_list_title">
                                    Section 8
                                    <t t-if="state.selectedProjectName or state.selectedVillageName">
                                        <div style="font-size: 11px; color: #666; margin-top: 4px; font-weight: normal;">
                                            <t t-if="state.selectedProjectName">
                                                <i class="fa fa-briefcase" style="margin-right: 4px;"/> <t t-esc="state.selectedProjectName"/>
                                            </t>
                                            <t t-if="state.selectedProjectName and state.selectedVillageName"> / </t>
                                            <t t-if="state.selectedVillageName">
                                                <i class="fa fa-home" style="margin-right: 4px;"/> <t t-esc="state.selectedVillageName"/>
                                            </t>
                                        </div>
                                    </t>
                                </div>
                                <div class="o_completion_widget_list o_completion_single_line">
                                    <div class="o_completion_percent_list">-</div>
                                    <div class="o_section_list_count">
                                        <span class="o_count_badge o_count_draft"><i class="fa fa-file-o"/> <t t-esc="state.stats ? (state.stats.section8_draft || 0) : 0"/></span>
                                        <span class="o_count_badge o_count_approved"><i class="fa fa-check-circle"/> <t t-esc="state.stats ? (state.stats.section8_approved || 0) : 0"/></span>
                                        <span class="o_count_badge o_count_rejected"><i class="fa fa-times-circle"/> <t t-esc="state.stats ? (state.stats.section8_rejected || 0) : 0"/></span>
                                    </div>
                                </div>
                            </div>
                            <div class="o_section_list_actions">
                                <button t-if="state.isAdmin" class="btn btn-sm btn-primary" t-on-click.stop="() => this.createSectionRecord('bhu.section8')">
                                    <i class="fa fa-plus"/> Create
                                </button>
                                <button class="btn btn-sm btn-info" t-on-click.stop="() => this.openSectionList('bhu.section8')">
                                    <i class="fa fa-eye"/> View/Edit
                                </button>
                            </div>
                        </div>
                        </t>

                        <!-- Section 11 (Step 5 for non-collector - stays in Column 1) -->
                        <t t-if="this.isSectionVisible('Section 11 Notifications')">
                        <div t-if="!state.isCollector and !state.isAdmin" class="o_section_list_item o_card_no_click">
                            <div class="o_section_list_step">
                                <span class="o_step_number bg-primary">Step 5</span>
                            </div>
                            <div class="o_section_list_icon">
                                <i class="fa fa-file-text"/>
                            </div>
                            <div class="o_section_list_content">
                                <div class="o_section_list_title">
                                    Section 11 Notifications
                                    <t t-if="state.stats &amp;&amp; state.stats.section11_info &amp;&amp; state.stats.section11_info.is_completed">
                                        <span class="o_completion_tick" title="All Section 11 Notifications completed">
                                            <i class="fa fa-check-circle"/>
                                        </span>
                                    </t>
                                    <t t-if="state.selectedProjectName or state.selectedVillageName">
                                        <div style="font-size: 11px; color: #666; margin-top: 4px; font-weight: normal;">
                                            <t t-if="state.selectedProjectName">
                                                <i class="fa fa-briefcase" style="margin-right: 4px;"/> <t t-esc="state.selectedProjectName"/>
                                            </t>
                                            <t t-if="state.selectedProjectName and state.selectedVillageName"> / </t>
                                            <t t-if="state.selectedVillageName">
                                                <i class="fa fa-home" style="margin-right: 4px;"/> <t t-esc="state.selectedVillageName"/>
                                            </t>
                                        </div>
                                    </t>
                                </div>
                                <div class="o_completion_widget_list o_completion_single_line">
                                    <div class="o_completion_percent_list"><t t-esc="state.stats ? (state.stats.section11_completion_percent || 0) : 0"/>% Complete</div>
                                    <div class="o_section_list_count">
                                        <span class="o_count_badge o_count_draft"><i class="fa fa-file-o"/> <t t-esc="state.stats ? (state.stats.section11_info ? state.stats.section11_info.draft_count : 0) : 0"/></span>
                                        <span class="o_count_badge o_count_submitted"><i class="fa fa-paper-plane"/> <t t-esc="state.stats ? (state.stats.section11_info ? state.stats.section11_info.submitted_count : 0) : 0"/></span>
                                        <span class="o_count_badge o_count_approved"><i class="fa fa-check-circle"/> <t t-esc="state.stats ? (state.stats.section11_info ? state.stats.section11_info.approved_count : 0) : 0"/></span>
                                        <span class="o_count_badge o_count_rejected"><i class="fa fa-times-circle"/> <t t-esc="state.stats ? (state.stats.section11_info ? state.stats.section11_info.send_back_count : 0) : 0"/></span>
                                    </div>
                                </div>
                            </div>
                            <div class="o_section_list_actions">
                                <button class="btn btn-sm btn-primary" t-on-click.stop="() => this.createSectionRecord('bhu.section11.preliminary.report')">
                                    <i class="fa fa-plus"/> Create
                                </button>
                                <button class="btn btn-sm btn-info" 
                                        t-on-click.stop="() => this.openFirstDocument('bhu.section11.preliminary.report', state.stats &amp;&amp; state.stats.section11_info ? state.stats.section11_info : null)"
                                        t-att-disabled="!(state.stats &amp;&amp; state.stats.section11_info &amp;&amp; state.stats.section11_info.total > 0)">
                                    <i class="fa fa-eye"/> View/Edit
                                </button>
                                <button t-if="state.isAdmin" class="btn btn-sm btn-success" 
                                        t-on-click.stop="() => this.openFirstPending('bhu.section11.preliminary.report', state.stats &amp;&amp; state.stats.section11_info ? state.stats.section11_info.first_pending_id : false, state.stats &amp;&amp; state.stats.section11_info ? state.stats.section11_info : null)"
                                        t-att-disabled="state.stats &amp;&amp; state.stats.section11_info ? this.isAllApproved(state.stats.section11_info) : true"
                                        title="Approve First Pending">
                                    <i class="fa fa-check"/> Approve
                                </button>
                                <button t-if="state.isAdmin" class="btn btn-sm btn-danger" 
                                        t-on-click.stop="() => this.openFirstPending('bhu.section11.preliminary.report', state.stats &amp;&amp; state.stats.section11_info ? state.stats.section11_info.first_pending_id : false, state.stats &amp;&amp; state.stats.section11_info ? state.stats.section11_info : null)"
                                        t-att-disabled="state.stats &amp;&amp; state.stats.section11_info ? this.isAllApproved(state.stats.section11_info) : true"
                                        title="Return First Pending">
                                    <i class="fa fa-times"/> Return
                                </button>
                            </div>
                        </div>
                        </t>

                        <!-- Section 11 (Step 6 for Collector/Admin - now in Column 1) -->
                        <t t-if="this.isSectionVisible('Section 11 Notifications')">
                        <div t-if="state.isCollector or state.isAdmin" class="o_section_list_item o_card_no_click">
                            <div class="o_section_list_step">
                                <span class="o_step_number bg-primary">Step 6</span>
                            </div>
                            <div class="o_section_list_icon">
                                <i class="fa fa-file-text"/>
                            </div>
                            <div class="o_section_list_content">
                                <div class="o_section_list_title">
                                    Section 11 Notifications
                                    <t t-if="state.stats &amp;&amp; state.stats.section11_info &amp;&amp; state.stats.section11_info.is_completed">
                                        <span class="o_completion_tick" title="All Section 11 Notifications completed">
                                            <i class="fa fa-check-circle"/>
                                        </span>
                                    </t>
                                    <t t-if="state.selectedProjectName or state.selectedVillageName">
                                        <div style="font-size: 11px; color: #666; margin-top: 4px; font-weight: normal;">
                                            <t t-if="state.selectedProjectName">
                                                <i class="fa fa-briefcase" style="margin-right: 4px;"/> <t t-esc="state.selectedProjectName"/>
                                            </t>
                                            <t t-if="state.selectedProjectName and state.selectedVillageName"> / </t>
                                            <t t-if="state.selectedVillageName">
                                                <i class="fa fa-home" style="margin-right: 4px;"/> <t t-esc="state.selectedVillageName"/>
                                            </t>
                                        </div>
                                    </t>
                                </div>
                                <div class="o_completion_widget_list o_completion_single_line">
                                    <div class="o_completion_percent_list"><t t-esc="state.stats ? (state.stats.section11_completion_percent || 0) : 0"/>% Complete</div>
                                    <div class="o_section_list_count">
                                        <span class="o_count_badge o_count_draft"><i class="fa fa-file-o"/> <t t-esc="state.stats ? (state.stats.section11_info ? state.stats.section11_info.draft_count : 0) : 0"/></span>
                                        <span class="o_count_badge o_count_submitted"><i class="fa fa-paper-plane"/> <t t-esc="state.stats ? (state.stats.section11_info ? state.stats.section11_info.submitted_count : 0) : 0"/></span>
                                        <span class="o_count_badge o_count_approved"><i class="fa fa-check-circle"/> <t t-esc="state.stats ? (state.stats.section11_info ? state.stats.section11_info.approved_count : 0) : 0"/></span>
                                        <span class="o_count_badge o_count_rejected"><i class="fa fa-times-circle"/> <t t-esc="state.stats ? (state.stats.section11_info ? state.stats.section11_info.send_back_count : 0) : 0"/></span>
                                    </div>
                                </div>
                            </div>
                            <div class="o_section_list_actions">
                                <button t-if="state.isAdmin" class="btn btn-sm btn-primary" t-on-click.stop="() => this.createSectionRecord('bhu.section11.preliminary.report')">
                                    <i class="fa fa-plus"/> Create
                                </button>
                                <button class="btn btn-sm btn-info" 
                                        t-on-click.stop="() => this.openFirstDocument('bhu.section11.preliminary.report', state.stats &amp;&amp; state.stats.section11_info ? state.stats.section11_info : null)"
                                        t-att-disabled="!(state.stats &amp;&amp; state.stats.section11_info &amp;&amp; state.stats.section11_info.total > 0)">
                                    <i class="fa fa-eye"/> View/Edit
                                </button>
                                <button class="btn btn-sm btn-success" 
                                        t-on-click.stop="() => this.openFirstPending('bhu.section11.preliminary.report', state.stats &amp;&amp; state.stats.section11_info ? state.stats.section11_info.first_pending_id : false, state.stats &amp;&amp; state.stats.section11_info ? state.stats.section11_info : null)"
                                        t-att-disabled="state.stats &amp;&amp; state.stats.section11_info ? this.isAllApproved(state.stats.section11_info) : true"
                                        title="Approve First Pending">
                                    <i class="fa fa-check"/> Approve
                                </button>
                                <button class="btn btn-sm btn-danger" 
                                        t-on-click.stop="() => this.openFirstPending('bhu.section11.preliminary.report', state.stats &amp;&amp; state.stats.section11_info ? state.stats.section11_info.first_pending_id : false, state.stats &amp;&amp; state.stats.section11_info ? state.stats.section11_info : null)"
                                        t-att-disabled="state.stats &amp;&amp; state.stats.section11_info ? this.isAllApproved(state.stats.section11_info) : true"
                                        title="Return First Pending">
                                    <i class="fa fa-times"/> Return
                                </button>
                            </div>
                        </div>
                        </t>
                        </div>
                        <!-- End Column 1 -->

                        <!-- Column 2: Steps 7-13 -->
                        <div class="o_sections_column">
                        <!-- Section 15 -->
                        <t t-if="this.isSectionVisible('(Sec 15) Objections')">
                        <div class="o_section_list_item o_card_no_click">
                            <div class="o_section_list_step">
                                <span class="o_step_number bg-primary"><t t-esc="(state.isCollector or state.isAdmin) ? 'Step 7' : 'Step 6'"/></span>
                            </div>
                            <div class="o_section_list_icon">
                                <i class="fa fa-exclamation-triangle"/>
                            </div>
                            <div class="o_section_list_content">
                                <div class="o_section_list_title">
                                    (Sec 15) Objections
                                    <t t-if="state.stats &amp;&amp; state.stats.section15_info &amp;&amp; state.stats.section15_info.is_completed">
                                        <span class="o_completion_tick" title="All Section 15 Objections completed">
                                            <i class="fa fa-check-circle"/>
                                        </span>
                                    </t>
                                    <t t-if="state.selectedProjectName or state.selectedVillageName">
                                        <div style="font-size: 11px; color: #666; margin-top: 4px; font-weight: normal;">
                                            <t t-if="state.selectedProjectName">
                                                <i class="fa fa-briefcase" style="margin-right: 4px;"/> <t t-esc="state.selectedProjectName"/>
                                            </t>
                                            <t t-if="state.selectedProjectName and state.selectedVillageName"> / </t>
                                            <t t-if="state.selectedVillageName">
                                                <i class="fa fa-home" style="margin-right: 4px;"/> <t t-esc="state.selectedVillageName"/>
                                            </t>
                                        </div>
                                    </t>
                                </div>
                                <div class="o_completion_widget_list o_completion_single_line">
                                    <div class="o_completion_percent_list"><t t-esc="state.stats ? (state.stats.section15_completion_percent || 0) : 0"/>% Complete</div>
                                    <div class="o_section_list_count">
                                        <span class="o_count_badge o_count_draft"><i class="fa fa-file-o"/> <t t-esc="state.stats ? (state.stats.section15_info ? state.stats.section15_info.draft_count : 0) : 0"/></span>
                                        <span class="o_count_badge o_count_submitted"><i class="fa fa-paper-plane"/> <t t-esc="state.stats ? (state.stats.section15_info ? state.stats.section15_info.submitted_count : 0) : 0"/></span>
                                        <span class="o_count_badge o_count_approved"><i class="fa fa-check-circle"/> <t t-esc="state.stats ? (state.stats.section15_info ? state.stats.section15_info.approved_count : 0) : 0"/></span>
                                        <span class="o_count_badge o_count_rejected"><i class="fa fa-times-circle"/> <t t-esc="state.stats ? (state.stats.section15_info ? state.stats.section15_info.send_back_count : 0) : 0"/></span>
                                    </div>
                                </div>
                            </div>
                            <div class="o_section_list_actions">
                                <button t-if="!state.isCollector or state.isAdmin" class="btn btn-sm btn-primary" t-on-click.stop="() => this.createSectionRecord('bhu.section15.objection')">
                                    <i class="fa fa-bolt"/> Action
                                </button>
                                <button class="btn btn-sm btn-info" 
                                        t-on-click.stop="() => this.openFirstDocument('bhu.section15.objection', state.stats &amp;&amp; state.stats.section15_info ? state.stats.section15_info : null)"
                                        t-att-disabled="!(state.stats &amp;&amp; state.stats.section15_info &amp;&amp; state.stats.section15_info.total > 0)">
                                    <i class="fa fa-eye"/> View/Edit
                                </button>
                                <button t-if="state.isCollector or state.isAdmin" class="btn btn-sm btn-success" 
                                        t-on-click.stop="() => this.openFirstPending('bhu.section15.objection', state.stats &amp;&amp; state.stats.section15_info ? state.stats.section15_info.first_pending_id : false, state.stats &amp;&amp; state.stats.section15_info ? state.stats.section15_info : null)"
                                        t-att-disabled="state.stats &amp;&amp; state.stats.section15_info ? this.isAllApproved(state.stats.section15_info) : true"
                                        title="Approve First Pending">
                                    <i class="fa fa-check"/> Approve
                                </button>
                                <button t-if="state.isCollector or state.isAdmin" class="btn btn-sm btn-danger" 
                                        t-on-click.stop="() => this.openFirstPending('bhu.section15.objection', state.stats &amp;&amp; state.stats.section15_info ? state.stats.section15_info.first_pending_id : false, state.stats &amp;&amp; state.stats.section15_info ? state.stats.section15_info : null)"
                                        t-att-disabled="state.stats &amp;&amp; state.stats.section15_info ? this.isAllApproved(state.stats.section15_info) : true"
                                        title="Return First Pending">
                                    <i class="fa fa-times"/> Return
                                </button>
                            </div>
                        </div>
                        </t>

                        <!-- Section 18 R and R Scheme -->
                        <t t-if="this.isSectionVisible('Section 18 R and R Scheme')">
                        <div class="o_section_list_item o_card_no_click">
                            <div class="o_section_list_step">
                                <span class="o_step_number bg-primary"><t t-esc="(state.isCollector or state.isAdmin) ? 'Step 8' : 'Step 7'"/></span>
                            </div>
                            <div class="o_section_list_icon">
                                <i class="fa fa-file-pdf-o"/>
                            </div>
                            <div class="o_section_list_content">
                                <div class="o_section_list_title">
                                    Section 18 R and R Scheme
                                    <t t-if="state.selectedProjectName">
                                        <div style="font-size: 11px; color: #666; margin-top: 4px; font-weight: normal;">
                                            <i class="fa fa-briefcase" style="margin-right: 4px;"/> <t t-esc="state.selectedProjectName"/>
                                        </div>
                                    </t>
                                </div>
                                <div class="o_completion_widget_list o_completion_single_line">
                                    <div class="o_completion_percent_list">-</div>
                                    <div class="o_section_list_count">
                                        <span class="o_count_badge o_count_draft"><i class="fa fa-file-o"/> <t t-esc="state.stats ? (state.stats.section18_rr_scheme_total || 0) : 0"/></span>
                                    </div>
                                </div>
                            </div>
                            <div class="o_section_list_actions">
                                <button t-if="!state.isCollector or state.isAdmin" class="btn btn-sm btn-primary" t-on-click.stop="() => this.createSectionRecord('bhu.section18.rr.scheme')">
                                    <i class="fa fa-upload"/> Upload
                                </button>
                                <button class="btn btn-sm btn-info" t-on-click.stop="() => this.openSectionList('bhu.section18.rr.scheme')">
                                    <i class="fa fa-eye"/> View
                                </button>
                                <button t-if="state.isCollector or state.isAdmin" class="btn btn-sm btn-success" 
                                        t-on-click.stop="() => this.openFirstPending('bhu.section18.rr.scheme', state.stats &amp;&amp; state.stats.section18_rr_scheme_first_pending_id ? state.stats.section18_rr_scheme_first_pending_id : false)"
                                        title="Approve First Pending">
                                    <i class="fa fa-check"/> Approve
                                </button>
                                <button t-if="state.isCollector or state.isAdmin" class="btn btn-sm btn-danger" 
                                        t-on-click.stop="() => this.openFirstPending('bhu.section18.rr.scheme', state.stats &amp;&amp; state.stats.section18_rr_scheme_first_pending_id ? state.stats.section18_rr_scheme_first_pending_id : false)"
                                        title="Return First Pending">
                                    <i class="fa fa-times"/> Return
                                </button>
                            </div>
                        </div>
                        </t>

                        <!-- Section 19 -->
                        <t t-if="this.isSectionVisible('(Sec 19) Section 19 Notifications')">
                        <div class="o_section_list_item o_card_no_click">
                            <div class="o_section_list_step">
                                <span class="o_step_number bg-primary"><t t-esc="(state.isCollector or state.isAdmin) ? 'Step 9' : 'Step 8'"/></span>
                            </div>
                            <div class="o_section_list_icon">
                                <i class="fa fa-bullhorn"/>
                            </div>
                            <div class="o_section_list_content">
                                <div class="o_section_list_title">
                                    (Sec 19) Section 19 Notifications
                                    <t t-if="state.stats &amp;&amp; state.stats.section19_info &amp;&amp; state.stats.section19_info.is_completed">
                                        <span class="o_completion_tick" title="All Section 19 Notifications completed">
                                            <i class="fa fa-check-circle"/>
                                        </span>
                                    </t>
                                    <t t-if="state.selectedProjectName or state.selectedVillageName">
                                        <div style="font-size: 11px; color: #666; margin-top: 4px; font-weight: normal;">
                                            <t t-if="state.selectedProjectName">
                                                <i class="fa fa-briefcase" style="margin-right: 4px;"/> <t t-esc="state.selectedProjectName"/>
                                            </t>
                                            <t t-if="state.selectedProjectName and state.selectedVillageName"> / </t>
                                            <t t-if="state.selectedVillageName">
                                                <i class="fa fa-home" style="margin-right: 4px;"/> <t t-esc="state.selectedVillageName"/>
                                            </t>
                                        </div>
                                    </t>
                                </div>
                                <div class="o_completion_widget_list o_completion_single_line">
                                    <div class="o_completion_percent_list"><t t-esc="state.stats ? (state.stats.section19_completion_percent || 0) : 0"/>% Complete</div>
                                    <div class="o_section_list_count">
                                        <span class="o_count_badge o_count_draft"><i class="fa fa-file-o"/> <t t-esc="state.stats ? (state.stats.section19_info ? state.stats.section19_info.draft_count : 0) : 0"/></span>
                                        <span class="o_count_badge o_count_submitted"><i class="fa fa-paper-plane"/> <t t-esc="state.stats ? (state.stats.section19_info ? state.stats.section19_info.submitted_count : 0) : 0"/></span>
                                        <span class="o_count_badge o_count_approved"><i class="fa fa-check-circle"/> <t t-esc="state.stats ? (state.stats.section19_info ? state.stats.section19_info.approved_count : 0) : 0"/></span>
                                        <span class="o_count_badge o_count_rejected"><i class="fa fa-times-circle"/> <t t-esc="state.stats ? (state.stats.section19_info ? state.stats.section19_info.send_back_count : 0) : 0"/></span>
                                    </div>
                                </div>
                            </div>
                            <div class="o_section_list_actions">
                                <button t-if="!state.isCollector or state.isAdmin" class="btn btn-sm btn-primary" t-on-click.stop="() => this.createSectionRecord('bhu.section19.notification')">
                                    <i class="fa fa-plus"/> Create
                                </button>
                                <button class="btn btn-sm btn-info" 
                                        t-on-click.stop="() => this.openFirstDocument('bhu.section19.notification', state.stats &amp;&amp; state.stats.section19_info ? state.stats.section19_info : null)"
                                        t-att-disabled="!(state.stats &amp;&amp; state.stats.section19_info &amp;&amp; state.stats.section19_info.total > 0)">
                                    <i class="fa fa-eye"/> View/Edit
                                </button>
                                <button t-if="state.isCollector or state.isAdmin" class="btn btn-sm btn-success" 
                                        t-on-click.stop="() => this.openFirstPending('bhu.section19.notification', state.stats &amp;&amp; state.stats.section19_info ? state.stats.section19_info.first_pending_id : false, state.stats &amp;&amp; state.stats.section19_info ? state.stats.section19_info : null)"
                                        t-att-disabled="state.stats &amp;&amp; state.stats.section19_info ? this.isAllApproved(state.stats.section19_info) : true"
                                        title="Approve First Pending">
                                    <i class="fa fa-check"/> Approve
                                </button>
                                <button t-if="state.isCollector or state.isAdmin" class="btn btn-sm btn-danger" 
                                        t-on-click.stop="() => this.openFirstPending('bhu.section19.notification', state.stats &amp;&amp; state.stats.section19_info ? state.stats.section19_info.first_pending_id : false, state.stats &amp;&amp; state.stats.section19_info ? state.stats.section19_info : null)"
                                        t-att-disabled="state.stats &amp;&amp; state.stats.section19_info ? this.isAllApproved(state.stats.section19_info) : true"
                                        title="Return First Pending">
                                    <i class="fa fa-times"/> Return
                                </button>
                            </div>
                        </div>
                        </t>

                        <!-- Sec 21 notice -->
                        <t t-if="this.isSectionVisible('Sec 21 notice')">
                        <div class="o_section_list_item o_card_no_click">
                            <div class="o_section_list_step">
                                <span class="o_step_number bg-primary"><t t-esc="(state.isCollector or state.isAdmin) ? 'Step 10' : 'Step 9'"/></span>
                            </div>
                            <div class="o_section_list_icon">
                                <i class="fa fa-gavel"/>
                            </div>
                            <div class="o_section_list_content">
                                <div class="o_section_list_title">
                                    Sec 21 notice
                                    <t t-if="state.stats &amp;&amp; state.stats.draft_award_info &amp;&amp; state.stats.draft_award_info.is_completed">
                                        <span class="o_completion_tick" title="All Sec 21 notice completed">
                                            <i class="fa fa-check-circle"/>
                                        </span>
                                    </t>
                                    <t t-if="state.selectedProjectName or state.selectedVillageName">
                                        <div style="font-size: 11px; color: #666; margin-top: 4px; font-weight: normal;">
                                            <t t-if="state.selectedProjectName">
                                                <i class="fa fa-briefcase" style="margin-right: 4px;"/> <t t-esc="state.selectedProjectName"/>
                                            </t>
                                            <t t-if="state.selectedProjectName and state.selectedVillageName"> / </t>
                                            <t t-if="state.selectedVillageName">
                                                <i class="fa fa-home" style="margin-right: 4px;"/> <t t-esc="state.selectedVillageName"/>
                                            </t>
                                        </div>
                                    </t>
                                </div>
                                <div class="o_completion_widget_list o_completion_single_line">
                                    <div class="o_completion_percent_list"><t t-esc="state.stats ? (state.stats.draft_award_completion_percent || 0) : 0"/>% Complete</div>
                                    <div class="o_section_list_count">
                                        <span class="o_count_badge o_count_draft"><i class="fa fa-file-o"/> <t t-esc="state.stats ? (state.stats.draft_award_info ? state.stats.draft_award_info.draft_count : 0) : 0"/></span>
                                        <span class="o_count_badge o_count_submitted"><i class="fa fa-paper-plane"/> <t t-esc="state.stats ? (state.stats.draft_award_info ? state.stats.draft_award_info.submitted_count : 0) : 0"/></span>
                                        <span class="o_count_badge o_count_approved"><i class="fa fa-check-circle"/> <t t-esc="state.stats ? (state.stats.draft_award_info ? state.stats.draft_award_info.approved_count : 0) : 0"/></span>
                                        <span class="o_count_badge o_count_rejected"><i class="fa fa-times-circle"/> <t t-esc="state.stats ? (state.stats.draft_award_info ? state.stats.draft_award_info.send_back_count : 0) : 0"/></span>
                                    </div>
                                </div>
                            </div>
                            <div class="o_section_list_actions">
                                <button t-if="!state.isCollector or state.isAdmin" class="btn btn-sm btn-primary" t-on-click.stop="() => this.createSectionRecord('bhu.section21.notification')">
                                    <i class="fa fa-plus"/> Create
                                </button>
                                <button class="btn btn-sm btn-info" 
                                        t-on-click.stop="() => this.openFirstDocument('bhu.section21.notification', state.stats &amp;&amp; state.stats.draft_award_info ? state.stats.draft_award_info : null)"
                                        t-att-disabled="!(state.stats &amp;&amp; state.stats.draft_award_info &amp;&amp; state.stats.draft_award_info.total > 0)">
                                    <i class="fa fa-eye"/> View/Edit
                                </button>
                                <button t-if="state.isCollector or state.isAdmin" class="btn btn-sm btn-success" 
                                        t-on-click.stop="() => this.openFirstPending('bhu.section21.notification', state.stats &amp;&amp; state.stats.draft_award_info ? state.stats.draft_award_info.first_pending_id : false, state.stats &amp;&amp; state.stats.draft_award_info ? state.stats.draft_award_info : null)"
                                        t-att-disabled="state.stats &amp;&amp; state.stats.draft_award_info ? this.isAllApproved(state.stats.draft_award_info) : true"
                                        title="Approve First Pending">
                                    <i class="fa fa-check"/> Approve
                                </button>
                                <button t-if="state.isCollector or state.isAdmin" class="btn btn-sm btn-danger" 
                                        t-on-click.stop="() => this.openFirstPending('bhu.section21.notification', state.stats &amp;&amp; state.stats.draft_award_info ? state.stats.draft_award_info.first_pending_id : false, state.stats &amp;&amp; state.stats.draft_award_info ? state.stats.draft_award_info : null)"
                                        t-att-disabled="state.stats &amp;&amp; state.stats.draft_award_info ? this.isAllApproved(state.stats.draft_award_info) : true"
                                        title="Return First Pending">
                                    <i class="fa fa-times"/> Return
                                </button>
                            </div>
                        </div>
                        </t>

                        <!-- Section 23 Award -->
                        <t t-if="this.isSectionVisible('Section 23 Award')">
                        <div class="o_section_list_item o_card_no_click">
                            <div class="o_section_list_step">
                                <span class="o_step_number bg-primary"><t t-esc="(state.isCollector or state.isAdmin) ? 'Step 11' : 'Step 10'"/></span>
                            </div>
                            <div class="o_section_list_icon">
                                <i class="fa fa-trophy"/>
                            </div>
                            <div class="o_section_list_content">
                                <div class="o_section_list_title">
                                    Section 23 Award
                                    <t t-if="state.stats &amp;&amp; state.stats.section23_award_info &amp;&amp; state.stats.section23_award_info.is_completed">
                                        <span class="o_completion_tick" title="All Section 23 Awards completed">
                                            <i class="fa fa-check-circle"/>
                                        </span>
                                    </t>
                                    <t t-if="state.selectedProjectName or state.selectedVillageName">
                                        <div style="font-size: 11px; color: #666; margin-top: 4px; font-weight: normal;">
                                            <t t-if="state.selectedProjectName">
                                                <i class="fa fa-briefcase" style="margin-right: 4px;"/> <t t-esc="state.selectedProjectName"/>
                                            </t>
                                            <t t-if="state.selectedProjectName and state.selectedVillageName"> / </t>
                                            <t t-if="state.selectedVillageName">
                                                <i class="fa fa-home" style="margin-right: 4px;"/> <t t-esc="state.selectedVillageName"/>
                                            </t>
                                        </div>
                                    </t>
                                </div>
                                <div class="o_completion_widget_list o_completion_single_line">
                                    <div class="o_completion_percent_list"><t t-esc="state.stats ? (state.stats.section23_award_completion_percent || 0) : 0"/>% Complete</div>
                                    <div class="o_section_list_count">
                                        <span class="o_count_badge o_count_draft"><i class="fa fa-file-o"/> <t t-esc="state.stats ? (state.stats.section23_award_info ? state.stats.section23_award_info.draft_count : 0) : 0"/></span>
                                        <span class="o_count_badge o_count_submitted"><i class="fa fa-paper-plane"/> <t t-esc="state.stats ? (state.stats.section23_award_info ? state.stats.section23_award_info.submitted_count : 0) : 0"/></span>
                                        <span class="o_count_badge o_count_approved"><i class="fa fa-check-circle"/> <t t-esc="state.stats ? (state.stats.section23_award_info ? state.stats.section23_award_info.approved_count : 0) : 0"/></span>
                                        <span class="o_count_badge o_count_rejected"><i class="fa fa-times-circle"/> <t t-esc="state.stats ? (state.stats.section23_award_info ? state.stats.section23_award_info.send_back_count : 0) : 0"/></span>
                                    </div>
                                </div>
                            </div>
                            <div class="o_section_list_actions">
                                <button t-if="!state.isCollector or state.isAdmin" class="btn btn-sm btn-primary" t-on-click.stop="() => this.createSectionRecord('bhu.section23.award')">
                                    <i class="fa fa-plus"/> Create
                                </button>
                                <button class="btn btn-sm btn-info" t-on-click.stop="() => this.openSectionList('bhu.section23.award')">
                                    <i class="fa fa-eye"/> View/Edit
                                </button>
                                <button t-if="state.isCollector or state.isAdmin" class="btn btn-sm btn-success" 
                                        t-on-click.stop="() => this.openFirstPending('bhu.section23.award', state.stats &amp;&amp; state.stats.section23_award_first_pending_id ? state.stats.section23_award_first_pending_id : false)"
                                        title="Approve First Pending">
                                    <i class="fa fa-check"/> Approve
                                </button>
                                <button t-if="state.isCollector or state.isAdmin" class="btn btn-sm btn-danger" 
                                        t-on-click.stop="() => this.openFirstPending('bhu.section23.award', state.stats &amp;&amp; state.stats.section23_award_first_pending_id ? state.stats.section23_award_first_pending_id : false)"
                                        title="Return First Pending">
                                    <i class="fa fa-times"/> Return
                                </button>
                            </div>
                        </div>
                        </t>




                        <!-- Payment File -->
                        <t t-if="this.isSectionVisible('Payment File')">
                        <div class="o_section_list_item o_card_no_click">
                            <div class="o_section_list_step">
                                <span class="o_step_number bg-primary"><t t-esc="(state.isCollector or state.isAdmin) ? 'Step 12' : 'Step 11'"/></span>
                            </div>
                            <div class="o_section_list_icon">
                                <i class="fa fa-file-excel-o"/>
                            </div>
                            <div class="o_section_list_content">
                                <div class="o_section_list_title">
                                    Payment File
                                    <t t-if="state.stats &amp;&amp; state.stats.payment_file_info &amp;&amp; state.stats.payment_file_info.is_completed">
                                        <span class="o_completion_tick" title="All Payment Files completed">
                                            <i class="fa fa-check-circle"/>
                                        </span>
                                    </t>
                                    <t t-if="state.selectedProjectName or state.selectedVillageName">
                                        <div style="font-size: 11px; color: #666; margin-top: 4px; font-weight: normal;">
                                            <t t-if="state.selectedProjectName">
                                                <i class="fa fa-briefcase" style="margin-right: 4px;"/> <t t-esc="state.selectedProjectName"/>
                                            </t>
                                            <t t-if="state.selectedProjectName and state.selectedVillageName"> / </t>
                                            <t t-if="state.selectedVillageName">
                                                <i class="fa fa-home" style="margin-right: 4px;"/> <t t-esc="state.selectedVillageName"/>
                                            </t>
                                        </div>
                                    </t>
                                </div>
                                <div class="o_completion_widget_list o_completion_single_line">
                                    <div class="o_completion_percent_list"><t t-esc="state.stats ? (state.stats.payment_file_completion_percent || 0) : 0"/>% Complete</div>
                                    <div class="o_section_list_count">
                                        <span class="o_count_badge o_count_draft" title="Total"><i class="fa fa-file-o"/> <t t-esc="state.stats ? (state.stats.payment_file_total || 0) : 0"/></span>
                                        <span class="o_count_badge o_count_submitted" title="Draft"><i class="fa fa-edit"/> <t t-esc="state.stats ? (state.stats.payment_file_draft || 0) : 0"/></span>
                                        <span class="o_count_badge o_count_approved" title="Generated"><i class="fa fa-check-circle"/> <t t-esc="state.stats ? (state.stats.payment_file_generated || 0) : 0"/></span>
                                    </div>
                                </div>
                            </div>
                            <div class="o_section_list_actions">
                                <button t-if="!state.isCollector or state.isAdmin" class="btn btn-sm btn-primary" t-on-click.stop="() => this.createSectionRecord('bhu.payment.file')">
                                    <i class="fa fa-plus"/> Create
                                </button>
                                <button class="btn btn-sm btn-info" t-on-click.stop="() => this.openSectionList('bhu.payment.file')">
                                    <i class="fa fa-eye"/> View/Edit
                                </button>
                            </div>
                        </div>
                        </t>

                        <!-- Payment Reconciliation -->
                        <t t-if="this.isSectionVisible('Payment Reconciliation')">
                        <div class="o_section_list_item o_card_no_click">
                            <div class="o_section_list_step">
                                <span class="o_step_number bg-primary"><t t-esc="(state.isCollector or state.isAdmin) ? 'Step 13' : 'Step 12'"/></span>
                            </div>
                            <div class="o_section_list_icon">
                                <i class="fa fa-exchange"/>
                            </div>
                            <div class="o_section_list_content">
                                <div class="o_section_list_title">
                                    Payment Reconciliation
                                    <t t-if="state.stats &amp;&amp; state.stats.reconciliation_info &amp;&amp; state.stats.reconciliation_info.is_completed">
                                        <span class="o_completion_tick" title="All Reconciliations completed">
                                            <i class="fa fa-check-circle"/>
                                        </span>
                                    </t>
                                    <t t-if="state.selectedProjectName or state.selectedVillageName">
                                        <div style="font-size: 11px; color: #666; margin-top: 4px; font-weight: normal;">
                                            <t t-if="state.selectedProjectName">
                                                <i class="fa fa-briefcase" style="margin-right: 4px;"/> <t t-esc="state.selectedProjectName"/>
                                            </t>
                                            <t t-if="state.selectedProjectName and state.selectedVillageName"> / </t>
                                            <t t-if="state.selectedVillageName">
                                                <i class="fa fa-home" style="margin-right: 4px;"/> <t t-esc="state.selectedVillageName"/>
                                            </t>
                                        </div>
                                    </t>
                                </div>
                                <div class="o_completion_widget_list o_completion_single_line">
                                    <div class="o_completion_percent_list"><t t-esc="state.stats ? (state.stats.reconciliation_completion_percent || 0) : 0"/>% Complete</div>
                                    <div class="o_section_list_count">
                                        <span class="o_count_badge o_count_draft" title="Total"><i class="fa fa-file-o"/> <t t-esc="state.stats ? (state.stats.reconciliation_total || 0) : 0"/></span>
                                        <span class="o_count_badge o_count_submitted" title="Draft"><i class="fa fa-edit"/> <t t-esc="state.stats ? (state.stats.reconciliation_draft || 0) : 0"/></span>
                                        <span class="o_count_badge o_count_approved" title="Processed"><i class="fa fa-spinner fa-spin"/> <t t-esc="state.stats ? (state.stats.reconciliation_processed || 0) : 0"/></span>
                                        <span class="o_count_badge o_count_rejected" title="Completed"><i class="fa fa-check-circle"/> <t t-esc="state.stats ? (state.stats.reconciliation_completed || 0) : 0"/></span>
                                    </div>
                                </div>
                            </div>
                            <div class="o_section_list_actions">
                                <button t-if="!state.isCollector or state.isAdmin" class="btn btn-sm btn-primary" t-on-click.stop="() => this.createSectionRecord('bhu.payment.reconciliation.bank')">
                                    <i class="fa fa-plus"/> Create
                                </button>
                                <button class="btn btn-sm btn-info" t-on-click.stop="() => this.openSectionList('bhu.payment.reconciliation.bank')">
                                    <i class="fa fa-eye"/> View/Edit
                                </button>
                            </div>
                        </div>
                        </t>

                        <!-- Section 20 A (Railways) -->
                        <t t-if="this.isSectionVisible('Sec 20 A (Railways)')">
                        <div class="o_section_list_item o_card_no_click">
                            <div class="o_section_list_step">
                                <span class="o_step_number bg-primary"><t t-esc="this.getStepNumber('Sec 20 A (Railways)', (state.isCollector or state.isAdmin) ? 'Step 12' : 'Step 11')"/></span>
                            </div>
                            <div class="o_section_list_icon">
                                <i class="fa fa-train"/>
                            </div>
                            <div class="o_section_list_content">
                                <div class="o_section_list_title">
                                    Sec 20 A (Railways)
                                    <t t-if="state.selectedProjectName or state.selectedVillageName">
                                        <div style="font-size: 11px; color: #666; margin-top: 4px; font-weight: normal;">
                                            <t t-if="state.selectedProjectName">
                                                <i class="fa fa-briefcase" style="margin-right: 4px;"/> <t t-esc="state.selectedProjectName"/>
                                            </t>
                                            <t t-if="state.selectedProjectName and state.selectedVillageName"> / </t>
                                            <t t-if="state.selectedVillageName">
                                                <i class="fa fa-home" style="margin-right: 4px;"/> <t t-esc="state.selectedVillageName"/>
                                            </t>
                                        </div>
                                    </t>
                                </div>
                                <div class="o_completion_widget_list o_completion_single_line">
                                    <div class="o_completion_percent_list">-</div>
                                    <div class="o_section_list_count">
                                        <span class="o_count_badge o_count_draft"><i class="fa fa-file-o"/> <t t-esc="state.stats ? (state.stats.section20a_railways_total || 0) : 0"/></span>
                                    </div>
                                </div>
                            </div>
                            <div class="o_section_list_actions">
                                <button t-if="!state.isCollector or state.isAdmin" class="btn btn-sm btn-primary" t-on-click.stop="() => this.createSectionRecord('bhu.section20a.railways')">
                                    <i class="fa fa-plus"/> Create
                                </button>
                                <button class="btn btn-sm btn-info" t-on-click.stop="() => this.openSectionList('bhu.section20a.railways')">
                                    <i class="fa fa-eye"/> View/Edit
                                </button>
                                <button t-if="state.isCollector or state.isAdmin" class="btn btn-sm btn-success" 
                                        t-on-click.stop="() => this.openFirstPending('bhu.section20a.railways', state.stats &amp;&amp; state.stats.section20a_railways_first_pending_id ? state.stats.section20a_railways_first_pending_id : false)"
                                        title="Approve First Pending">
                                    <i class="fa fa-check"/> Approve
                                </button>
                                <button t-if="state.isCollector or state.isAdmin" class="btn btn-sm btn-danger" 
                                        t-on-click.stop="() => this.openFirstPending('bhu.section20a.railways', state.stats &amp;&amp; state.stats.section20a_railways_first_pending_id ? state.stats.section20a_railways_first_pending_id : false)"
                                        title="Return First Pending">
                                    <i class="fa fa-times"/> Return
                                </button>
                            </div>
                        </div>
                        </t>


                        <!-- Section 20 E (Railways) -->
                        <t t-if="this.isSectionVisible('Sec 20 E (Railways)')">
                        <div class="o_section_list_item o_card_no_click">
                            <div class="o_section_list_step">
                                <span class="o_step_number bg-primary"><t t-esc="this.getStepNumber('Sec 20 E (Railways)', (state.isCollector or state.isAdmin) ? 'Step 14' : 'Step 13')"/></span>
                            </div>
                            <div class="o_section_list_icon">
                                <i class="fa fa-train"/>
                            </div>
                            <div class="o_section_list_content">
                                <div class="o_section_list_title">
                                    Sec 20 E (Railways)
                                    <t t-if="state.selectedProjectName or state.selectedVillageName">
                                        <div style="font-size: 11px; color: #666; margin-top: 4px; font-weight: normal;">
                                            <t t-if="state.selectedProjectName">
                                                <i class="fa fa-briefcase" style="margin-right: 4px;"/> <t t-esc="state.selectedProjectName"/>
                                            </t>
                                            <t t-if="state.selectedProjectName and state.selectedVillageName"> / </t>
                                            <t t-if="state.selectedVillageName">
                                                <i class="fa fa-home" style="margin-right: 4px;"/> <t t-esc="state.selectedVillageName"/>
                                            </t>
                                        </div>
                                    </t>
                                </div>
                                <div class="o_completion_widget_list o_completion_single_line">
                                    <div class="o_completion_percent_list">-</div>
                                    <div class="o_section_list_count">
                                        <span class="o_count_badge o_count_draft"><i class="fa fa-file-o"/> <t t-esc="state.stats ? (state.stats.section20e_railways_total || 0) : 0"/></span>
                                    </div>
                                </div>
                            </div>
                            <div class="o_section_list_actions">
                                <button t-if="!state.isCollector or state.isAdmin" class="btn btn-sm btn-primary" t-on-click.stop="() => this.createSectionRecord('bhu.section20e.railways')">
                                    <i class="fa fa-plus"/> Create
                                </button>
                                <button class="btn btn-sm btn-info" t-on-click.stop="() => this.openSectionList('bhu.section20e.railways')">
                                    <i class="fa fa-eye"/> View/Edit
                                </button>
                                <button t-if="state.isCollector or state.isAdmin" class="btn btn-sm btn-success" 
                                        t-on-click.stop="() => this.openFirstPending('bhu.section20e.railways', state.stats &amp;&amp; state.stats.section20e_railways_first_pending_id ? state.stats.section20e_railways_first_pending_id : false)"
                                        title="Approve First Pending">
                                    <i class="fa fa-check"/> Approve
                                </button>
                                <button t-if="state.isCollector or state.isAdmin" class="btn btn-sm btn-danger" 
                                        t-on-click.stop="() => this.openFirstPending('bhu.section20e.railways', state.stats &amp;&amp; state.stats.section20e_railways_first_pending_id ? state.stats.section20e_railways_first_pending_id : false)"
                                        title="Return First Pending">
                                    <i class="fa fa-times"/> Return
                                </button>
                            </div>
                        </div>
                        </t>

                        <!-- Section 3A (NH) -->
                        <t t-if="this.isSectionVisible('Sec 3A (NH)')">
                        <div class="o_section_list_item o_card_no_click">
                            <div class="o_section_list_step">
                                <span class="o_step_number bg-primary"><t t-esc="this.getStepNumber('Sec 3A (NH)', (state.isCollector or state.isAdmin) ? 'Step 15' : 'Step 14')"/></span>
                            </div>
                            <div class="o_section_list_icon">
                                <i class="fa fa-road"/>
                            </div>
                            <div class="o_section_list_content">
                                <div class="o_section_list_title">
                                    Sec 3A (NH)
                                    <t t-if="state.selectedProjectName or state.selectedVillageName">
                                        <div style="font-size: 11px; color: #666; margin-top: 4px; font-weight: normal;">
                                            <t t-if="state.selectedProjectName">
                                                <i class="fa fa-briefcase" style="margin-right: 4px;"/> <t t-esc="state.selectedProjectName"/>
                                            </t>
                                            <t t-if="state.selectedProjectName and state.selectedVillageName"> / </t>
                                            <t t-if="state.selectedVillageName">
                                                <i class="fa fa-home" style="margin-right: 4px;"/> <t t-esc="state.selectedVillageName"/>
                                            </t>
                                        </div>
                                    </t>
                                </div>
                                <div class="o_completion_widget_list o_completion_single_line">
                                    <div class="o_completion_percent_list">-</div>
                                    <div class="o_section_list_count">
                                        <span class="o_count_badge o_count_draft"><i class="fa fa-file-o"/> <t t-esc="state.stats ? (state.stats.section3a_nh_total || 0) : 0"/></span>
                                    </div>
                                </div>
                            </div>
                            <div class="o_section_list_actions">
                                <button t-if="!state.isCollector or state.isAdmin" class="btn btn-sm btn-primary" t-on-click.stop="() => this.createSectionRecord('bhu.section3a.nh')">
                                    <i class="fa fa-plus"/> Create
                                </button>
                                <button class="btn btn-sm btn-info" t-on-click.stop="() => this.openSectionList('bhu.section3a.nh')">
                                    <i class="fa fa-eye"/> View/Edit
                                </button>
                                <button t-if="state.isCollector or state.isAdmin" class="btn btn-sm btn-success" 
                                        t-on-click.stop="() => this.openFirstPending('bhu.section3a.nh', state.stats &amp;&amp; state.stats.section3a_nh_first_pending_id ? state.stats.section3a_nh_first_pending_id : false)"
                                        title="Approve First Pending">
                                    <i class="fa fa-check"/> Approve
                                </button>
                                <button t-if="state.isCollector or state.isAdmin" class="btn btn-sm btn-danger" 
                                        t-on-click.stop="() => this.openFirstPending('bhu.section3a.nh', state.stats &amp;&amp; state.stats.section3a_nh_first_pending_id ? state.stats.section3a_nh_first_pending_id : false)"
                                        title="Return First Pending">
                                    <i class="fa fa-times"/> Return
                                </button>
                            </div>
                        </div>
                        </t>


                        <!-- Section 3D (NH) -->
                        <t t-if="this.isSectionVisible('Sec 3D (NH)')">
                        <div class="o_section_list_item o_card_no_click">
                            <div class="o_section_list_step">
                                <span class="o_step_number bg-primary"><t t-esc="this.getStepNumber('Sec 3D (NH)', (state.isCollector or state.isAdmin) ? 'Step 17' : 'Step 16')"/></span>
                            </div>
                            <div class="o_section_list_icon">
                                <i class="fa fa-road"/>
                            </div>
                            <div class="o_section_list_content">
                                <div class="o_section_list_title">
                                    Sec 3D (NH)
                                    <t t-if="state.selectedProjectName or state.selectedVillageName">
                                        <div style="font-size: 11px; color: #666; margin-top: 4px; font-weight: normal;">
                                            <t t-if="state.selectedProjectName">
                                                <i class="fa fa-briefcase" style="margin-right: 4px;"/> <t t-esc="state.selectedProjectName"/>
                                            </t>
                                            <t t-if="state.selectedProjectName and state.selectedVillageName"> / </t>
                                            <t t-if="state.selectedVillageName">
                                                <i class="fa fa-home" style="margin-right: 4px;"/> <t t-esc="state.selectedVillageName"/>
                                            </t>
                                        </div>
                                    </t>
                                </div>
                                <div class="o_completion_widget_list o_completion_single_line">
                                    <div class="o_completion_percent_list">-</div>
                                    <div class="o_section_list_count">
                                        <span class="o_count_badge o_count_draft"><i class="fa fa-file-o"/> <t t-esc="state.stats ? (state.stats.section3d_nh_total || 0) : 0"/></span>
                                    </div>
                                </div>
                            </div>
                            <div class="o_section_list_actions">
                                <button t-if="!state.isCollector or state.isAdmin" class="btn btn-sm btn-primary" t-on-click.stop="() => this.createSectionRecord('bhu.section3d.nh')">
                                    <i class="fa fa-plus"/> Create
                                </button>
                                <button class="btn btn-sm btn-info" t-on-click.stop="() => this.openSectionList('bhu.section3d.nh')">
                                    <i class="fa fa-eye"/> View/Edit
                                </button>
                                <button t-if="state.isCollector or state.isAdmin" class="btn btn-sm btn-success" 
                                        t-on-click.stop="() => this.openFirstPending('bhu.section3d.nh', state.stats &amp;&amp; state.stats.section3d_nh_first_pending_id ? state.stats.section3d_nh_first_pending_id : false)"
                                        title="Approve First Pending">
                                    <i class="fa fa-check"/> Approve
                                </button>
                                <button t-if="state.isCollector or state.isAdmin" class="btn btn-sm btn-danger" 
                                        t-on-click.stop="() => this.openFirstPending('bhu.section3d.nh', state.stats &amp;&amp; state.stats.section3d_nh_first_pending_id ? state.stats.section3d_nh_first_pending_id : false)"
                                        title="Return First Pending">
                                    <i class="fa fa-times"/> Return
                                </button>
                            </div>
                        </div>
                        </t>

                        <!-- Mutual Consent Policy -->
                        <t t-if="this.isSectionVisible('     (Only in  and )')">
                        <div class="o_section_list_item o_card_no_click">
                            <div class="o_section_list_step">
                                <span class="o_step_number bg-primary"><t t-esc="(state.isCollector or state.isAdmin) ? 'Step 18' : 'Step 17'"/></span>
                            </div>
                            <div class="o_section_list_icon">
                                <i class="fa fa-handshake-o"/>
                            </div>
                            <div class="o_section_list_content">
                                <div class="o_section_list_title">
                                    Mutual Consent Policy
                                    <t t-if="state.selectedProjectName or state.selectedVillageName">
                                        <div style="font-size: 11px; color: #666; margin-top: 4px; font-weight: normal;">
                                            <t t-if="state.selectedProjectName">
                                                <i class="fa fa-briefcase" style="margin-right: 4px;"/> <t t-esc="state.selectedProjectName"/>
                                            </t>
                                            <t t-if="state.selectedProjectName and state.selectedVillageName"> / </t>
                                            <t t-if="state.selectedVillageName">
                                                <i class="fa fa-home" style="margin-right: 4px;"/> <t t-esc="state.selectedVillageName"/>
                                            </t>
                                        </div>
                                    </t>
                                </div>
                                <div class="o_completion_widget_list o_completion_single_line">
                                    <div class="o_completion_percent_list"><t t-esc="state.stats ? (state.stats.mutual_consent_policy_completion_percent || 0) : 0"/>% Complete</div>
                                    <div class="o_section_list_count">
                                        <span class="o_count_badge o_count_draft"><i class="fa fa-file-o"/> <t t-esc="state.stats ? (state.stats.mutual_consent_policy_info ? state.stats.mutual_consent_policy_info.draft_count : 0) : 0"/></span>
                                        <span class="o_count_badge o_count_submitted"><i class="fa fa-paper-plane"/> <t t-esc="state.stats ? (state.stats.mutual_consent_policy_info ? state.stats.mutual_consent_policy_info.submitted_count : 0) : 0"/></span>
                                        <span class="o_count_badge o_count_approved"><i class="fa fa-check-circle"/> <t t-esc="state.stats ? (state.stats.mutual_consent_policy_info ? state.stats.mutual_consent_policy_info.approved_count : 0) : 0"/></span>
                                        <span class="o_count_badge o_count_rejected"><i class="fa fa-times-circle"/> <t t-esc="state.stats ? (state.stats.mutual_consent_policy_info ? state.stats.mutual_consent_policy_info.send_back_count : 0) : 0"/></span>
                                    </div>
                                </div>
                            </div>
                            <div class="o_section_list_actions">
                                <button t-if="!state.isCollector or state.isAdmin" class="btn btn-sm btn-primary" t-on-click.stop="() => this.createSectionRecord('bhu.mutual.consent.policy')">
                                    <i class="fa fa-plus"/> Create
                                </button>
                                <button class="btn btn-sm btn-info" 
                                        t-on-click.stop="() => this.openFirstDocument('bhu.mutual.consent.policy', state.stats &amp;&amp; state.stats.mutual_consent_policy_info ? state.stats.mutual_consent_policy_info : null)"
                                        t-att-disabled="!(state.stats &amp;&amp; state.stats.mutual_consent_policy_info &amp;&amp; state.stats.mutual_consent_policy_info.total > 0)">
                                    <i class="fa fa-eye"/> View/Edit
                                </button>
                                <button t-if="state.isCollector or state.isAdmin" class="btn btn-sm btn-success" 
                                        t-on-click.stop="() => this.openFirstPending('bhu.mutual.consent.policy', state.stats &amp;&amp; state.stats.mutual_consent_policy_info ? state.stats.mutual_consent_policy_info.first_pending_id : false, state.stats &amp;&amp; state.stats.mutual_consent_policy_info ? state.stats.mutual_consent_policy_info : null)"
                                        t-att-disabled="state.stats &amp;&amp; state.stats.mutual_consent_policy_info ? this.isAllApproved(state.stats.mutual_consent_policy_info) : true"
                                        title="Approve First Pending">
                                    <i class="fa fa-check"/> Approve
                                </button>
                                <button t-if="state.isCollector or state.isAdmin" class="btn btn-sm btn-danger" 
                                        t-on-click.stop="() => this.openFirstPending('bhu.mutual.consent.policy', state.stats &amp;&amp; state.stats.mutual_consent_policy_info ? state.stats.mutual_consent_policy_info.first_pending_id : false, state.stats &amp;&amp; state.stats.mutual_consent_policy_info ? state.stats.mutual_consent_policy_info : null)"
                                        t-att-disabled="state.stats &amp;&amp; state.stats.mutual_consent_policy_info ? this.isAllApproved(state.stats.mutual_consent_policy_info) : true"
                                        title="Return First Pending">
                                    <i class="fa fa-times"/> Return
                                </button>
                            </div>
                        </div>
                        </t>
                        </div>
                        <!-- End Column 2 -->

                    </div>
                </div>
            </div>
        </div>
    </t>
</templates>

