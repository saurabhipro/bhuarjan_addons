<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Survey List View -->
    <record id="view_bhu_survey_list" model="ir.ui.view">
        <field name="name">bhu.survey.list</field>
        <field name="model">bhu.survey</field>
        <field name="arch" type="xml">
            <list duplicate="0" string="Surveys / ‡§∏‡§∞‡•ç‡§µ‡•á" decoration-info="state == 'draft'" decoration-success="state == 'approved'" decoration-danger="state == 'rejected'" decoration-muted="state == 'locked'" multi_edit="1" default_order="create_date desc">
                <field name="name"/>
                <field name="user_id"/>
                <field name="project_id"/>
                <field name="village_id"/>
                <field name="tehsil_id"/>
                <field name="khasra_number"/>
                <field name="total_area"/>
                <field name="acquired_area"/>
                <field name="survey_date"/>
                <field name="state" widget="badge" 
                       decoration-success="state == 'approved'"
                       decoration-info="state == 'draft'"
                       decoration-warning="state == 'submitted'"
                       decoration-danger="state == 'rejected'"
                       decoration-muted="state == 'locked'"/>
                
            </list>
        </field>
    </record>

    <!-- Survey Form View -->
    <record id="view_bhu_survey_form" model="ir.ui.view">
        <field name="name">bhu.survey.form</field>
        <field name="model">bhu.survey</field>
        <field name="arch" type="xml">
            <form string="Survey / ‡§∏‡§∞‡•ç‡§µ‡•á" duplicate="0" js_class="confirm_save_form">
                <header>
                    
                    <button name="action_submit" string="Submit / ‡§™‡•ç‡§∞‡§∏‡•ç‡§§‡•Å‡§§ ‡§ï‡§∞‡•á‡§Ç" type="object" class="btn-primary" invisible="state != 'draft'" confirm="Are you sure you want to submit this survey?"/>
                    <button name="action_approve" string="Approve / ‡§Ö‡§®‡•Å‡§Æ‡•ã‡§¶‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç" type="object" class="btn-success" invisible="state != 'submitted'"/>
                    <button name="action_reject" string="Reject / ‡§Ö‡§∏‡•ç‡§µ‡•Ä‡§ï‡•É‡§§ ‡§ï‡§∞‡•á‡§Ç" type="object" class="btn-danger" invisible="state != 'submitted'"/>
                    <button name="action_reset_to_draft" string="Reset to Draft / ‡§™‡•ç‡§∞‡§æ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§∞‡•Ä‡§∏‡•á‡§ü" type="object" invisible="state != 'rejected'"/>
                    <field name="state" widget="statusbar" statusbar_visible="draft,submitted,approved,locked"/>
                </header>
                <sheet>
                    <!-- <div class="oe_title" style="margin-bottom: 10px;">
                        <h1 style="margin-bottom: 5px;">
                            <field name="name" placeholder="Survey Number / ‡§∏‡§∞‡•ç‡§µ‡•á ‡§®‡§Ç‡§¨‡§∞" required="1" invisible="1"/>
                        </h1>
                    </div>
                     -->
                    <!-- Locked Survey Warning -->
                    <div class="alert alert-warning" role="alert" invisible="state != 'locked'" style="margin-bottom: 15px;">
                        <strong>Survey Locked / ‡§∏‡§∞‡•ç‡§µ‡•á ‡§≤‡•â‡§ï:</strong> This survey has been used to generate Notification 4 and is now locked. No further modifications are allowed.
                        <br/>
                        <strong>‡§∏‡§∞‡•ç‡§µ‡•á ‡§≤‡•â‡§ï:</strong> ‡§á‡§∏ ‡§∏‡§∞‡•ç‡§µ‡•á ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§Ö‡§ß‡§ø‡§∏‡•Ç‡§ö‡§®‡§æ 4 ‡§ú‡•á‡§®‡§∞‡•á‡§ü ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à ‡§î‡§∞ ‡§Ö‡§¨ ‡§Ø‡§π ‡§≤‡•â‡§ï ‡§π‡•à‡•§ ‡§ï‡•ã‡§à ‡§î‡§∞ ‡§∏‡§Ç‡§∂‡•ã‡§ß‡§® ‡§ï‡•Ä ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§
                    </div>
                    
                    <group>
                        <group string="Project Information / ‡§™‡§∞‡§ø‡§Ø‡•ã‡§ú‡§®‡§æ ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä" class="survey-icon-project">
                            <field name="project_id" widget="selection" readonly="state == 'locked'" required="1" string="Project * / ‡§™‡§∞‡§ø‡§Ø‡•ã‡§ú‡§®‡§æ *"/>
                            <field name="department_id" widget="selection" readonly="state == 'locked'" required="1" string="Department * / ‡§µ‡§ø‡§≠‡§æ‡§ó *"/>
                            <field name="survey_date" widget="date" readonly="state == 'locked'" required="1" string="Survey Date * / ‡§∏‡§∞‡•ç‡§µ‡•á ‡§¶‡§ø‡§®‡§æ‡§Å‡§ï *" options="{'date_format': 'dd/mm/yyyy'}"/>
                        </group>
                        <group string="Location Information / ‡§∏‡•ç‡§•‡§æ‡§® ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä" class="survey-icon-location">
                            <field name="company_id" readonly="state == 'locked'" required="1" string="District"/>
                            <field name="village_id" widget="selection" readonly="state == 'locked'" required="1" string="Village * / ‡§ó‡•ç‡§∞‡§æ‡§Æ ‡§ï‡§æ ‡§®‡§æ‡§Æ *"/>
                            <field name="tehsil_id" widget="selection" readonly="state == 'locked'" required="1" string="Tehsil * / ‡§§‡§π‡§∏‡•Ä‡§≤ *"/>
                            <field name="district_name" readonly="state == 'locked'"/>
                            <field name="user_id"/>
                        </group>
                    </group>
                    
                    <field name="survey_uuid" readonly="1" invisible="1"/>
                    
                    <notebook>
                        <page string="Survey / ‡§∏‡§∞‡•ç‡§µ‡•á" name="survey_details">
                            <group>
                                <group string="Land Information / ‡§≠‡•Ç‡§Æ‡§ø ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä" class="survey-icon-land">
                                    <field name="khasra_number" widget="char" readonly="state == 'locked'" required="1" string="Khasra Number * / ‡§ñ‡§∏‡§∞‡§æ ‡§®‡§Ç‡§¨‡§∞ *"/>
                                    <field name="total_area" widget="float" readonly="state == 'locked'"/>
                                    <field name="acquired_area" widget="float" readonly="state == 'locked'" string="Acquired Area (Hectares) / ‡§Ö‡§∞‡•ç‡§ú‡§® ‡§π‡•á‡§§‡•Å ‡§™‡•ç‡§∞‡§∏‡•ç‡§§‡§æ‡§µ‡§ø‡§§ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡§´‡§≤ (‡§π‡•á‡§ï‡•ç‡§ü‡•á‡§Ø‡§∞)"/>
                                </group>
                                <group string="Crop Information / ‡§´‡§∏‡§≤ ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä" class="survey-icon-crop">
                                    <field name="crop_type" widget="radio" readonly="state == 'locked'" options="{'horizontal': true}"/>
                                    <field name="irrigation_type" widget="radio" readonly="state == 'locked'" options="{'horizontal': true}"/>
                                </group>
                            </group>
                            
                            <group>
                                <group string="Tree Information / ‡§µ‡•É‡§ï‡•ç‡§∑ ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä" class="survey-icon-tree">
                                    <field name="tree_development_stage" widget="selection" readonly="state == 'locked'"/>
                                    <field name="tree_count" widget="integer" readonly="state == 'locked'"/>
                                    <field name="trees_description" widget="text" readonly="state == 'locked'" 
                                           placeholder="Enter detailed description of trees present on the land"/>
                                </group>
                                <group string="House Information / ‡§ò‡§∞ ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä" class="survey-icon-house">
                                    <field name="has_house" widget="radio" readonly="state == 'locked'" options="{'horizontal': true}"/>
                                    <field name="house_type" widget="selection" invisible="has_house != 'yes'" required="has_house == 'yes'" readonly="state == 'locked'"/>
                                    <field name="house_area" widget="float" invisible="has_house != 'yes'" required="has_house == 'yes'" readonly="state == 'locked'"/>
                                    <field name="shed_area" widget="float" readonly="state == 'locked'"/>
                                </group>
                            </group>
                            
                            <group>
                                <group string="Infrastructure / ‡§¨‡•Å‡§®‡§ø‡§Ø‡§æ‡§¶‡•Ä ‡§∏‡•Å‡§µ‡§ø‡§ß‡§æ‡§è‡§Ç" class="survey-icon-infrastructure">
                                    <field name="has_well" widget="radio" readonly="state == 'locked'" options="{'horizontal': true}"/>
                                    <field name="well_type" widget="selection" invisible="has_well != 'yes'" readonly="state == 'locked'"/>
                                    <field name="has_tubewell" widget="radio" readonly="state == 'locked'" options="{'horizontal': true}"/>
                                    <field name="has_pond" widget="radio" readonly="state == 'locked'" options="{'horizontal': true}"/>
                                </group>
                                <group string="Remarks / ‡§ü‡§ø‡§™‡•ç‡§™‡§£‡•Ä" class="survey-icon-remarks">
                                    <field name="remarks" placeholder="Enter any additional notes"/>
                                </group>
                                <group string="Survey Image / ‡§∏‡§∞‡•ç‡§µ‡•á ‡§õ‡§µ‡§ø">
                                    <field name="survey_image" widget="capture_image" class="oe_avatar"/>
                                    <field name="survey_image_filename" invisible="1"/>
                                </group>
                            </group>
                            
                            
                            
                        </page>
                        
                        <page string="Landowner / ‡§≠‡•Ç‡§Æ‡§ø‡§∏‡•ç‡§µ‡§æ‡§Æ‡•Ä" name="landowners_details">
                            <group string="Landowners / ‡§≠‡•Ç‡§Æ‡§ø‡§∏‡•ç‡§µ‡§æ‡§Æ‡•Ä" class="survey-icon-landowners" style="margin-top: 10px;">
                                <field name="landowner_ids" widget="many2many_tags" options="{'no_create': False, 'no_create_edit': False}" 
                                       context="{'default_company_id': company_id, 'default_village_id': village_id, 'default_tehsil_id': tehsil_id}"/>
                            </group>
                            
                            <group string="Landowner Details / ‡§≠‡•Ç‡§Æ‡§ø‡§∏‡•ç‡§µ‡§æ‡§Æ‡•Ä ‡§µ‡§ø‡§µ‡§∞‡§£" style="margin-top: 20px;">
                                <field name="landowner_ids" readonly="1">
                                    <list string="Landowner Details / ‡§≠‡•Ç‡§Æ‡§ø‡§∏‡•ç‡§µ‡§æ‡§Æ‡•Ä ‡§µ‡§ø‡§µ‡§∞‡§£">
                                        <field name="name" string="Name / ‡§®‡§æ‡§Æ"/>
                                        <field name="father_name" string="Father's Name / ‡§™‡§ø‡§§‡§æ ‡§ï‡§æ ‡§®‡§æ‡§Æ"/>
                                        <field name="age" string="Age / ‡§Ü‡§Ø‡•Å"/>
                                        <field name="gender" string="Gender / ‡§≤‡§ø‡§Ç‡§ó"/>
                                        <field name="village_id" string="Village / ‡§ó‡•ç‡§∞‡§æ‡§Æ"/>
                                        <field name="tehsil_id" string="Tehsil / ‡§§‡§π‡§∏‡•Ä‡§≤"/>
                                        <field name="district_id" string="District / ‡§ú‡§ø‡§≤‡§æ"/>
                                        <field name="aadhar_number" string="Aadhar / ‡§Ü‡§ß‡§æ‡§∞"/>
                                        <field name="pan_number" string="PAN / ‡§™‡•à‡§®"/>
                                        <field name="bank_name" string="Bank / ‡§¨‡•à‡§Ç‡§ï"/>
                                        <field name="account_number" string="Account / ‡§ñ‡§æ‡§§‡§æ"/>
                                    </list>
                                </field>
                            </group>
                        </page>
                    </notebook>
                    
                    <!-- Chatter removed -->
                </sheet>
                <chatter groups="bhuarjan.group_bhuarjan_ri,bhuarjan.group_bhuarjan_nayab_tahsildar,bhuarjan.group_bhuarjan_tahsildar,bhuarjan.group_bhuarjan_sdm,bhuarjan.group_bhuarjan_additional_collector,bhuarjan.group_bhuarjan_collector,bhuarjan.group_bhuarjan_admin"/>
            </form>
        </field>
    </record>

    <!-- Survey Search View -->
    <record id="view_bhu_survey_search" model="ir.ui.view">
        <field name="name">bhu.survey.search</field>
        <field name="model">bhu.survey</field>
        <field name="arch" type="xml">
            <search string="Search Surveys / ‡§∏‡§∞‡•ç‡§µ‡•á ‡§ñ‡•ã‡§ú‡•á‡§Ç">
                <field name="name"/>
                <field name="landowner_ids"/>
                <field name="project_id"/>
                <field name="department_id"/>
                <field name="village_id"/>
                <field name="tehsil_id"/>
                <field name="khasra_number"/>
                <field name="survey_date"/>
                <field name="survey_uuid"/>
                
                <field name="landowner_pan_numbers" string="Pan Number"/>
                <field name="landowner_aadhar_numbers" string="Aadhar Number"/>
            
                <filter string="Draft / ‡§™‡•ç‡§∞‡§æ‡§∞‡•Ç‡§™" name="draft" domain="[('state', '=', 'draft')]"/>

                <filter string="Submitted / ‡§™‡•ç‡§∞‡§∏‡•ç‡§§‡•Å‡§§" name="submitted" domain="[('state', '=', 'submitted')]"/>
                <filter string="Approved / ‡§Ö‡§®‡•Å‡§Æ‡•ã‡§¶‡§ø‡§§" name="approved" domain="[('state', '=', 'approved')]"/>
                <filter string="Rejected / ‡§Ö‡§∏‡•ç‡§µ‡•Ä‡§ï‡•É‡§§" name="rejected" domain="[('state', '=', 'rejected')]"/>
                
                <separator/>
                <filter string="This Month / ‡§á‡§∏ ‡§Æ‡§π‡•Ä‡§®‡•á" name="this_month" domain="[('survey_date', '>=', (context_today() - relativedelta(months=1)).strftime('%Y-%m-01')), ('survey_date', '&lt;', (context_today() + relativedelta(months=1)).strftime('%Y-%m-01'))]"/>
                <filter string="This Year / ‡§á‡§∏ ‡§∏‡§æ‡§≤" name="this_year" domain="[('survey_date', '>=', context_today().strftime('%Y-01-01')), ('survey_date', '&lt;', (context_today() + relativedelta(years=1)).strftime('%Y-01-01'))]"/>
                
                <group expand="0" string="Group By / ‡§∏‡§Æ‡•Ç‡§π ‡§¨‡§®‡§æ‡§è‡§Ç">
                    <filter string="State / ‡§∏‡•ç‡§•‡§ø‡§§‡§ø" name="group_state" context="{'group_by': 'state'}"/>
                    <filter string="Village / ‡§ó‡•ç‡§∞‡§æ‡§Æ" name="group_village" context="{'group_by': 'village_id'}"/>
                    <filter string="Tehsil / ‡§§‡§π‡§∏‡•Ä‡§≤" name="group_tehsil" context="{'group_by': 'tehsil_id'}"/>
                    <filter string="Khasra Number / ‡§ñ‡§∏‡§∞‡§æ ‡§®‡§Ç‡§¨‡§∞" name="group_khasra" context="{'group_by': 'khasra_number'}"/>
                    <filter string="Project / ‡§™‡§∞‡§ø‡§Ø‡•ã‡§ú‡§®‡§æ" name="group_project" context="{'group_by': 'project_id'}"/>
                    <filter string="Department / ‡§µ‡§ø‡§≠‡§æ‡§ó" name="group_department" context="{'group_by': 'department_id'}"/>
                    <filter string="Survey Date / ‡§∏‡§∞‡•ç‡§µ‡•á ‡§¶‡§ø‡§®‡§æ‡§Å‡§ï" name="group_survey_date" context="{'group_by': 'survey_date'}"/>
                </group>
            </search>
        </field>
    </record>

    <!-- Survey Action -->
    <record id="action_bhu_survey" model="ir.actions.act_window">
        <field name="name">Surveys / ‡§∏‡§∞‡•ç‡§µ‡•á</field>
        <field name="res_model">bhu.survey</field>
        <field name="view_mode">kanban,list,form</field>
        <field name="search_view_id" ref="view_bhu_survey_search"/>
        <field name="context">{'search_default_this_year': 1, 'create_name': '‡§®‡§Ø‡§æ ‡§∏‡§∞‡•ç‡§µ‡•á'}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Create your first Survey!
            </p>
            <p>
                Survey is used for preliminary land acquisition surveys.
                You can add multiple citizens/landowners in one survey.
            </p>
        </field>
    </record>

    <!-- Bulk Approval Server Action -->
    <record id="action_survey_bulk_approval" model="ir.actions.server">
        <field name="name">Bulk Approval / ‡§¨‡§≤‡•ç‡§ï ‡§Ö‡§®‡•Å‡§Æ‡•ã‡§¶‡§®</field>
        <field name="model_id" ref="model_bhu_survey"/>
        <field name="binding_model_id" ref="model_bhu_survey"/>
        <field name="binding_view_types">list</field>
        <field name="state">code</field>
        <field name="code">
action = env['ir.actions.act_window']._for_xml_id('bhuarjan.action_survey_bulk_approval_wizard')
        </field>
    </record>


    <!-- Survey Kanban View -->
    <record id="view_bhu_survey_kanban" model="ir.ui.view">
        <field name="name">bhu.survey.kanban</field>
        <field name="model">bhu.survey</field>
        <field name="arch" type="xml">
        <kanban string="Surveys / ‡§∏‡§∞‡•ç‡§µ‡•á" class="o_kanban_large_column o_kanban_mobile">
                <field name="name"/>
                <field name="project_id"/>
                <field name="village_id"/>
                <field name="state"/>
                <field name="survey_date"/>
                <field name="user_id"/>
                <field name="user_id" widget="image"/>
                <field name="khasra_number"/>

                <templates>
                    <t t-name="card">
                        <div class="p-3">
                                
                                <!-- Compact Header -->
                                <div class="d-flex justify-content-between align-items-start mb-2">
                                    <div class="flex-grow-1">
                                        
                                        <h5 class="mb-1 text-dark font-weight-bold" style="font-size: 1rem; font-weight: 700;">
                                            <field name="name"/>
                                        </h5>
                                        <div class="d-flex align-items-center mb-1">
                                            <i class="fa fa-folder mr-1 text-muted" style="font-size: 0.8rem;" title="Project"></i>
                                            <span class="text-muted small">
                                                <field name="project_id"/>
                                            </span>
                                        </div>
                                        <div class="d-flex align-items-center">
                                            <i class="fa fa-map-marker mr-1 text-muted" style="font-size: 0.8rem;" title="Khasra"></i>
                                            <span class="text-muted small">
                                                Khasra: <field name="khasra_number"/>
                                            </span>
                                        </div>
                                    </div>
                                    
                                    <!-- User Image/Avatar -->
                                    <div class="d-flex flex-column align-items-center">
                                        
                                            <field name="user_id" widget="many2one_avatar_user"/>
                                    </div>
                                    
                                    <!-- Actions Dropdown -->
                                    <div class="dropdown ml-1">
                                        <a class="dropdown-toggle text-muted" data-toggle="dropdown" href="#" title="Actions" style="font-size: 0.9rem;">
                                            <i class="fa fa-ellipsis-v" title="More Actions"></i>
                                        </a>
                                        <div class="dropdown-menu dropdown-menu-right" role="menu" style="border: 1px solid #e5e7eb; border-radius: 6px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                                            <a role="menuitem" type="edit" class="dropdown-item">
                                                <i class="fa fa-pencil-alt mr-2 text-primary" title="Edit"></i> Edit
                                            </a>
                                            <a role="menuitem" class="dropdown-item" onclick="shareOnWhatsApp()">
                                                <i class="fab fa-whatsapp mr-2 text-success" title="Share on WhatsApp"></i> Share on WhatsApp
                                            </a>
                                            <a role="menuitem" type="delete" class="dropdown-item text-danger">
                                                <i class="fa fa-trash mr-2" title="Delete"></i> Delete
                                            </a>
                                        </div>
                                    </div>
                                </div>

                                <!-- Compact Body -->
                                <div class="mb-2">
                                    <div class="d-flex align-items-center mb-1">
                                        <i class="fa fa-home mr-3 text-muted" style="font-size: 0.8rem;" title="Village"></i>
                                        <span class="text-muted small mr-3">Village:</span>
                                        <span class="text-dark small">
                                            <field name="village_id"/>
                                        </span>
                                    </div>
                                    
                                    <div class="d-flex align-items-center mb-1">
                                        <i class="fa fa-calendar mr-3 text-muted" style="font-size: 0.8rem;" title="Date"></i>
                                        <span class="text-muted small mr-3">Date:</span>
                                        <span class="text-dark small">
                                            <field name="survey_date"/>
                                        </span>
                                    </div>
                                </div>

                                <!-- Compact Footer -->
                                <div class="d-flex justify-content-between align-items-center border-top pt-2" style="border-color: #f3f4f6 !important;">
                                    <t t-if="record.state.raw_value == 'draft'">
                                        <button type="edit" class="btn btn-success px-3 py-2 text-uppercase small font-weight-bold" style="background: #28a745; color: #ffffff; border: 1px solid #218838; box-shadow: 0 2px 4px rgba(40, 167, 69, 0.3); cursor: pointer; border-radius: 4px;">
                                            <i class="fa fa-pencil-alt mr-1" style="font-size: 0.8rem;" title="Edit"></i>
                                            Edit / ‡§∏‡§Ç‡§™‡§æ‡§¶‡§®
                                        </button>
                                    </t>
                                    <t t-if="record.state.raw_value != 'draft'">
                                        <span t-attf-class="badge px-3 py-2 text-uppercase small font-weight-bold" 
                                            t-attf-style="#{record.state.raw_value == 'approved' and 'background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: #ffffff; border: 2px solid #047857; box-shadow: 0 2px 4px rgba(16, 185, 129, 0.3);' 
                                            or record.state.raw_value == 'locked' and 'background: #6b7280; color: #ffffff; border: 1px solid #4b5563; box-shadow: 0 2px 4px rgba(107, 114, 128, 0.3);' 
                                            or record.state.raw_value == 'submitted' and 'background: #fef3c7; color: #92400e; border: 1px solid #fde68a;' 
                                            or 'background: #fee2e2; color: #991b1b; border: 1px solid #fca5a5;'">

                                            <i t-if="record.state.raw_value == 'locked'" class="fa fa-lock mr-1" style="font-size: 0.8rem;" title="Locked"></i>
                                            <field name="state"/>
                                        </span>
                                    </t>
                                    <div class="d-flex align-items-center text-muted">
                                        <span class="small">Survey</span>
                                    </div>
                                </div>

                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <!-- WhatsApp Share JavaScript -->
    <template id="whatsapp_share_script" name="WhatsApp Share Script">
        <script type="text/javascript">
            function shareOnWhatsApp() {
                // Get current survey data
                var surveyName = document.querySelector('.oe_kanban_card h5').textContent;
                var projectName = document.querySelector('.oe_kanban_card .fa-folder').nextSibling.textContent.trim();
                var villageName = document.querySelector('.oe_kanban_card .fa-home').parentElement.querySelector('div').textContent.trim();
                var surveyDate = document.querySelector('.oe_kanban_card .fa-calendar').parentElement.querySelector('div').textContent.trim();
                
                // Create survey URL
                var surveyUrl = window.location.origin + '/web#model=bhu.survey&amp;view_type=form';
                
                // Create WhatsApp message
                var message = 'üèóÔ∏è *Survey Update*\n\n' +
                             'üìã *Survey:* ' + surveyName + '\n' +
                             'üè¢ *Project:* ' + projectName + '\n' +
                             'üèòÔ∏è *Village:* ' + villageName + '\n' +
                             'üìÖ *Date:* ' + surveyDate + '\n\n' +
                             'üîó *View Details:* ' + surveyUrl;
                
                // Encode message for URL
                var encodedMessage = encodeURIComponent(message);
                
                // Open WhatsApp
                var whatsappUrl = 'https://wa.me/?text=' + encodedMessage;
                window.open(whatsappUrl, '_blank');
            }
        </script>
    </template>


    <!-- Custom Mail Message View to Hide Related Document Fields -->

</odoo>
