<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Bulk Form 10 Table Report (one PDF with all surveys row-by-row) -->
    <record id="action_report_form10_bulk_table" model="ir.actions.report">
        <field name="name">Form 10 - Bulk Table</field>
        <field name="model">bhu.survey</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">bhuarjan.form10_bulk_table_report</field>
        <field name="report_file">bhuarjan.form10_bulk_table_report</field>
        <field name="paperformat_id" ref="bhuarjan.bhuarjan_form10_paper_format"/>
        <field name="print_report_name">'Form10_Bulk_' + (object and object[0].project_id.name or 'All')</field>
        
    </record>
    
    <!-- Custom Layout header and footer -->
    <template id="report_custom_external_layout">
        <!-- Multicompany -->
        <t t-if="not o and doc">
            <t t-set="o" t-value="doc"/>
        </t>
        <t t-if="o and 'company_id' in o">
            <t t-set="company" t-value="o.company_id"></t>
        </t>
        <t t-if="not o or not 'company_id' in o">
            <t t-set="company" t-value="res_company"></t>
        </t>
        <!-- Custom Header -->
        <div class="header">
            <style>
                .header-info-table { width: 100%; border-collapse: collapse; font-size: 14px; border: 2px solid #000; margin-bottom: 0; }
                .header-info-table td { border: 1px solid #000; padding: 6px; }
            </style>
            <h2 style="text-decoration: underline; margin: 0 0 12px 0; text-align: center; font-size: 20px;"><strong>भू-अर्जन फार्म-10 (प्रारंभिक सर्वे प्रपत्र)</strong></h2>

            <table class="header-info-table table1" >
                <tr>
                    <td style="width: 35%;">
                        <strong>परियोजना का नाम :</strong>
                        <span t-if="first" t-field="first.project_id.name"/>
                    </td>
                    <td style="width: 35%;">
                        <strong>विभाग का नाम</strong>
                        <span t-if="first" t-field="first.department_id.name"/>
                    </td>
                    <td rowspan="3" style="width: 30%; text-align: center; vertical-align: middle;">
                        <t t-if="first">
                            <t t-set="qr_code_img" t-value="first.get_qr_code_data()"/>
                            <t t-if="qr_code_img">
                                <img t-att-src="'data:image/png;base64,' + qr_code_img" 
                                     alt="QR Code" 
                                     style="width: 100px; height: 100px; border: 2px solid #000; display: block; margin: 0 auto;"/>
                            </t>
                            <t t-if="not qr_code_img">
                                <div style="width: 100px; height: 100px; border: 2px solid #000; background: white; padding: 5px; margin: 0 auto; display: flex; align-items: center; justify-content: center;">
                                    <div style="text-align: center; font-size: 8px;">
                                        <div style="font-weight: bold;">QR Code</div>
                                    </div>
                                </div>
                            </t>
                        </t>
                    </td>
                </tr>
                <tr>
                    <td style="width: 35%;">
                        <strong>ग्राम का नाम</strong>
                        <span t-if="first" t-field="first.village_id.name"/>
                    </td>
                    <td style="width: 35%;">
                        <strong>तहसील का नाम</strong>
                        <span t-if="first" t-field="first.tehsil_id.name"/> <strong>जिला-रायगढ़ (छ.ग.)</strong>
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        <strong>सर्वे दिनाँक</strong>
                        <span t-if="first" t-field="first.survey_date" t-options="{'widget': 'date', 'format': 'dd/MM/yyyy'}"/>
                    </td>
                </tr>
            </table>
        </div>
        <!-- Custom Footer -->
        <div class="footer o_standard_footer" style="position: relative;">
            <table style="width:100%; border: 1px solid white;">
                <tr>
                    <td style="width:20%; text-align:center; padding:6px; border: none;">
                        <p style="margin: 4px 0; font-size: 16px; font-weight: 700;">(हस्ताक्षर)</p>
                        <p style="margin: 4px 0; font-size: 16px; font-weight: 700;">अपेक्षक निकाय के</p>
                        <p style="margin: 4px 0; font-size: 16px; font-weight: 700;">अधिकृत प्रतिनिधि</p>
                        <p style="margin: 4px 0; font-size: 16px; font-weight: 700;">नाम -</p>
                        <p style="margin: 4px 0; font-size: 16px; font-weight: 700;">पदनाम</p>
                    </td>
                    <td style="width:20%; text-align:center; padding:6px; border: none;">
                        <p style="margin: 4px 0; font-size: 16px; font-weight: 700;">(हस्ताक्षर)</p>
                        <p style="margin: 4px 0; font-size: 16px; font-weight: 700;">तहसीलदार</p>
                        <p style="margin: 4px 0; font-size: 16px; font-weight: 700;">नाम -</p>
                    </td>
                    <td style="width:20%; text-align:center; padding:6px; border: none;">
                        <p style="margin: 4px 0; font-size: 16px; font-weight: 700;">(हस्ताक्षर)</p>
                        <p style="margin: 4px 0; font-size: 16px; font-weight: 700;">नायब तहसीलदार</p>
                        <p style="margin: 4px 0; font-size: 16px; font-weight: 700;">नाम -</p>
                    </td>
                    <td style="width:20%; text-align:center; padding:6px; border: none;">
                        <p style="margin: 4px 0; font-size: 16px; font-weight: 700;">(हस्ताक्षर)</p>
                        <p style="margin: 4px 0; font-size: 16px; font-weight: 700;">राजस्व निरीक्षक</p>
                        <p style="margin: 4px 0; font-size: 16px; font-weight: 700;">नाम-</p>
                        <p style="margin: 4px 0; font-size: 16px; font-weight: 700;">रा.नि.मं.</p>
                    </td>
                    <td style="width:20%; text-align:center; padding:6px; border: none;">
                        <p style="margin: 4px 0; font-size: 16px; font-weight: 700;">(हस्ताक्षर)</p>
                        <p style="margin: 4px 0; font-size: 16px; font-weight: 700;">पटवारी</p>
                        <p style="margin: 4px 0; font-size: 16px; font-weight: 700;">नाम-</p>
                        <p style="margin: 4px 0; font-size: 16px; font-weight: 700;">हल्का नम्बर</p>
                    </td>
                </tr>
            </table>
        </div>

        <div class="article o_report_layout_standard"
         t-att-data-oe-model="o and o._name"
         t-att-data-oe-id="o and o.id"
         t-att-data-oe-lang="o and o.env.context.get('lang')">
        <t t-raw="0"/>
    </div>
        
    </template>


    <template id="form10_bulk_table_report">
        <t t-call="web.html_container">
        <t t-call="bhuarjan.report_custom_external_layout">
            <t t-set="surveys" t-value="docs"/>
            <t t-set="first" t-value="surveys and surveys[0] or False"/>  
                <div class="page">
                    <style>
                        .bulk-form10-table td, th {
                            border: 1px solid #000; 
                            font-size: 14px;
                            padding:3px
                        }
                        
                    </style>
                    <div class="content-wrapper">
                        <table class="bulk-form10-table" style="margin-top: 0; border: 2px solid #000;">
                            <thead>
                                <tr>
                                    <th rowspan="2" style="text-align:center"><strong>क्र.</strong></th>
                                    <th rowspan="2" style="text-align:center"><strong>प्रभावित खसरा क्रमांक</strong></th>
                                    <th rowspan="2" style="text-align:center"><strong>कुल रकबा (हे.में.)</strong></th>
                                    <th rowspan="2" style="text-align:center"><strong>अर्जन हेतु प्रस्तावित क्षेत्रफल (हेक्टेयर)</strong></th>
                                    <th rowspan="2" style="text-align:center"><strong>भूमिस्वामी का नाम</strong></th>
                                    <th colspan="4" style="text-align:center"><strong>भूमि का प्रकार</strong></th>
                                    <th colspan="3" style="text-align:center"><strong>भूमि पर स्थित वृक्ष की संख्या (प्रजातिवार)</strong></th>
                                    <th colspan="6" style="text-align:center"><strong>भूमि पर स्थित परिसंपत्तियों का विवरण</strong></th>
                                </tr>
                                <tr>
                                    <th style="text-align:center"><strong>एक फसली</strong></th>
                                    <th style="text-align:center"><strong>दो फसली</strong></th>
                                    <th style="text-align:center"><strong>सिंचित</strong></th>
                                    <th style="text-align:center"><strong>असिंचित</strong></th>
                                    <th style="text-align:center"><strong>अविकसित</strong></th>
                                    <th style="text-align:center"><strong>अर्द्ध विकसित</strong></th>
                                    <th style="text-align:center"><strong>पूर्ण विकसित</strong></th>
                                    <th style="text-align:center"><strong>मकान (कच्चा/पक्का) क्षेत्रफल वर्गफुट में</strong></th>
                                    <th style="text-align:center"><strong>शेड (क्षेत्रफल वर्गफुट में)</strong></th>
                                    <th style="text-align:center"><strong>कुँआ (कच्चा/पक्का) (हाँ/नहीं)</strong></th>
                                    <th style="text-align:center"><strong>ट्यूबवेल / सम्बमर्शिबल पम्प फिटिंग सहित (हाँ/नहीं)</strong></th>
                                    <th style="text-align:center"><strong>तालाब (हाँ/नहीं)</strong></th>
                                    <th style="text-align:center"><strong>रिमार्क</strong></th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-foreach="surveys" t-as="s">
                                    <tr>
                                        <td style="text-align:center"><t t-esc="s_index + 1"/></td>
                                                <td style="text-align:center">
                                                    <t t-if="s.khasra_number">
                                                        <t t-esc="s.khasra_number"/>
                                                    </t>
                                                    <span t-if="not s.khasra_number" style="color:#dc3545;font-weight:bold">नहीं</span>
                                                </td>
                                                <td style="text-align:center">
                                                    <t t-if="s.total_area is not None">
                                                        <t t-esc="s.total_area"/>
                                                    </t>
                                                    <span t-if="s.total_area is None" style="color:#dc3545;font-weight:bold">नहीं</span>
                                                </td>
                                                <td style="text-align:center">
                                                    <t t-if="s.acquired_area is not None">
                                                        <t t-esc="s.acquired_area"/>
                                                    </t>
                                                    <span t-if="s.acquired_area is None" style="color:#dc3545;font-weight:bold">नहीं</span>
                                                </td>
                                                <td>
                                                    <t t-if="s.landowner_ids and len(s.landowner_ids) &gt; 0">
                                                        <t t-set="counter" t-value="1"/>
                                                        <t t-foreach="s.landowner_ids" t-as="lo">
                                                            <div>
                                                                <t t-esc="counter"/>. <t t-esc="lo.name"/>
                                                                <t t-if="lo.gender == 'female' and lo.spouse_name">
                                                                    &#160;पत्नी&#160;<t t-esc="lo.spouse_name"/>
                                                                </t>
                                                                <t t-elif="lo.father_name">
                                                                    &#160;पिता&#160;<t t-esc="lo.father_name"/>
                                                                </t>
                                                            </div>
                                                            <t t-set="counter" t-value="counter + 1"/>
                                                        </t>
                                                    </t>
                                                    <span t-if="not (s.landowner_ids and len(s.landowner_ids) &gt; 0)" style="color:#dc3545;font-weight:bold">नहीं</span>
                                                </td>
                                                <td style="text-align:center"><span t-if="s.is_single_crop" style="color:#28a745;font-weight:bold">हाँ</span><span t-if="not s.is_single_crop" style="color:#dc3545;font-weight:bold">नहीं</span></td>
                                                <td style="text-align:center"><span t-if="s.is_double_crop" style="color:#28a745;font-weight:bold">हाँ</span><span t-if="not s.is_double_crop" style="color:#dc3545;font-weight:bold">नहीं</span></td>
                                                <td style="text-align:center"><span t-if="s.is_irrigated" style="color:#28a745;font-weight:bold">हाँ</span><span t-if="not s.is_irrigated" style="color:#dc3545;font-weight:bold">नहीं</span></td>
                                                <td style="text-align:center"><span t-if="s.is_unirrigated" style="color:#28a745;font-weight:bold">हाँ</span><span t-if="not s.is_unirrigated" style="color:#dc3545;font-weight:bold">नहीं</span></td>
                                                <td style="text-align:center"><span t-if="s.tree_development_stage == 'undeveloped'"><span t-esc="s.tree_count"/></span><span t-if="s.tree_development_stage != 'undeveloped'" style="color:#dc3545;font-weight:bold">नहीं</span></td>
                                                <td style="text-align:center"><span t-if="s.tree_development_stage == 'semi_developed'"><span t-esc="s.tree_count"/></span><span t-if="s.tree_development_stage != 'semi_developed'" style="color:#dc3545;font-weight:bold">नहीं</span></td>
                                                <td style="text-align:center"><span t-if="s.tree_development_stage == 'fully_developed'"><span t-esc="s.tree_count"/></span><span t-if="s.tree_development_stage != 'fully_developed'" style="color:#dc3545;font-weight:bold">नहीं</span></td>
                                                <td style="text-align:center">
                                                    <span t-if="s.house_type">
                                                        <span t-esc="s.house_type"/> / <span t-esc="s.house_area"/>
                                                    </span>
                                                    <span t-if="not s.house_type" style="color:#dc3545;font-weight:bold">नहीं</span>
                                                </td>
                                                <td style="text-align:center"><span t-if="s.shed_area"><span t-esc="s.shed_area"/></span><span t-if="not s.shed_area" style="color:#dc3545;font-weight:bold">नहीं</span></td>
                                                <td style="text-align:center">
                                                    <span t-if="s.has_well == 'yes' and s.well_type == 'kachcha'" style="color:#28a745;font-weight:bold">हाँ-कच्चा</span>
                                                    <span t-if="s.has_well == 'yes' and s.well_type == 'pakka'" style="color:#28a745;font-weight:bold">हाँ-पक्का</span>
                                                    <span t-if="s.has_well != 'yes'" style="color:#dc3545;font-weight:bold">नहीं</span>
                                                </td>
                                                <td style="text-align:center"><span t-if="s.has_tubewell" style="color:#28a745;font-weight:bold">हाँ</span><span t-if="not s.has_tubewell" style="color:#dc3545;font-weight:bold">नहीं</span></td>
                                                <td style="text-align:center"><span t-if="s.has_pond" style="color:#28a745;font-weight:bold">हाँ</span><span t-if="not s.has_pond" style="color:#dc3545;font-weight:bold">नहीं</span></td>
                                                <td>
                                                    <t t-if="s.remarks">
                                                        <t t-esc="s.remarks"/>
                                                    </t>
                                                    <span t-if="not s.remarks" style="color:#dc3545;font-weight:bold">नहीं</span>
                                                </td>
                                            </tr>
                                </t>
                            </tbody>
                            <tfoot>
                                <tr>
                                    <td colspan="18" style="border: 2px solid #000; padding: 8px; text-align: left; font-size: 16px; font-weight: 700;">
                                        <strong>संलग्न :- प्रभावित भूमियों का बी-1, खसरा एवं नक्शा</strong>
                                    </td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>
            </t>
        </t>
    </template>
</odoo>


