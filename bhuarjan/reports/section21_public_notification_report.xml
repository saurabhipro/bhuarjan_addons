<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <!-- Section 21 Public Notification Report -->
    <record id="action_report_section21_public_notification" model="ir.actions.report">
        <field name="name">Section 21 Public Notice / धारा 21 लोक सूचना</field>
        <field name="model">bhu.section21.notification</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">bhuarjan.section21_public_notification_report</field>
        <field name="report_file">bhuarjan.section21_public_notification_report</field>
        <field name="paperformat_id" ref="bhuarjan.bhuarjan_sia_paper_format"/>
        <field name="print_report_name">'Section21_Public_Notice_' + ((object and object.name) or (docs and docs[0] and docs[0].name) or 'All')</field>
    </record>

    <!-- Section 21 Public Notification Report Template -->
    <template id="section21_public_notification_report">
        <t t-call="web.html_container">
            <meta charset="utf-8"/>
            <t t-set="notification" t-value="object or (docs and docs[0]) or None"/>
            <t t-if="notification">
                <!-- Ensure land_parcel_ids and project_id are loaded - reload notification to get related records -->
                <t t-set="notification" t-value="request.env['bhu.section21.notification'].sudo().browse(notification.id) if notification and notification.id else None"/>
                <t t-set="land_parcels" t-value="notification and notification.land_parcel_ids or []"/>
                <!-- Ensure project_id is accessible -->
                <t t-if="notification and notification.project_id">
                    <t t-set="project" t-value="notification.project_id"/>
                </t>
                <t t-call="web.basic_layout">
                <!-- Include centralized CSS styles -->
                <t t-call="bhuarjan.report_common_styles"/>
                <!-- Report-specific overrides for Section 21 Public -->
                <style>
                    .schedule-table {
                        margin: 8px 0 !important;
                    }
                </style>

                <div class="container letter_space" style="border: 2px dotted #000; padding: 15px; margin: 10px; position: relative; min-height: calc(100vh - 20px); height: 100%;">
                    <!-- Watermark with Logo - Centered on Page -->
                    <t t-set="base_url" t-value="request.env['ir.config_parameter'].sudo().get_param('web.base.url') or ''"/>
                    <div class="watermark">
                        <div class="watermark-circle"></div>
                        <t t-if="base_url">
                            <img t-att-src="base_url + '/bhuarjan/static/description/logo.png'" alt="Logo Watermark" style="max-width: 100%; height: auto;"/>
                        </t>
                    </div>
                    <!-- Header: Collector's Court -->
                    <div style="text-align: center; margin-bottom: 8px;">
                        <h2 style="margin: 0; padding: 0; font-size: 22px; font-weight: bold;">
                            <strong>न्यायालय कलेक्टर, जिला-<span t-if="notification and notification.district_id" t-esc="notification.district_id.name"/><span t-if="not notification or not notification.district_id">रायगढ़</span> (छ.ग.)</strong>
                        </h2>
                    </div>

                    <!-- Public Notice Header with Date -->
                    <div style="display: flex; justify-content: flex-end; margin-bottom: 8px; font-size: 18px !important;">
                        <div>
                            <strong>रायगढ़ दिनाँक</strong>
                            <span t-if="notification and notification.notice_date" t-esc="notification.notice_date.strftime('%d/%m/%Y')"/>
                            <span t-if="not notification or not notification.notice_date" style="text-decoration: underline;">........................</span>
                        </div>
                    </div>

                    <!-- Main Body Text - Paragraph 1 -->
                    <div style="font-size: 18px !important; line-height: 1.5 !important; text-align: justify; margin-bottom: 8px;">
                        <p style="margin: 0; padding: 0; font-size: 18px !important; line-height: 1.5 !important;">
                            भूमि अर्जन, पुनर्वासन और पुनर्व्यवस्थापन में उचित प्रतिकर और पारदर्शिता का अधिकार अधिनियम, 2013 के धारा-21 (1) के तहत अपेक्षक निकाय :-
                            <span t-if="notification and notification.requisitioning_body" t-esc="notification.requisitioning_body"/>
                            <span t-if="not notification or not notification.requisitioning_body" style="text-decoration: underline;">........................</span>
                            (छ.ग.) के
                            <span t-if="notification and notification.project_id and notification.project_id.name" t-esc="notification.project_id.name"/>
                            <span t-if="not notification or not notification.project_id or not notification.project_id.name" style="text-decoration: underline;">........................</span>
                            प्रयोजन हेतु।
                        </p>
                    </div>

                    <!-- Main Body Text - Paragraph 2 -->
                    <div style="font-size: 18px !important; line-height: 1.5 !important; text-align: justify; margin-bottom: 8px;">
                        <p style="margin: 0; padding: 0; font-size: 18px !important; line-height: 1.5 !important;">
                            राज्य शासन को नीचे दी गयी अनुसूची में दर्शित भूमि की सार्वजनिक प्रयोजन (
                            <span t-if="notification and notification.public_purpose" t-esc="notification.public_purpose"/>
                            <span t-if="not notification or not notification.public_purpose" style="text-decoration: underline;">........................</span>
                            ) हेतु आवश्यकता है एवं राज्य शासन का आशय उवत भूमि का कब्जा लिये जाने का है। अतः भूमि अर्जन, पुनर्वासन और पुनर्व्यवस्थापन में उचित प्रतिकर और पारदर्शिता का अधिकार अधिनियम, 2013 की धारा-21 (1) के तहत सभी हितबद्ध व्यवित्तयों को सूचित किया जाता है कि भूमि में सभी हितों के लिये प्रतिकरों, पुनर्वास तथा प्रतिस्थापन के दावे, ऐसे हितों के लिये प्रतिकर के रकम संबंधित दावे, धारा 20 के अधीन किये गये मापमानों के दावे एवं आक्षेप आपत्ति/कथन यदि कोई हों, तो स्वंय अथवा अपने अधिकृत प्रतिनिधि या अधिववत्ता के माध्यम से कार्यालय कलेक्टर, जिला रायगढ़ के भू-अर्जन शाखा में उपस्थित होकर प्रस्तुत कर सकते हैं।
                        </p>
                    </div>

                    <!-- Schedule Separator -->
                    <div style="text-align: center; margin: 10px 0; font-size: 18px !important; font-weight: bold;">
                        <strong>// अनूसूची //</strong>
                    </div>

                    <!-- Land Details Section -->
                    <div style="margin: 10px 0;">
                        <div style="text-align: left; font-size: 18px; font-weight: bold; margin-bottom: 6px;">
                            <strong>1) भूमि का विवरण :-</strong>
                        </div>
                        <div style="margin-bottom: 8px; font-size: 18px !important;">
                            <div style="margin-bottom: 3px;">
                                <strong>(क) जिला :-</strong>
                                <span t-if="notification and notification.district_id" t-esc="notification.district_id.name"/>
                                <span t-if="not notification or not notification.district_id">रायगढ़</span>
                            </div>
                            <div style="margin-bottom: 3px;">
                                <strong>(ख) तहसील :-</strong>
                                <span t-if="notification and notification.tehsil_id" t-esc="notification.tehsil_id.name"/>
                                <span t-if="not notification or not notification.tehsil_id" style="text-decoration: underline;">........................</span>
                            </div>
                            <div style="margin-bottom: 3px;">
                                <strong>(ग) ग्राम :-</strong>
                                <span t-if="notification and notification.village_id" t-esc="notification.village_id.name"/>
                                <span t-if="not notification or not notification.village_id" style="text-decoration: underline;">........................</span>
                            </div>
                        </div>

                        <!-- Land Parcels Table -->
                        <table class="schedule-table">
                            <thead>
                                <tr>
                                    <th style="width: 33.33%;">खसरा क्रमांक</th>
                                    <th style="width: 33.33%;">अर्जित रकबा</th>
                                    <th style="width: 33.33%;">रिमार्क</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-if="land_parcels and len(land_parcels) > 0">
                                    <t t-foreach="land_parcels" t-as="parcel">
                                        <tr>
                                            <td style="font-size: 18px !important; text-align: center;">
                                                <t t-if="parcel.khasra_number" t-esc="parcel.khasra_number"/>
                                                <t t-if="not parcel.khasra_number">........................</t>
                                            </td>
                                            <td style="font-size: 18px !important; text-align: center;">
                                                <t t-if="parcel.area_hectares and parcel.area_hectares > 0" t-esc="'{:.4f}'.format(parcel.area_hectares)"/>
                                                <t t-if="not parcel.area_hectares or parcel.area_hectares == 0">........................</t>
                                            </td>
                                            <td style="font-size: 18px !important; text-align: center;">
                                                <t t-if="parcel.remark" t-esc="parcel.remark"/>
                                                <t t-if="not parcel.remark">--</t>
                                            </td>
                                        </tr>
                                    </t>
                                </t>
                                <t t-if="not land_parcels or len(land_parcels) == 0">
                                    <tr>
                                        <td style="text-align: center; padding: 8px; font-size: 18px !important;">........................</td>
                                        <td style="text-align: center; padding: 8px; font-size: 18px !important;">........................</td>
                                        <td style="text-align: center; padding: 8px; font-size: 18px !important;">--</td>
                                    </tr>
                                </t>
                            </tbody>
                        </table>
                    </div>

                    <!-- Collector Signature -->
                    <div style="text-align: right; margin-top: 15px; margin-right: 0;">
                        <div style="margin: 5px 0; font-size: 18px !important;">
                            <span t-if="notification and notification.collector_name" t-esc="notification.collector_name"/>
                            <span t-if="not notification or not notification.collector_name">कलेक्टर</span>
                        </div>
                        <div style="margin: 3px 0; font-size: 18px !important;">
                            जिला-<span t-if="notification and notification.district_id" t-esc="notification.district_id.name"/><span t-if="not notification or not notification.district_id">रायगढ़</span>
                        </div>
                    </div>


                    <!-- Additional Collector Signature -->
                    <div style="text-align: right; margin-top: 15px; margin-right: 0;">
                        <div style="margin: 5px 0; font-size: 18px !important;">
                            <span t-if="notification and notification.additional_collector_name" t-esc="notification.additional_collector_name"/>
                            <span t-if="not notification or not notification.additional_collector_name">अपर कलेक्टर</span>
                        </div>
                        <div style="margin: 3px 0; font-size: 18px !important;">
                            जिला-<span t-if="notification and notification.district_id" t-esc="notification.district_id.name"/><span t-if="not notification or not notification.district_id">रायगढ़</span>
                        </div>
                    </div>
                </div>
                </t>
            </t>
        </t>
    </template>
</odoo>
