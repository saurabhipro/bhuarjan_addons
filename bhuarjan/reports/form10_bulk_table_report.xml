<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Bulk Form 10 Table Report (one PDF with all surveys row-by-row) -->
    <record id="action_report_form10_bulk_table" model="ir.actions.report">
        <field name="name">Form 10 - Bulk Table</field>
        <field name="model">bhu.survey</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">bhuarjan.form10_bulk_table_report</field>
        <field name="report_file">bhuarjan.form10_bulk_table_report</field>
        <field name="print_report_name">'Form10_Bulk_' + (object and object[0].project_id.name or 'All')</field>
        <field name="binding_model_id" ref="model_bhu_survey"/>
    </record>

    <template id="form10_bulk_table_report">
        <t t-call="web.html_container">
            <t t-call="web.external_layout">
            <t t-set="surveys" t-value="docs"/>
            <t t-set="first" t-value="surveys and surveys[0] or False"/>

            <style>
                .bulk-form10-table { width: 100%; border-collapse: collapse; font-size: 14px; }
                .bulk-form10-table th, .bulk-form10-table td { border: 1px solid #444; padding: 8px; }
                .bulk-form10-table th { background: #f2f4f7; text-align: left; font-weight: 700; }
                .page-break { page-break-after: always; }
                .signature-blocks { display: flex; justify-content: space-between; gap: 0; margin-top: 40px; }
                .signature { width: 23%; text-align: center; padding-top: 0; }
                .signature p { margin: 2px 0; font-size: 16px; font-weight: 700; }
                /* Insert a page break after every 10 rows */
                tr.row-break { page-break-after: always; }
                body, .bulk-form10-table, .bulk-form10-table th, .bulk-form10-table td, h2, h3, p, div, span {
                    font-family: 'Noto Sans Devanagari', 'Mangal', 'Arial Unicode MS', 'DejaVu Sans', sans-serif;
                    unicode-bidi: embed;
                    direction: ltr;
                }
            </style>

            <div class="page">
                <h2 style="text-decoration: underline; margin: 0 0 12px 0; text-align: center; font-size: 20px;"><strong>भू-अर्जन फार्म-10 (प्रारंभिक सर्वे प्रपत्र)</strong></h2>

                <!-- Header info (project / department / village / tehsil / date) -->
                <table style="width: 100%; border-collapse: collapse; margin-bottom: 10px; font-size: 14px;">
                    <tr>
                        <td style="width: 50%; padding: 6px; border: 1px solid #000;">
                            <strong>परियोजना का नाम :</strong>
                            <span t-if="first" t-field="first.project_id.name"/>
                        </td>
                        <td style="width: 50%; padding: 6px; border: 1px solid #000;">
                            <strong>विभाग का नाम</strong>
                            <span t-if="first" t-field="first.department_id.name"/>
                        </td>
                    </tr>
                    <tr>
                        <td style="width: 50%; padding: 6px; border: 1px solid #000;">
                            <strong>ग्राम का नाम</strong>
                            <span t-if="first" t-field="first.village_id.name"/>
                        </td>
                        <td style="width: 50%; padding: 6px; border: 1px solid #000;">
                            <strong>तहसील का नाम</strong>
                            <span t-if="first" t-field="first.tehsil_id.name"/> <strong>जिला-रायगढ़ (छ.ग.)</strong>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2" style="padding: 6px; border: 1px solid #000;">
                            <strong>सर्वे दिनाँक</strong>
                            <span t-if="first" t-field="first.survey_date" t-options="{'widget': 'date', 'format': 'dd/MM/yyyy'}"/>
                        </td>
                    </tr>
                </table>
                <table class="bulk-form10-table">
                    <thead>
                        <tr>
                            <th rowspan="2" style="text-align:center">क्र.</th>
                            <th rowspan="2" style="text-align:center">प्रभावित खसरा क्रमांक</th>
                            <th rowspan="2" style="text-align:center">कुल रकबा (हे.में.)</th>
                            <th rowspan="2" style="text-align:center">कुल अर्जित रकबा (हे.में.)</th>
                            <th rowspan="2" style="text-align:center">भूमिस्वामी का नाम</th>
                            <th colspan="4" style="text-align:center">भूमि का प्रकार</th>
                            <th colspan="3" style="text-align:center">भूमि पर स्थित वृक्ष की संख्या (प्रजातिवार)</th>
                            <th colspan="6" style="text-align:center">भूमि पर स्थित परिसंपत्तियों का विवरण</th>
                        </tr>
                        <tr>
                            <th style="text-align:center">एक फसली</th>
                            <th style="text-align:center">दो फसली</th>
                            <th style="text-align:center">सिंचित</th>
                            <th style="text-align:center">असिंचित</th>
                            <th style="text-align:center">अविकसित</th>
                            <th style="text-align:center">अर्द्ध विकसित</th>
                            <th style="text-align:center">पूर्ण विकसित</th>
                            <th style="text-align:center">मकान (कच्चा/पक्का) क्षेत्रफल वर्गफुट में</th>
                            <th style="text-align:center">शेड (क्षेत्रफल वर्गफुट में)</th>
                            <th style="text-align:center">कुँआ (कच्चा/पक्का) (हाँ/नहीं)</th>
                            <th style="text-align:center">ट्यूबवेल / सम्बमर्शिबल पम्प फिटिंग सहित (हाँ/नहीं)</th>
                            <th style="text-align:center">तालाब (हाँ/नहीं)</th>
                            <th style="text-align:center">रिमार्क</th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-foreach="surveys" t-as="s">
                            <tr t-att-class="(((s_index + 1) % 10) == 0) and 'row-break' or ''">
                                <td style="text-align:center"><t t-esc="s_index + 1"/></td>
                                <td style="text-align:center"><t t-esc="s.khasra_number"/></td>
                                <td style="text-align:center"><t t-esc="s.total_area"/></td>
                                <td style="text-align:center"><t t-esc="s.acquired_area"/></td>
                                <td>
                                    <t t-set="lo" t-value="s.landowner_ids and s.landowner_ids[0] or False"/>
                                    <t t-if="lo">
                                        <span t-esc="lo.name"/>
                                    </t>
                                </td>
                                <td style="text-align:center"><span t-if="s.is_single_crop" style="color:#28a745;font-weight:bold">हाँ</span><span t-if="not s.is_single_crop" style="color:#dc3545;font-weight:bold">नहीं</span></td>
                                <td style="text-align:center"><span t-if="s.is_double_crop" style="color:#28a745;font-weight:bold">हाँ</span><span t-if="not s.is_double_crop" style="color:#dc3545;font-weight:bold">नहीं</span></td>
                                <td style="text-align:center"><span t-if="s.is_irrigated" style="color:#28a745;font-weight:bold">हाँ</span><span t-if="not s.is_irrigated" style="color:#dc3545;font-weight:bold">नहीं</span></td>
                                <td style="text-align:center"><span t-if="s.is_unirrigated" style="color:#28a745;font-weight:bold">हाँ</span><span t-if="not s.is_unirrigated" style="color:#dc3545;font-weight:bold">नहीं</span></td>
                                <td style="text-align:center"><span t-if="s.tree_development_stage == 'undeveloped'"><span t-esc="s.tree_count"/></span><span t-if="s.tree_development_stage != 'undeveloped'" style="color:#dc3545;font-weight:bold">नहीं</span></td>
                                <td style="text-align:center"><span t-if="s.tree_development_stage == 'semi_developed'"><span t-esc="s.tree_count"/></span><span t-if="s.tree_development_stage != 'semi_developed'" style="color:#dc3545;font-weight:bold">नहीं</span></td>
                                <td style="text-align:center"><span t-if="s.tree_development_stage == 'fully_developed'"><span t-esc="s.tree_count"/></span><span t-if="s.tree_development_stage != 'fully_developed'" style="color:#dc3545;font-weight:bold">नहीं</span></td>
                                <td style="text-align:center">
                                    <span t-if="s.house_type">
                                        <span t-esc="s.house_type"/> / <span t-esc="s.house_area"/>
                                    </span>
                                    <span t-if="not s.house_type" style="color:#dc3545;font-weight:bold">नहीं</span>
                                </td>
                                <td style="text-align:center"><span t-if="s.shed_area"><span t-esc="s.shed_area"/></span><span t-if="not s.shed_area" style="color:#dc3545;font-weight:bold">नहीं</span></td>
                                <td style="text-align:center">
                                    <span t-if="s.has_well == 'yes' and s.well_type == 'kachcha'" style="color:#28a745;font-weight:bold">हाँ-कच्चा</span>
                                    <span t-if="s.has_well == 'yes' and s.well_type == 'pakka'" style="color:#28a745;font-weight:bold">हाँ-पक्का</span>
                                    <span t-if="s.has_well == 'no'" style="color:#dc3545;font-weight:bold">नहीं</span>
                                </td>
                                <td style="text-align:center"><span t-if="s.has_tubewell" style="color:#28a745;font-weight:bold">हाँ</span><span t-if="not s.has_tubewell" style="color:#dc3545;font-weight:bold">नहीं</span></td>
                                <td style="text-align:center"><span t-if="s.has_pond" style="color:#28a745;font-weight:bold">हाँ</span><span t-if="not s.has_pond" style="color:#dc3545;font-weight:bold">नहीं</span></td>
                                <td></td>
                            </tr>
                        </t>
                    </tbody>
                </table>

                <!-- Signatures after all rows -->
                <div class="signature-blocks">
                    <div class="signature">(हस्ताक्षर)<br/>अपेक्षक निकाय के<br/>अधिकृत प्रतिनिधि<br/>नाम -<br/>पदनाम</div>
                    <div class="signature">(हस्ताक्षर)<br/>तहसीलदार<br/>नाम -</div>
                    <div class="signature">(हस्ताक्षर)<br/>नायब तहसीलदार<br/>नाम -</div>
                    <div class="signature">(हस्ताक्षर)<br/>राजस्व निरीक्षक<br/>नाम-<br/>रा.नि.मं.</div>
                </div>
            </div>
            </t>
        </t>
    </template>
</odoo>


