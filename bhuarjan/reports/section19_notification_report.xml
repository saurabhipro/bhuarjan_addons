<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <!-- Section 19 Notification Report -->
    <record id="action_report_section19_notification" model="ir.actions.report">
        <field name="name">Section 19 Notification / धारा 19 अधिसूचना</field>
        <field name="model">bhu.section19.notification</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">bhuarjan.section19_notification_report</field>
        <field name="report_file">bhuarjan.section19_notification_report</field>
        <field name="paperformat_id" ref="bhuarjan.bhuarjan_sia_paper_format"/>
        <field name="print_report_name">'Section19_Notification_' + ((object and object.name) or (docs and docs[0] and docs[0].name) or 'All')</field>
    </record>

    <!-- Custom Layout header for Section 19 -->
    <!-- Updated: Fixed village_id reference (singular, not plural) -->
    <template id="section19_report_custom_layout">
        <div class="header-section" style="margin-bottom: 12px;">
            <style>
                .header-info-table { 
                    width: 100%; 
                    border-collapse: collapse; 
                    font-size: 14px; 
                    border: 2px solid #000; 
                    margin-bottom: 0; 
                }
                .header-info-table td { 
                    border: 1px solid #000; 
                    padding: 6px; 
                    vertical-align: middle;
                }
                /* Global Font Settings */
                body, .header-section, .header-info-table, h2, strong, span, td, th {
                    font-family: 'Noto Sans Devanagari', 'Mangal', 'Arial Unicode MS', 'DejaVu Sans', sans-serif !important;
                }
            </style>
            <h2 style="text-align: right; margin: 0 0 12px 0; font-size: 16px; font-weight: bold;">
                <strong>प्रारूप अधिसूचना</strong>
            </h2>
            <h2 style="text-align: center; margin: 0 0 12px 0; font-size: 18px; font-weight: bold;">
                <strong>कार्यालय कलेक्टर, जिला ........................... एवं पदेन उप सचिव,</strong>
            </h2>
            <h2 style="text-align: center; margin: 0 0 12px 0; font-size: 18px; font-weight: bold;">
                <strong>छत्तीसगढ़ शासन, राजस्व एवं आपदा प्रबंधन विभाग</strong>
            </h2>
            <h2 style="text-align: center; margin: 0 0 12px 0; font-size: 22px; font-weight: bold; text-decoration: underline;">
                <strong>अधिसूचना</strong>
            </h2>

            <table class="header-info-table">
                <tr>
                    <td rowspan="3" style="width: 10%; padding: 0; text-align: center; vertical-align: middle;">
                        
                            <t t-set="base_url" t-value="request.env['ir.config_parameter'].sudo().get_param('web.base.url')"/>
                            <img t-att-src="base_url + '/bhuarjan/static/description/logo.png'"
                                height="65"
                                width="80"/>
                    </td>
                    <td style="width: 40%; font-size: 14px;">
                        <strong>परियोजना का नाम :</strong>
                        <span t-if="notification and notification.project_id" t-esc="notification.project_id.name"/>
                        <span t-if="not notification or not notification.project_id">........................</span>
                    </td>
                    <td style="width: 40%; font-size: 14px;">
                        <strong>विभाग का नाम :</strong>
                        <t t-set="department_name" t-value="''"/>
                        <t t-if="notification and notification.project_id and notification.village_id">
                            <t t-set="first_survey" t-value="notification.env['bhu.survey'].search([('project_id', '=', notification.project_id.id), ('village_id', '=', notification.village_id.id)], limit=1)"/>
                            <t t-if="first_survey and first_survey.department_id">
                                <t t-set="department_name" t-value="first_survey.department_id.name"/>
                            </t>
                        </t>
                        <span t-esc="department_name if department_name else 'Public Works Department'"/>
                    </td>
                    <td rowspan="3" style="width: 10%; padding: 0; text-align: center; vertical-align: middle;">
                        <!-- QR Code - Right Header Box -->
                        <t t-if="notification">
                            <t t-set="qr_code_img" t-value="notification.get_qr_code_data()"/>
                            <t t-set="qr_download_url" t-value="'https://bhuarjan.com/bhuarjan/section19/' + str(notification.notification_uuid or '') + '/download'"/>
                            <t t-if="qr_code_img">
                                <a t-att-href="qr_download_url" style="display: block; width: 100%; margin: 0; padding: 0; text-decoration: none;">
                                    <img t-att-src="'data:image/png;base64,' + qr_code_img" 
                                         alt="QR Code - Click to download PDF" 
                                         style="width: 100%; max-width: 100%; height: auto; aspect-ratio: 1; border: none; display: block; margin: 0; padding: 0;"/>
                                </a>
                            </t>
                            <t t-if="not qr_code_img">
                                <a t-att-href="qr_download_url" style="display: block; width: 100%; margin: 0; padding: 0; text-decoration: none;">
                                    <div style="width: 100%; padding-top: 100%; position: relative; border: none; background: white; margin: 0;">
                                        <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center;">
                                            <div style="text-align: center; font-size: 7px;">
                                                <div style="font-weight: bold;">QR Code</div>
                                            </div>
                                        </div>
                                    </div>
                                </a>
                            </t>
                        </t>
                        <t t-if="not notification">
                            <div style="width: 100%; padding-top: 100%; position: relative; border: none; background: white; margin: 0;">
                                <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center;">
                                    <div style="text-align: center; font-size: 7px;">
                                        <div style="font-weight: bold;">QR Code</div>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </td>
                </tr>
                <tr>
                    <td style="width: 40%; font-size: 14px;">
                        <strong>ग्राम/नगर का नाम :</strong>
                        <span t-if="notification and notification.village_id">
                            <t t-esc="notification.village_id.name"/>
                        </span>
                        <span t-if="not notification or not notification.village_id">........................</span>
                    </td>
                    <td style="width: 40%; font-size: 14px;">
                        <strong>तहसील का नाम :</strong>
                        <span t-if="notification and notification.tehsil_id" t-esc="notification.tehsil_id.name"/>
                        <span t-if="not notification or not notification.tehsil_id">........................</span>
                    </td>
                </tr>
                <tr>
                    <td style="width: 40%; font-size: 14px;">
                        <strong>जिला :</strong>
                        <span t-if="notification and notification.district_id" t-esc="notification.district_id.name"/>
                        <span t-if="not notification or not notification.district_id">........................</span>
                    </td>
                    <td style="width: 40%; font-size: 14px;">
                        <strong>सर्वे दिनाँक :</strong>
                        <t t-set="survey_date" t-value="''"/>
                        <t t-if="notification and notification.project_id and notification.village_id">
                            <t t-set="first_survey" t-value="notification.env['bhu.survey'].search([('project_id', '=', notification.project_id.id), ('village_id', '=', notification.village_id.id)], limit=1, order='survey_date desc')"/>
                            <t t-if="first_survey and first_survey.survey_date">
                                <t t-set="survey_date" t-value="first_survey.survey_date.strftime('%d/%m/%Y')"/>
                            </t>
                        </t>
                        <span t-esc="survey_date if survey_date else '........................'"/>
                    </td>
                </tr>
            </table>
        </div>
    </template>

    <!-- Section 19 Notification Report Template -->
    <template id="section19_notification_report">
        <t t-call="web.html_container">
            <meta charset="utf-8"/>
            <t t-set="notification" t-value="object or (docs and docs[0]) or None"/>
            <!-- <t t-call="bhuarjan.section19_report_custom_layout"/> -->
            <t t-call="web.basic_layout">
            <style>
                .letter_space{
                    letter-spacing: 1px;
                }
                .fsc{
                    font-size: 18px;
                }
            </style>

            
            <div class="container letter_space">
                <div class="text-center mx-auto">
                    <h3 class="hindi letter_space">
                        प्रारूप अधिसूचना<br/>
                        कार्यालय कलेक्टर, जिला रायगढ़ एवं उप सचिव,<br/>
                        छत्तीसगढ़ शासन, राजस्व एवं आपदा प्रबंधन विभाग
                    </h3>
                </div>
                <div class="h3 text-center letter_space"><u>//अधिसूचना//</u></div>
                <div class="letter_space fsc">
                    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;भू-अर्जन प्रकरण क्रमांक -------------------@व-82@वर्ष ----------------- चूँकि राज्य शासन को यह
                    समाधान हो गया है कि नीचे दी गई अनुसूची में वर्णित भूमि की -------------------------- सार्वजनिक प्रयोजन के लिये
                    आवश्यकता है। अतः भूमि अर्जन, पुनर्वासन एवं पुनर्व्यवस्थापन में उचित प्रतिकर और पारदर्शिता अधिकार अधिनियम, 2013
                    (जिसे एतद् पश्चात् अधिनियम, 2013 कहा जायेगा) की धारा 19 के तहत यह घोषित किया जाता है कि इस भूमि का उक्त प्रयोजन के लिये
                    आवश्यकता है :-
                </div>
                <div class="h3 text-center letter_space"><u>अनुसूची</u></div>
                <div class="h3 text-left fsc"><u><b>भूमि का विवरण :-</b></u></div>
                <div><ol>

                    <li>- जिला</li>
                    <li>- तहसील</li>
                    <li>- ग्राम/नगर</li>
                    <li>- भूमि का क्षेत्रफल</li>

                </ol></div>
                <br/>
                <div class="w-100">
                    <table class="w-100 text-center fsc">
                        <thead>
                            <tr>
                                <td>खसरा नम्बर</td>
                                <td>अर्जित रकबा (हेक्टेयर में)</td>
                            </tr>
                        </thead>
                        <tbody>
                            <td>23</td>
                            <td>23</td>
                        </tbody>
                    </table>
                </div>
                <div class="fsc">
                    <p>2- भूमि का स्वामी (पता) का पंजीकरण विवरण अधिनियम (राज्य) ------------------ के क्रमांक के अनुसार किया जाना है।  </p>
                    <p>3- उक्त भूमि अर्जन में किसी भी अन्य अधिकारी का हस्तक्षेप उचित नहीं है।</p>
                </div>
                <div class="h3 text-center fsc"><u>इसके अलावा</u></div>
                <div class="fsc "><p>उक्त भूमि अर्जन के लिए अधिसूचित पुनर्वासन योजना के अंतर्गत अधिकारियों को  
                    पुनर्वासित किया जाना है। पुनर्वासन एवं पुनर्व्यवस्थापन के अनुसार ग्राम ------------------------------- तहसील ------------------  
                    जिला ------------------ की भूमि खसरा नम्बर -------------------------- अर्जित रकबा ------------------ हेक्टेयर में तय किया गया है।  
                    पुनर्वासित योजना का कार्यान्वयन अधिनियम/अनुसूची अधिनियम (राज्य) -------------------- के क्रमांक के अनुसार किया जाना है।</p></div>
                <div class="text-right h4">न्यायालय के प्रकरण क्रमांक से  
                    और हस्ताक्षर द्वारा  
                    (-----------------------------------)  
                    समाधान हो गया, और सूचना निम्नलिखित:  
                    राज्य शासन, जिला एवं संबंधित कार्यालय</div>
            </div>
            </t>
        </t>
    </template>
</odoo>

