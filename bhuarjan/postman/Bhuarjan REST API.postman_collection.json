{
	"info": {
		"_postman_id": "10ca4a24-20ae-4b5d-a56a-246d9311b389",
		"name": "Bhuarjan REST API",
		"description": "REST API collection for Bhuarjan mobile app integration. All APIs are public (no authentication required).",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "19928031",
		"_collection_link": "https://solardesk.postman.co/workspace/24b88f13-f075-4ab9-9223-1d8667a7eab6/collection/19928031-10ca4a24-20ae-4b5d-a56a-246d9311b389?action=share&source=collection_link&creator=19928031"
	},
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{token}}",
				"type": "string"
			}
		]
	},
	"item": [
		{
			"name": "Users",
			"item": [
				{
					"name": "get_otp",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"mobile\": \"9990649990\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/auth/request_otp",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"request_otp"
							]
						}
					},
					"response": []
				},
				{
					"name": "login",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"mobile\":\"9990649990\",\n  \"otp_input\":\"525314\",\n  \"channel_id\": 1\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/auth/login",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"login"
							]
						},
						"description": "Login with mobile and OTP. channel_id is REQUIRED. Validates that the channel exists and is active. If channel is inactive, returns error: 'Channel is inactive. Please contact Administrator.'"
					},
					"response": []
				},
				{
					"name": "Get All Users",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/bhuarjan/users?limit=100&offset=0&role=",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"bhuarjan",
								"users"
							],
							"query": [
								{
									"key": "limit",
									"value": "100",
									"description": "Number of records to return (default: 100)"
								},
								{
									"key": "offset",
									"value": "0",
									"description": "Number of records to skip (default: 0)"
								},
								{
									"key": "role",
									"value": "",
									"description": "Filter by bhuarjan_role: patwari, revenue_inspector, nayab_tahsildar, tahsildar, sdm, additional_collector, collector, administrator (optional)"
								}
							]
						},
						"description": "Get all users with their details including villages, tehsils, districts, and roles"
					},
					"response": []
				},
				{
					"name": "Autocomplete Users",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/bhuarjan/users/autocomplete?q=john&limit=20",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"bhuarjan",
								"users",
								"autocomplete"
							],
							"query": [
								{
									"key": "q",
									"value": "john",
									"description": "Search query (minimum 3 characters required). Searches in both name and login fields."
								},
								{
									"key": "limit",
									"value": "20",
									"description": "Maximum number of results to return (default: 20, max: 50)"
								}
							]
						},
						"description": "Autocomplete API for searching users by username or name. Returns simplified user objects suitable for autocomplete dropdowns. Requires minimum 3 characters in the search query."
					},
					"response": []
				}
			]
		},
		{
			"name": "Projects & Villages",
			"item": [
				{
					"name": "Get All Projects and Villages",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/bhuarjan/user/projects",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"bhuarjan",
								"user",
								"projects"
							]
						},
						"description": "Get all projects and their associated villages (no filter)"
					},
					"response": []
				},
				{
					"name": "Get Projects and Villages by User ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/bhuarjan/user/projects?user_id=1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"bhuarjan",
								"user",
								"projects"
							],
							"query": [
								{
									"key": "user_id",
									"value": "1",
									"description": "User ID to filter projects and villages (optional - if not provided, returns all)"
								}
							]
						},
						"description": "Get projects and villages mapped to a specific user. Only returns villages that are assigned to the user."
					},
					"response": []
				}
			]
		},
		{
			"name": "Dashboard",
			"item": [
				{
					"name": "Get Village Dashboard",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/bhuarjan/dashboard/village?village_id=1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"bhuarjan",
								"dashboard",
								"village"
							],
							"query": [
								{
									"key": "village_id",
									"value": "1",
									"description": "Village ID (required)",
									"disabled": false
								}
							]
						},
						"description": "Get survey statistics dashboard for a village. Returns total surveys, and counts by state (draft, submitted, approved, rejected, locked) with percentages."
					},
					"response": []
				}
			]
		},
		{
			"name": "Departments",
			"item": [
				{
					"name": "Get All Departments",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/bhuarjan/departments?limit=100&offset=0",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"bhuarjan",
								"departments"
							],
							"query": [
								{
									"key": "limit",
									"value": "100",
									"description": "Number of records to return (default: 100)"
								},
								{
									"key": "offset",
									"value": "0",
									"description": "Number of records to skip (default: 0)"
								}
							]
						},
					"description": "Get all departments with their details"
				},
				"response": []
			},
			{
				"name": "Get Projects in Department",
				"request": {
					"method": "GET",
					"header": [],
					"url": {
						"raw": "{{base_url}}/api/bhuarjan/departments/1/projects?user_id=1&limit=100&offset=0",
						"host": [
							"{{base_url}}"
						],
						"path": [
							"api",
							"bhuarjan",
							"departments",
							"1",
							"projects"
						],
						"query": [
							{
								"key": "user_id",
								"value": "1",
								"description": "User ID (optional) - If provided, returns only villages associated with this user",
								"disabled": false
							},
							{
								"key": "limit",
								"value": "100",
								"description": "Number of records to return (default: 100)"
							},
							{
								"key": "offset",
								"value": "0",
								"description": "Number of records to skip (default: 0)"
							}
						]
					},
					"description": "Get all projects associated with a specific department with village objects.\n\n**Path Parameters:**\n- `department_id` (required): Replace '1' in the URL path with the actual department ID\n\n**Query Parameters:**\n- `user_id` (optional): If provided, returns only villages associated with this user. If not provided, returns all villages for each project.\n- `limit` (optional, default 100): Number of records to return\n- `offset` (optional, default 0): Number of records to skip\n\n**Response:**\n- Returns projects with `villages` array containing village objects (instead of `village_ids`)\n- Each village object includes: id, name, village_code, village_uuid, district_id, district_name, tehsil_id, tehsil_name, pincode\n- If `user_id` is provided, response includes `user` object with user details"
				},
				"response": []
			}
		]
	},
		{
			"name": "Land Types",
			"item": [
				{
					"name": "Get All Land Types",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/bhuarjan/land-types?limit=100&offset=0&active=true",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"bhuarjan",
								"land-types"
							],
							"query": [
								{
									"key": "limit",
									"value": "100",
									"description": "Number of records to return (default: 100)"
								},
								{
									"key": "offset",
									"value": "0",
									"description": "Number of records to skip (default: 0)"
								},
								{
									"key": "active",
									"value": "true",
									"description": "Filter by active status: true/false/1/0/yes (optional, default: true - returns only active land types)"
								}
							]
						},
						"description": "Get all land types with their details. Returns active land types by default."
					},
					"response": []
				}
			]
		},
		{
			"name": "Surveys",
			"item": [
				{
					"name": "Create Survey",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"project_id\": 1,\n    \"village_id\": 1,\n    \"department_id\": 1,\n    \"tehsil_id\": 1,\n    \"khasra_number\": \"103\",\n    \"total_area\": 2.5,\n    \"acquired_area\": 2.0,\n    \"has_traded_land\": \"no\",\n    \"traded_land_area\": 0.0,\n    \"crop_type\": 1,\n    \"irrigation_type\": \"irrigated\",\n    \"has_house\": \"no\",\n    \"house_type\": \"pakka\",\n    \"house_area\": 0.0,\n    \"has_shed\": \"yes\",\n    \"shed_area\": 100.0,\n    \"has_well\": \"yes\",\n    \"well_type\": \"pakka\",\n    \"has_tubewell\": \"no\",\n    \"has_pond\": \"no\",\n    \"latitude\": 21.8974,\n    \"longitude\": 83.3960,\n    \"location_accuracy\": 10.5,\n    \"location_timestamp\": \"2024-12-15 10:30:00\",\n    \"remarks\": \"Survey completed successfully\",\n    \"state\": \"draft\",\n    \"landowner_ids\": [1, 2, 3],\n    \"tree_lines\": [\n        {\n            \"tree_type\": \"fruit_bearing\",\n            \"tree_master_id\": 1,\n            \"quantity\": 5\n        },\n        {\n            \"tree_type\": \"non_fruit_bearing\",\n            \"tree_master_id\": 2,\n            \"development_stage\": \"fully_developed\",\n            \"girth_cm\": 50.5,\n            \"quantity\": 10\n        },\n        {\n            \"tree_type\": \"non_fruit_bearing\",\n            \"tree_name\": \"Neem\",\n            \"development_stage\": \"semi_developed\",\n            \"girth_cm\": 35.0,\n            \"quantity\": 15\n        }\n    ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/bhuarjan/survey",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"bhuarjan",
								"survey"
							]
						},
						"description": "Create a new survey. Replace IDs with actual values from your database.\n\n**Tree Lines:**\n- Use `tree_lines` array to add multiple trees\n- Each tree line requires:\n  - `tree_type`: \"fruit_bearing\" or \"non_fruit_bearing\"\n  - Either `tree_master_id` (integer) OR `tree_name` (string) to identify the tree\n  - `quantity`: number of trees (default: 1)\n  - For **non-fruit-bearing trees only**:\n    - `development_stage`: \"undeveloped\", \"semi_developed\", or \"fully_developed\" (REQUIRED)\n    - `girth_cm`: tree girth in centimeters (OPTIONAL, must be > 0 if provided)\n  - For **fruit-bearing trees**: development_stage and girth_cm are not needed\n\n**Examples:**\n\nFruit-bearing tree:\n```json\n{\n  \"tree_type\": \"fruit_bearing\",\n  \"tree_master_id\": 1,\n  \"quantity\": 5\n}\n```\n\nNon-fruit-bearing tree (with girth):\n```json\n{\n  \"tree_type\": \"non_fruit_bearing\",\n  \"tree_master_id\": 2,\n  \"development_stage\": \"fully_developed\",\n  \"girth_cm\": 50.5,\n  \"quantity\": 10\n}\n```\n\nNon-fruit-bearing tree (without girth - optional):\n```json\n{\n  \"tree_type\": \"non_fruit_bearing\",\n  \"tree_master_id\": 2,\n  \"development_stage\": \"fully_developed\",\n  \"quantity\": 10\n}\n```"
					},
					"response": []
				},
				{
					"name": "Get Survey Details",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/bhuarjan/survey/1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"bhuarjan",
								"survey",
								"1"
							],
							"variable": [
								{
									"key": "survey_id",
									"value": "1",
									"description": "Replace with actual survey ID"
								}
							]
						},
						"description": "Get detailed information about a specific survey"
					},
					"response": []
				},
				{
					"name": "List Surveys",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/bhuarjan/surveys?project_id=1&village_id=1&state=draft&limit=100&offset=0",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"bhuarjan",
								"surveys"
							],
							"query": [
								{
									"key": "project_id",
									"value": "1",
									"description": "Filter by project ID (optional)"
								},
								{
									"key": "village_id",
									"value": "1",
									"description": "Filter by village ID (optional)"
								},
								{
									"key": "state",
									"value": "draft",
									"description": "Filter by state: draft, submitted, approved, rejected, locked (optional)"
								},
								{
									"key": "limit",
									"value": "100",
									"description": "Number of records to return (default: 100)"
								},
								{
									"key": "offset",
									"value": "0",
									"description": "Number of records to skip (default: 0)"
								}
							]
						},
						"description": "List surveys with optional filters"
					},
					"response": []
				},
				{
					"name": "Update Survey (PATCH)",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"description": "JWT token from login API"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"khasra_number\": \"104\",\n    \"total_area\": 3.0,\n    \"acquired_area\": 2.5,\n    \"has_traded_land\": \"yes\",\n    \"traded_land_area\": 1.5,\n    \"crop_type\": 2,\n    \"irrigation_type\": \"irrigated\",\n    \"landowner_ids\": [1, 2],\n    \"tree_lines\": [\n        {\n            \"tree_type\": \"fruit_bearing\",\n            \"tree_master_id\": 1,\n            \"quantity\": 5\n        },\n        {\n            \"tree_type\": \"non_fruit_bearing\",\n            \"tree_name\": \"Neem\",\n            \"development_stage\": \"semi_developed\",\n            \"girth_cm\": 40.0,\n            \"quantity\": 10\n        },\n        {\n            \"tree_type\": \"non_fruit_bearing\",\n            \"tree_master_id\": 2,\n            \"development_stage\": \"fully_developed\",\n            \"girth_cm\": 60.5,\n            \"quantity\": 20\n        }\n    ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/bhuarjan/survey/1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"bhuarjan",
								"survey",
								"1"
							],
							"variable": [
								{
									"key": "survey_id",
									"value": "1",
									"description": "Replace with actual survey ID"
								}
							]
						},
						"description": "Update a survey. Only surveys in 'draft' or 'submitted' state can be edited. Once approved or locked, surveys cannot be edited. Include only the fields you want to update in the request body.\n\n**Tree Lines:**\n- Use `tree_lines` array to update tree details (replaces all existing tree lines)\n- Each tree line requires:\n  - `tree_type`: \"fruit_bearing\" or \"non_fruit_bearing\"\n  - Either `tree_master_id` (integer) OR `tree_name` (string) to identify the tree\n  - `quantity`: number of trees (default: 1)\n  - For **non-fruit-bearing trees only**:\n    - `development_stage`: \"undeveloped\", \"semi_developed\", or \"fully_developed\" (REQUIRED)\n    - `girth_cm`: tree girth in centimeters (OPTIONAL, must be > 0 if provided)\n  - For **fruit-bearing trees**: development_stage and girth_cm are not needed\n\n**Examples:**\n\nFruit-bearing tree:\n```json\n{\n  \"tree_type\": \"fruit_bearing\",\n  \"tree_master_id\": 1,\n  \"quantity\": 5\n}\n```\n\nNon-fruit-bearing tree (with girth):\n```json\n{\n  \"tree_type\": \"non_fruit_bearing\",\n  \"tree_master_id\": 2,\n  \"development_stage\": \"fully_developed\",\n  \"girth_cm\": 50.5,\n  \"quantity\": 10\n}\n```\n\nNon-fruit-bearing tree (without girth - optional):\n```json\n{\n  \"tree_type\": \"non_fruit_bearing\",\n  \"tree_master_id\": 2,\n  \"development_stage\": \"fully_developed\",\n  \"quantity\": 10\n}\n```"
					},
					"response": []
				},
				{
					"name": "Delete Survey",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"description": "JWT token from login API"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/bhuarjan/survey/1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"bhuarjan",
								"survey",
								"1"
							],
							"variable": [
								{
									"key": "survey_id",
									"value": "1",
									"description": "Replace with actual survey ID"
								}
							]
						},
						"description": "Delete a survey. Only surveys in 'draft' or 'submitted' state can be deleted. Once approved or locked, surveys cannot be deleted."
					},
					"response": []
				}
			]
		},
		{
			"name": "Form 10 (Bulk Table Report)",
			"item": [
				{
					"name": "Download Form 10 PDF (by village)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/bhuarjan/form10/download?village_id=1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"bhuarjan",
								"form10",
								"download"
							],
							"query": [
								{
									"key": "village_id",
									"value": "1",
									"description": "Village ID (required)"
								}
							]
						},
						"description": "Download Form 10 (Bulk Table Report) PDF based on village_id. Returns all surveys for the specified village across all projects."
					},
					"response": []
				},
				{
					"name": "Download Form 10 PDF (by village and project)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/bhuarjan/form10/download?village_id=1&project_id=1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"bhuarjan",
								"form10",
								"download"
							],
							"query": [
								{
									"key": "village_id",
									"value": "1",
									"description": "Village ID (required)"
								},
								{
									"key": "project_id",
									"value": "1",
									"description": "Project ID (optional)"
								}
							]
						},
						"description": "Download Form 10 (Bulk Table Report) PDF based on village_id and project_id. Returns surveys for the specified village and project only."
					},
					"response": []
				},
				{
					"name": "Download Form 10 PDF (by survey ID)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/bhuarjan/form10/survey/download?survey_id=257",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"bhuarjan",
								"form10",
								"survey",
								"download"
							],
							"query": [
								{
									"key": "survey_id",
									"value": "257",
									"description": "Survey ID (required)"
								}
							]
						},
						"description": "Download Form 10 (Bulk Table Report) PDF for a specific survey. Returns the Form 10 PDF for the specified survey_id only."
					},
					"response": []
				}
			]
		},
		{
			"name": "Landowners",
			"item": [
				{
					"name": "Create Landowner",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"‡§∞‡§æ‡§Æ ‡§ï‡•Å‡§Æ‡§æ‡§∞ ‡§∏‡§ø‡§Ç‡§π\",\n    \"father_name\": \"‡§∂‡•ç‡§Ø‡§æ‡§Æ ‡§∏‡§ø‡§Ç‡§π\",\n    \"mother_name\": \"‡§ó‡•Ä‡§§‡§æ ‡§¶‡•á‡§µ‡•Ä\",\n    \"spouse_name\": \"‡§∏‡•Ä‡§§‡§æ ‡§¶‡•á‡§µ‡•Ä\",\n    \"age\": 45,\n    \"gender\": \"male\",\n    \"phone\": \"9876543210\",\n    \"village_id\": 1,\n    \"tehsil_id\": 1,\n    \"district_id\": 1,\n    \"owner_address\": \"House No. 123, Street Name, ‡§™‡§Ç‡§°‡§∞‡•Ä‡§™‡§æ‡§®‡•Ä, ‡§∞‡§æ‡§Ø‡§ó‡§¢‡§º, Chhattisgarh\",\n    \"aadhar_number\": \"123456789012\",\n    \"pan_number\": \"ABCDE1234F\",\n    \"bank_name\": \"State Bank of India\",\n    \"bank_branch\": \"Raigarh Main Branch\",\n    \"account_number\": \"1234567890123456\",\n    \"ifsc_code\": \"SBIN0001234\",\n    \"account_holder_name\": \"‡§∞‡§æ‡§Æ ‡§ï‡•Å‡§Æ‡§æ‡§∞ ‡§∏‡§ø‡§Ç‡§π\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/bhuarjan/landowner",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"bhuarjan",
								"landowner"
							]
						},
						"description": "Create a new landowner. Replace IDs with actual values from your database."
					},
					"response": []
				},
				{
					"name": "Get Landowners",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/bhuarjan/landowners?survey_id=&village_id=&limit=100&offset=0",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"bhuarjan",
								"landowners"
							],
							"query": [
								{
									"key": "survey_id",
									"value": "",
									"description": "Filter by survey ID (optional)"
								},
								{
									"key": "village_id",
									"value": "",
									"description": "Filter by village ID (optional)"
								},
								{
									"key": "limit",
									"value": "100",
									"description": "Number of records to return (default: 100)"
								},
								{
									"key": "offset",
									"value": "0",
									"description": "Number of records to skip (default: 0)"
								}
							]
						},
						"description": "Get landowners based on survey_id and/or village_id (both optional). If both are provided, returns landowners that match both criteria."
					},
					"response": []
				}
			]
		},
		{
			"name": "S3 File Upload",
			"item": [
				{
					"name": "Generate S3 Presigned URLs",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"// Automatically save presigned_url and content_type to environment variables",
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    if (jsonData.success && jsonData.data) {",
									"        // For single file response",
									"        if (jsonData.data.presigned_url) {",
									"            pm.environment.set(\"presigned_url\", jsonData.data.presigned_url);",
									"            pm.environment.set(\"content_type\", jsonData.data.content_type);",
									"            console.log('‚úÖ Presigned URL saved to environment variable');",
									"            console.log('‚úÖ Content-Type saved:', jsonData.data.content_type);",
									"        }",
									"        // For multiple files response",
									"        if (jsonData.data.presigned_urls && jsonData.data.presigned_urls.length > 0) {",
									"            pm.environment.set(\"presigned_url\", jsonData.data.presigned_urls[0].presigned_url);",
									"            pm.environment.set(\"content_type\", jsonData.data.presigned_urls[0].content_type);",
									"            console.log('‚úÖ First presigned URL saved to environment variable');",
									"            console.log('‚úÖ Content-Type saved:', jsonData.data.presigned_urls[0].content_type);",
									"        }",
									"    }",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"survey_id\": 257,\n    \"file_names\": [\"image1.jpg\"]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/bhuarjan/s3/presigned-urls",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"bhuarjan",
								"s3",
								"presigned-urls"
							]
						},
						"description": "# üîó Generate S3 Presigned URLs\n\nGenerate presigned URLs for uploading files to S3. The URLs are valid for 1 hour.\n\n## üìù Request Body\n\n**Single File:**\n```json\n{\n    \"survey_id\": 257,\n    \"file_name\": \"image1.jpg\"\n}\n```\n\n**Multiple Files:**\n```json\n{\n    \"survey_id\": 257,\n    \"file_names\": [\"image1.jpg\", \"document1.pdf\", \"photo.png\"]\n}\n```\n\n**Parameters:**\n- `survey_id` (required): Survey ID\n- `file_names` (array, optional): List of filenames\n- `file_name` (string, optional): Single filename (alternative to file_names)\n\n## üì§ Response\n\n**Single File Response:**\n```json\n{\n    \"success\": true,\n    \"data\": {\n        \"file_name\": \"image1.jpg\",\n        \"presigned_url\": \"https://bhuarjan.s3.ap-south-1.amazonaws.com/surveys/257/image1.jpg?X-Amz-Algorithm=...\",\n        \"content_type\": \"image/jpeg\",\n        \"s3_key\": \"surveys/257/image1.jpg\",\n        \"bucket_name\": \"bhuarjan\",\n        \"region\": \"ap-south-1\",\n        \"expires_in\": 3600,\n        \"expires_at\": \"2025-11-19T12:00:00+00:00\"\n    }\n}\n```\n\n**Multiple Files Response:**\n```json\n{\n    \"success\": true,\n    \"data\": {\n        \"presigned_urls\": [\n            {\n                \"file_name\": \"image1.jpg\",\n                \"presigned_url\": \"https://bhuarjan.s3.ap-south-1.amazonaws.com/surveys/257/image1.jpg?X-Amz-Algorithm=...\",\n                \"content_type\": \"image/jpeg\",\n                \"s3_key\": \"surveys/257/image1.jpg\",\n                \"bucket_name\": \"bhuarjan\",\n                \"region\": \"ap-south-1\",\n                \"expires_in\": 3600,\n                \"expires_at\": \"2025-11-19T12:00:00+00:00\"\n            }\n        ],\n        \"total_files\": 1,\n        \"successful\": 1,\n        \"failed\": 0,\n        \"survey_id\": 257\n    }\n}\n```\n\n## ‚úÖ Next Steps\n\n1. **Copy the `presigned_url`** from the response\n2. **Note the `content_type`** value (e.g., `image/jpeg`)\n3. **Go to 'Upload File to S3' request** and:\n   - Paste the `presigned_url` in the URL field\n   - Set Content-Type header to the `content_type` value\n   - Select your file in Body tab (binary mode)\n   - Send the request\n\n## üí° Auto-Save Feature\n\nThis request automatically saves `presigned_url` and `content_type` to Postman environment variables:\n- `{{presigned_url}}` - Use this in the Upload request URL\n- `{{content_type}}` - Use this in the Upload request Content-Type header\n\n## ‚ö†Ô∏è IMPORTANT\n\n- ‚úÖ **Include Authorization header (Bearer token)** when calling THIS API\n- ‚ùå **Do NOT include Authorization header** when uploading to the presigned URL\n- ‚è∞ Presigned URLs expire after **1 hour** (3600 seconds)\n- üåç URLs include the region (`ap-south-1`) in the hostname - this is correct!"
					},
					"response": []
				},
				{
					"name": "Upload File to S3 (using presigned URL)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"// Quick Setup: Paste your presigned URL in the URL field below",
									"// For JPEG files, Content-Type is already set to 'image/jpeg'",
									"// Just select your file in the Body tab and click Send!",
									"",
									"// If using environment variable, it will auto-populate",
									"if (pm.environment.get('presigned_url')) {",
									"    console.log('‚úÖ Using presigned_url from environment:', pm.environment.get('presigned_url').substring(0, 80) + '...');",
									"} else {",
									"    console.log('üìù Paste your presigned URL in the URL field');",
									"}",
									"",
									"console.log('‚úÖ Ready to upload!');",
									"console.log('1. URL: Paste presigned URL (or use {{presigned_url}} variable)');",
									"console.log('2. Content-Type: image/jpeg (already set for JPEG files)');",
									"console.log('3. Body: Select your JPEG file in binary mode');",
									"console.log('4. Auth: No Auth (already set)');"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth",
							"noauth": {}
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "image/jpeg",
								"description": "‚ö†Ô∏è CRITICAL: Must match the content type used when generating the presigned URL.\n\nFor JPEG files: 'image/jpeg' (already set)\nFor PNG files: Change to 'image/png'\nFor PDF files: Change to 'application/pdf'\n\nIf Content-Type doesn't match, you'll get SignatureDoesNotMatch error!"
							}
						],
						"body": {
							"mode": "binary",
							"binary": {}
						},
						"url": {
							"raw": "https://bhuarjan.s3.ap-south-1.amazonaws.com/surveys/257/image1.jpg?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAX3YCG3CXYFUT4LOZ%2F20251119%2Fap-south-1%2Fs3%2Faws4_request&X-Amz-Date=20251119T135854Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=content-type%3Bhost&X-Amz-Signature=53608521563e3a2cda93cb39412c0bab13e5ef16d922209319f6ec3f54d43024",
							"protocol": "https",
							"host": [
								"bhuarjan",
								"s3",
								"ap-south-1",
								"amazonaws",
								"com"
							],
							"path": [
								"surveys",
								"257",
								"image1.jpg"
							],
							"query": [
								{
									"key": "X-Amz-Algorithm",
									"value": "AWS4-HMAC-SHA256"
								},
								{
									"key": "X-Amz-Credential",
									"value": "AKIAX3YCG3CXYFUT4LOZ/20251119/ap-south-1/s3/aws4_request"
								},
								{
									"key": "X-Amz-Date",
									"value": "20251119T135854Z"
								},
								{
									"key": "X-Amz-Expires",
									"value": "3600"
								},
								{
									"key": "X-Amz-SignedHeaders",
									"value": "content-type;host"
								},
								{
									"key": "X-Amz-Signature",
									"value": "53608521563e3a2cda93cb39412c0bab13e5ef16d922209319f6ec3f54d43024"
								}
							]
						},
						"description": "# üì§ Upload Binary JPEG File to S3\n\n## üöÄ Quick Start (3 Steps)\n\n1. **Paste Your Presigned URL:**\n   - Replace the example URL in the URL field with your actual presigned URL\n   - Or use `{{presigned_url}}` if you've set it as an environment variable\n\n2. **Select Your File:**\n   - Go to **Body** tab\n   - Make sure **binary** mode is selected (already set)\n   - Click **Select File** and choose your JPEG image\n\n3. **Send:**\n   - Click **Send** button\n   - You should get **200 OK** if successful!\n\n---\n\n## ‚úÖ Pre-Configured Settings\n\n- ‚úÖ **Method:** PUT (correct for S3 upload)\n- ‚úÖ **Auth:** No Auth (no Bearer token needed)\n- ‚úÖ **Content-Type:** image/jpeg (for JPEG files)\n- ‚úÖ **Body Mode:** Binary (ready for file upload)\n\n**For other file types, update Content-Type:**\n- PNG files: Change to `image/png`\n- PDF files: Change to `application/pdf`\n- GIF files: Change to `image/gif`\n\n---\n\n## üìù Example Presigned URL (Pre-filled)\n\nThe URL field contains an example presigned URL. **Replace it with your actual presigned URL** from the Generate Presigned URL API response.\n\n**Example format:**\n```\nhttps://bhuarjan.s3.ap-south-1.amazonaws.com/surveys/257/image1.jpg?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=...&X-Amz-Date=...&X-Amz-Expires=3600&X-Amz-SignedHeaders=content-type%3Bhost&X-Amz-Signature=...\n```\n\n---\n\n## ‚ö†Ô∏è CRITICAL REQUIREMENTS\n\n### ‚úÖ MUST DO:\n- ‚úÖ Use **PUT** method (already set)\n- ‚úÖ Set Auth to **No Auth** (already set)\n- ‚úÖ Use **exact Content-Type** (`image/jpeg` for JPEG files - already set)\n- ‚úÖ Use **complete presigned_url** as-is (don't modify it!)\n- ‚úÖ Select file in **Body tab (binary mode)**\n\n### ‚ùå DO NOT:\n- ‚ùå Include any Authorization header (Bearer token)\n- ‚ùå Use GET or POST method\n- ‚ùå Change Content-Type to something different (unless uploading different file type)\n- ‚ùå Modify the presigned URL (use it exactly as returned)\n- ‚ùå Add or remove any query parameters from the URL\n\n---\n\n## üêõ Common Errors & Solutions\n\n### Error: `SignatureDoesNotMatch`\n**Causes:**\n- Wrong HTTP method (must be PUT) ‚úÖ Already set\n- Wrong Content-Type header (must be `image/jpeg` for JPEG) ‚úÖ Already set\n- Modified presigned URL\n- Missing or extra query parameters\n\n**Solution:**\n- Verify method is PUT ‚úÖ\n- Check Content-Type is `image/jpeg` ‚úÖ\n- Use the presigned URL exactly as returned (don't modify it)\n\n### Error: `Only one auth mechanism allowed`\n**Cause:** You're sending an Authorization header\n\n**Solution:**\n- Go to **Auth** tab\n- Select **No Auth** ‚úÖ Already set\n- Remove any Authorization headers\n\n### Error: `AccessDenied`\n**Cause:** AWS IAM permissions issue\n\n**Solution:**\n- Check AWS IAM user has `s3:PutObject` permission\n- Verify bucket name is correct\n- Check AWS credentials in settings\n\n### Error: `403 Forbidden` or `ExpiredToken`\n**Cause:** Presigned URL expired (valid for 1 hour only)\n\n**Solution:**\n- Generate a new presigned URL\n- Use it immediately (within 1 hour)\n\n---\n\n## ‚úÖ Success Response\n\nAfter successful upload:\n- **Status:** `200 OK`\n- **Body:** Empty (this is normal - S3 doesn't return a body)\n\nThe file is now available at the S3 URL:\n`https://bhuarjan.s3.ap-south-1.amazonaws.com/surveys/{survey_id}/{filename}`\n\n---\n\n## üí° Pro Tips\n\n1. **Auto-Fill from API:** If you use the \"Generate S3 Presigned URLs\" request, it automatically saves the URL to `{{presigned_url}}` variable\n2. **Quick Test:** Use the example URL provided, just replace it with your actual presigned URL\n3. **File Size:** Large files may take longer to upload\n4. **Network:** Ensure stable internet connection for large file uploads"
					},
					"response": []
				},
				{
					"name": "Generate Single File Presigned URL",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"survey_id\": 1,\n    \"file_name\": \"image1.jpg\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/bhuarjan/s3/presigned-urls",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"bhuarjan",
								"s3",
								"presigned-urls"
							]
						},
						"description": "Generate a presigned URL for a single file. Use file_name (string) instead of file_names (array) for single file uploads.\n\n**Request Body:**\n- `survey_id` (required): Survey ID\n- `file_name` (string, required): Single filename, e.g., `\"image1.jpg\"`\n\n**Response:**\n- `presigned_url`: Full URL with region (e.g., `https://bhuarjan.s3.ap-south-1.amazonaws.com/...`)\n- `content_type`: Content type to use in upload request (e.g., 'image/jpeg')\n- `s3_key`: S3 object key/path\n- `region`: AWS region (e.g., 'ap-south-1')\n- `expires_in`: Validity in seconds (3600 = 1 hour)\n\n**Next Step:**\nAfter getting the presigned URL, use the 'Upload File to S3 (using presigned URL)' request to upload your file.\n\n**IMPORTANT:**\n- Include Authorization header (Bearer token) when calling THIS API\n- Do NOT include Authorization header when uploading to the presigned URL"
					},
					"response": []
				},
				{
					"name": "Get Survey Images",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/bhuarjan/survey/images?survey_id=257&active_only=true",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"bhuarjan",
								"survey",
								"images"
							],
							"query": [
								{
									"key": "survey_id",
									"value": "257",
									"description": "Survey ID (required)"
								},
								{
									"key": "photo_type_id",
									"value": "",
									"description": "Filter by photo type ID (optional)",
									"disabled": true
								},
								{
									"key": "active_only",
									"value": "true",
									"description": "Return only active photos (default: true)",
									"disabled": false
								}
							]
						},
						"description": "# üì∏ Get Survey Images from S3\n\nRetrieve all images uploaded to S3 for a specific survey.\n\n## üìù Query Parameters\n\n- `survey_id` (required): Survey ID\n- `photo_type_id` (optional): Filter by photo type ID (e.g., 1 for Land, 2 for Well)\n- `active_only` (optional, default: true): Return only active photos. Set to `false` to include inactive photos.\n\n## üì§ Response\n\n```json\n{\n    \"success\": true,\n    \"data\": {\n        \"survey_id\": 257,\n        \"total_images\": 3,\n        \"images\": [\n            {\n                \"id\": 1,\n                \"photo_type_id\": 1,\n                \"photo_type_name\": \"Land\",\n                \"s3_url\": \"https://bhuarjan.s3.ap-south-1.amazonaws.com/surveys/257/image1.jpg\",\n                \"filename\": \"image1.jpg\",\n                \"file_size\": 245678,\n                \"sequence\": 10,\n                \"description\": \"Land photo\",\n                \"active\": true\n            },\n            {\n                \"id\": 2,\n                \"photo_type_id\": 2,\n                \"photo_type_name\": \"Well\",\n                \"s3_url\": \"https://bhuarjan.s3.ap-south-1.amazonaws.com/surveys/257/well_image.jpg\",\n                \"filename\": \"well_image.jpg\",\n                \"file_size\": 189234,\n                \"sequence\": 20,\n                \"description\": \"Well photo\",\n                \"active\": true\n            }\n        ]\n    }\n}\n```\n\n## üìã Response Fields\n\n- `survey_id`: Survey ID\n- `total_images`: Total number of images found\n- `images`: Array of image objects with:\n  - `id`: Photo record ID\n  - `photo_type_id`: Photo type ID (e.g., 1, 2, 3)\n  - `photo_type_name`: Photo type name (e.g., \"Land\", \"Well\", \"House\")\n  - `s3_url`: Full S3 URL of the image (can be used directly in `<img>` tags)\n  - `filename`: Original filename\n  - `file_size`: File size in bytes\n  - `sequence`: Display order\n  - `description`: Description or notes\n  - `active`: Whether the photo is active\n\n## üîç Filtering Examples\n\n**Get all images for survey 257:**\n```\nGET /api/bhuarjan/survey/images?survey_id=257\n```\n\n**Get only Land photos for survey 257:**\n```\nGET /api/bhuarjan/survey/images?survey_id=257&photo_type_id=1\n```\n\n**Get all photos (including inactive):**\n```\nGET /api/bhuarjan/survey/images?survey_id=257&active_only=false\n```\n\n## ‚úÖ Use Cases\n\n- Display all survey images in a gallery\n- Filter images by photo type (Land, Well, House, etc.)\n- Get image URLs for mobile app display\n- Show image metadata (filename, size, description)\n\n## ‚ö†Ô∏è Notes\n\n- Images are ordered by `sequence` and `create_date` (newest first)\n- Only active photos are returned by default\n- S3 URLs are public and can be used directly in image tags\n- If no images are found, `total_images` will be 0 and `images` will be an empty array"
					},
					"response": []
				}
			]
		},
		{
			"name": "Tree Master",
			"item": [
				{
					"name": "Get All Trees",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/bhuarjan/trees?limit=100&offset=0",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"bhuarjan",
								"trees"
							],
							"query": [
								{
									"key": "type",
									"value": "",
									"description": "Filter by tree type: 'fruit_bearing' or 'non_fruit_bearing'",
									"disabled": true
								},
								{
									"key": "name",
									"value": "",
									"description": "Filter by tree name (partial match, case-insensitive)",
									"disabled": true
								},
								{
									"key": "development_stage",
									"value": "",
									"description": "For non-fruit-bearing trees: 'undeveloped', 'semi_developed', or 'fully_developed'. Requires girth_cm to get rate.",
									"disabled": true
								},
								{
									"key": "girth_cm",
									"value": "",
									"description": "For non-fruit-bearing trees: Girth in cm. Required with development_stage to get rate from tree_rate_master.",
									"disabled": true
								},
								{
									"key": "limit",
									"value": "100",
									"description": "Number of records to return (default: 100)"
								},
								{
									"key": "offset",
									"value": "0",
									"description": "Number of records to skip (default: 0)"
								}
							]
						},
						"description": "Get all tree masters with optional filters by type, name, development stage, and girth.\n\n**Query Parameters:**\n- `type` (optional): Filter by tree type. Values: 'fruit_bearing' or 'non_fruit_bearing'\n- `name` (optional): Filter by tree name (partial match, case-insensitive)\n- `development_stage` (optional): For non-fruit-bearing trees only. Values: 'undeveloped', 'semi_developed', 'fully_developed'. Requires girth_cm to get rate.\n- `girth_cm` (optional): For non-fruit-bearing trees only. Girth in cm. Required with development_stage to lookup rate from tree_rate_master.\n- `limit` (optional, default 100): Number of records to return\n- `offset` (optional, default 0): Number of records to skip\n\n**Response Fields:**\n- `id`: Tree master ID\n- `name`: Tree name\n- `tree_type`: 'fruit_bearing' or 'non_fruit_bearing'\n- `rate`: For fruit-bearing trees, flat rate. For non-fruit-bearing trees, rate from tree_rate_master (if girth_cm and development_stage provided)\n\n**Examples:**\n- Get all trees: `/api/bhuarjan/trees`\n- Get fruit-bearing trees: `/api/bhuarjan/trees?type=fruit_bearing`\n- Get non-fruit-bearing trees: `/api/bhuarjan/trees?type=non_fruit_bearing`\n- Search by name: `/api/bhuarjan/trees?name=Mango`\n- Get non-fruit-bearing tree rate: `/api/bhuarjan/trees?type=non_fruit_bearing&name=Neem&development_stage=undeveloped&girth_cm=50`\n- Combined filters: `/api/bhuarjan/trees?type=non_fruit_bearing&name=Sal&development_stage=semi_developed&girth_cm=75`"
					},
					"response": []
				},
				{
					"name": "Get Trees by Name",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/bhuarjan/trees?name=Mango&limit=100&offset=0",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"bhuarjan",
								"trees"
							],
							"query": [
								{
									"key": "name",
									"value": "Mango",
									"description": "Filter by tree name (partial match, case-insensitive)"
								},
								{
									"key": "limit",
									"value": "100",
									"description": "Number of records to return (default: 100)"
								},
								{
									"key": "offset",
									"value": "0",
									"description": "Number of records to skip (default: 0)"
								}
							]
						},
						"description": "Get trees filtered by name. The name filter uses partial match (case-insensitive), so 'Mango' will match 'Mango Tree', 'Mangoes', etc."
					},
					"response": []
				},
				{
					"name": "Get Trees by Development Stage",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/bhuarjan/trees?development_stage=undeveloped&girth_cm=50&limit=100&offset=0",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"bhuarjan",
								"trees"
							],
							"query": [
								{
									"key": "development_stage",
									"value": "undeveloped",
									"description": "For non-fruit-bearing trees: 'undeveloped', 'semi_developed', or 'fully_developed'. Requires girth_cm to get rate."
								},
								{
									"key": "girth_cm",
									"value": "50",
									"description": "For non-fruit-bearing trees: Girth in cm. Required with development_stage to get rate from tree_rate_master."
								},
								{
									"key": "limit",
									"value": "100",
									"description": "Number of records to return (default: 100)"
								},
								{
									"key": "offset",
									"value": "0",
									"description": "Number of records to skip (default: 0)"
								}
							]
						},
						"description": "Get trees filtered by development stage. For non-fruit-bearing trees, requires girth_cm parameter to lookup rate from tree_rate_master.\n\n**Development Stages:**\n- `undeveloped`: Undeveloped / ‡§Ö‡§µ‡§ø‡§ï‡§∏‡§ø‡§§\n- `semi_developed`: Semi-developed / ‡§Ö‡§∞‡•ç‡§ß-‡§µ‡§ø‡§ï‡§∏‡§ø‡§§\n- `fully_developed`: Fully Developed / ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§µ‡§ø‡§ï‡§∏‡§ø‡§§\n\n**Note:** For non-fruit-bearing trees, you must also provide `girth_cm` parameter to get the rate. Example: `?development_stage=undeveloped&girth_cm=50`"
					},
					"response": []
				},
				{
					"name": "Get Trees by Name and Development Stage",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/bhuarjan/trees?name=Neem&development_stage=semi_developed&girth_cm=75&limit=100&offset=0",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"bhuarjan",
								"trees"
							],
							"query": [
								{
									"key": "name",
									"value": "Neem",
									"description": "Filter by tree name (partial match, case-insensitive)"
								},
								{
									"key": "development_stage",
									"value": "semi_developed",
									"description": "For non-fruit-bearing trees: 'undeveloped', 'semi_developed', or 'fully_developed'. Requires girth_cm to get rate."
								},
								{
									"key": "girth_cm",
									"value": "75",
									"description": "For non-fruit-bearing trees: Girth in cm. Required with development_stage to get rate from tree_rate_master."
								},
								{
									"key": "limit",
									"value": "100",
									"description": "Number of records to return (default: 100)"
								},
								{
									"key": "offset",
									"value": "0",
									"description": "Number of records to skip (default: 0)"
								}
							]
						},
						"description": "Get trees filtered by both name, development stage, and girth. For non-fruit-bearing trees, this returns the rate from tree_rate_master based on the girth and development stage.\n\n**Note:** For non-fruit-bearing trees, both `development_stage` and `girth_cm` are required to get the rate."
					},
					"response": []
				}
			]
		},
		{
			"name": "Photo Types",
			"item": [
				{
					"name": "Get All Photo Types",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/bhuarjan/photo-types?limit=100&offset=0",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"bhuarjan",
								"photo-types"
							],
							"query": [
								{
									"key": "limit",
									"value": "100",
									"description": "Number of records to return (default: 100)"
								},
								{
									"key": "offset",
									"value": "0",
									"description": "Number of records to skip (default: 0)"
								},
								{
									"key": "active",
									"value": "true",
									"description": "Filter by active status (default: true)",
									"disabled": true
								}
							]
						},
						"description": "Get all photo types available for tagging survey photos. Photo types include: Land, Well, House, Shed, Tubewell, Pond, Trees, Boundary, Other."
					},
					"response": []
				}
			]
		},
		{
			"name": "Survey Photos",
			"item": [
				{
					"name": "Add Photos to Survey",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"photos\": [\n        {\n            \"photo_type_id\": 1,\n            \"s3_url\": \"https://bhuarjan.s3.ap-south-1.amazonaws.com/surveys/257/image1.jpg\",\n            \"filename\": \"image1.jpg\",\n            \"file_size\": 245678,\n            \"description\": \"Land photo\",\n            \"sequence\": 10\n        },\n        {\n            \"photo_type_id\": 2,\n            \"s3_url\": \"https://bhuarjan.s3.ap-south-1.amazonaws.com/surveys/257/well_photo.jpg\",\n            \"filename\": \"well_photo.jpg\",\n            \"file_size\": 189234,\n            \"description\": \"Well on the property\",\n            \"sequence\": 20\n        }\n    ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/bhuarjan/survey/photos?survey_id=257",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"bhuarjan",
								"survey",
								"photos"
							],
							"query": [
								{
									"key": "survey_id",
									"value": "257",
									"description": "Survey ID (required)"
								}
							]
						},
						"description": "# üì∏ Add Photos to Survey After Creation\n\nUse this dedicated API to link images to a survey after the survey has been created. This is the **recommended way** to add photos separately from survey creation.\n\n## üîÑ Complete Workflow\n\n### Step 1: Create Survey\n- Use `POST /api/bhuarjan/survey` to create the survey\n- Get the `survey_id` from the response\n\n### Step 2: Upload Images to S3\n1. Call `POST /api/bhuarjan/s3/presigned-urls` with:\n   ```json\n   {\n       \"survey_id\": 257,\n       \"file_names\": [\"image1.jpg\", \"well_photo.jpg\"]\n   }\n   ```\n2. Upload each file to S3 using the presigned URLs (PUT request)\n3. Copy the S3 URLs from the upload responses\n\n### Step 3: Link Photos to Survey\n- Use this API (`POST /api/bhuarjan/survey/photos`) to link the S3 URLs to the survey\n\n## üìù Request\n\n**Query Parameter:**\n- `survey_id` (required): Survey ID\n\n**Request Body:**\n```json\n{\n    \"photos\": [\n        {\n            \"photo_type_id\": 1,\n            \"s3_url\": \"https://bhuarjan.s3.ap-south-1.amazonaws.com/surveys/257/image1.jpg\",\n            \"filename\": \"image1.jpg\",\n            \"file_size\": 245678,\n            \"description\": \"Land photo\",\n            \"sequence\": 10\n        },\n        {\n            \"photo_type_id\": 2,\n            \"s3_url\": \"https://bhuarjan.s3.ap-south-1.amazonaws.com/surveys/257/well_photo.jpg\",\n            \"filename\": \"well_photo.jpg\",\n            \"file_size\": 189234,\n            \"description\": \"Well on the property\",\n            \"sequence\": 20\n        }\n    ]\n}\n```\n\n**Photo Object Fields:**\n- `photo_type_id` (required): Photo type ID from photo types master (e.g., 1=Land, 2=Well, 3=House)\n- `s3_url` (required): Full S3 URL after upload (e.g., `https://bhuarjan.s3.ap-south-1.amazonaws.com/surveys/257/image1.jpg`)\n- `filename` (optional): Original filename\n- `file_size` (optional): File size in bytes\n- `description` (optional): Description or notes\n- `sequence` (optional): Display order (default: 10)\n\n## üì§ Response\n\n```json\n{\n    \"success\": true,\n    \"message\": \"Successfully added 2 photo(s) to survey\",\n    \"data\": {\n        \"survey_id\": 257,\n        \"added_photos\": [\n            {\n                \"photo_type_id\": 1,\n                \"photo_type_name\": \"Land\",\n                \"s3_url\": \"https://bhuarjan.s3.ap-south-1.amazonaws.com/surveys/257/image1.jpg\",\n                \"filename\": \"image1.jpg\"\n            },\n            {\n                \"photo_type_id\": 2,\n                \"photo_type_name\": \"Well\",\n                \"s3_url\": \"https://bhuarjan.s3.ap-south-1.amazonaws.com/surveys/257/well_photo.jpg\",\n                \"filename\": \"well_photo.jpg\"\n            }\n        ],\n        \"total_photos\": 2\n    }\n}\n```\n\n## ‚úÖ Alternative: Use PATCH API\n\nYou can also add photos using the PATCH API when updating a survey:\n\n```\nPATCH /api/bhuarjan/survey/257\n```\n\n**Request Body:**\n```json\n{\n    \"photos\": [\n        {\n            \"photo_type_id\": 1,\n            \"s3_url\": \"https://bhuarjan.s3.ap-south-1.amazonaws.com/surveys/257/image1.jpg\",\n            \"filename\": \"image1.jpg\"\n        }\n    ]\n}\n```\n\n**Note:** PATCH API adds photos to existing ones (doesn't replace).\n\n## ‚ö†Ô∏è Important Notes\n\n- ‚úÖ This API **adds** photos (doesn't replace existing photos)\n- ‚úÖ You can call this API multiple times to add more photos\n- ‚úÖ Each photo must have a valid `photo_type_id` and `s3_url`\n- ‚úÖ Photos are linked to the survey and can be retrieved using `GET /api/bhuarjan/survey/images?survey_id=257`\n- ‚ö†Ô∏è Make sure the S3 URLs are accessible and valid\n- ‚ö†Ô∏è `photo_type_id` must exist in the photo types master"
					},
					"response": []
				}
			]
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "https://bhuarjan.com",
			"type": "string"
		}
	]
}