<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="custom_login_page" inherit_id="web.login" name="Login Inherit">
        <xpath expr='//form/div[3]' position="replace">
            <div class="form-group field-password position-relative">
                <label for="password">Password</label>
                <input type="password" placeholder="Password" name="password" id="password" 
                       t-attf-class="form-control #{'form-control-sm' if form_small else ''}" 
                       required="required" autocomplete="current-password" 
                       t-att-autofocus="'autofocus' if login else None" maxlength="4096"/>
                <span class="fa fa-eye-slash password-toggle" id="password_toggle_public"/>
            </div>
        </xpath>
    </template>
    
    <!-- Uncomment this code if you want to show the icon on signup and reset password pages -->

    <!-- <template id="fix_signup_toggle" inherit_id="auth_signup.signup" name="Fix Signup Toggle Icons">
        <xpath expr="//form" position="before">
            <script type="text/javascript">
            <![CDATA[
                document.addEventListener('DOMContentLoaded', function() {
                    var resetIcons = document.querySelectorAll('#password_toggle_reset, #password_toggle_reset_confirm');
                    for (var i = 0; i < resetIcons.length; i++) {
                        resetIcons[i].remove();
                    }
                    var signupIcons = document.querySelectorAll('#password_toggle_signup, #password_toggle_confirm');
                    for (var i = 0; i < signupIcons.length; i++) {
                        signupIcons[i].style.display = 'inline-block';
                    }
                });
            ]]>
            </script>
        </xpath>
    </template>
    
    <template id="custom_signup_fields" inherit_id="auth_signup.fields" name="Signup Fields Inherit">
        <xpath expr="//input[@name='password']" position="attributes">
            <attribute name="id">password</attribute>
        </xpath>
        <xpath expr="//div[.//input[@name='password']]" position="attributes">
            <attribute name="class">form-group field-password position-relative</attribute>
        </xpath>
        <xpath expr="//input[@name='password']" position="after">
            <span class="fa fa-eye-slash password-toggle" id="password_toggle_signup"/>
        </xpath>
    </template>
    
    <template id="custom_signup_confirm_password" inherit_id="auth_signup.fields" name="Signup Confirm Password Inherit">
        <xpath expr="//input[@name='confirm_password']" position="attributes">
            <attribute name="id">confirm_password</attribute>
        </xpath>
        <xpath expr="//div[.//input[@name='confirm_password']]" position="attributes">
            <attribute name="class">form-group field-password position-relative</attribute>
        </xpath>
        <xpath expr="//input[@name='confirm_password']" position="after">
            <span class="fa fa-eye-slash password-toggle" id="password_toggle_confirm"/>
        </xpath>
    </template>

    <template id="custom_reset_password_fields" inherit_id="auth_signup.fields" name="Reset Password Fields Inherit">
        <xpath expr="//input[@name='password']" position="attributes">
            <attribute name="id">password</attribute>
        </xpath>
        <xpath expr="//div[.//input[@name='password']]" position="attributes">
            <attribute name="class">form-group field-password position-relative</attribute>
        </xpath>
        <xpath expr="//input[@name='password']" position="after">
            <span class="fa fa-eye-slash password-toggle" id="password_toggle_reset"/>
        </xpath>
    </template>
    
    <template id="custom_reset_confirm_password" inherit_id="auth_signup.fields" name="Reset Confirm Password Inherit">
        <xpath expr="//input[@name='confirm_password']" position="attributes">
            <attribute name="id">confirm_password</attribute>
        </xpath>
        <xpath expr="//div[.//input[@name='confirm_password']]" position="attributes">
            <attribute name="class">form-group field-password position-relative</attribute>
        </xpath>
        <xpath expr="//input[@name='confirm_password']" position="after">
            <span class="fa fa-eye-slash password-toggle" id="password_toggle_reset_confirm"/>
        </xpath>
    </template>
    
    <template id="custom_reset_password_page" inherit_id="auth_signup.reset_password" name="Reset Password Page Inherit">

        <xpath expr="//form" position="before">
            <script type="text/javascript">
            <![CDATA[
                document.addEventListener('DOMContentLoaded', function() {
                    var signupIcons = document.querySelectorAll('#password_toggle_signup, #password_toggle_confirm');
                    for (var i = 0; i < resetIcons.length; i++) {
                        resetIcons[i].remove();
                    }
                    var resetIcons = document.querySelectorAll('#password_toggle_reset, #password_toggle_reset_confirm');
                    for (var i = 0; i < signupIcons.length; i++) {
                        signupIcons[i].style.display = 'inline-block';
                    }
                });
            ]]>
            </script>
        </xpath>
    </template> -->
</odoo>