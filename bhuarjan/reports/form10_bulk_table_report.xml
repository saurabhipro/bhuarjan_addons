<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Bulk Form 10 Table Report (one PDF with all surveys row-by-row) -->
    <record id="action_report_form10_bulk_table" model="ir.actions.report">
        <field name="name">Form 10 - Bulk Table</field>
        <field name="model">bhu.survey</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">bhuarjan.form10_bulk_table_report</field>
        <field name="report_file">bhuarjan.form10_bulk_table_report</field>
        <field name="print_report_name">'Form10_Bulk_' + (object and object[0].project_id.name or 'All')</field>
        <!-- <field name="binding_model_id" ref="model_bhu_survey"/> -->
        
    </record>

    <template id="form10_bulk_table_report">
        <t t-call="web.html_container">
            <t t-call="web.external_layout">
            <t t-set="surveys" t-value="docs"/>
            <t t-set="first" t-value="surveys and surveys[0] or False"/>

            <style>
                .bulk-form10-table { width: 100%; border-collapse: collapse; font-size: 14px; }
                .bulk-form10-table th, .bulk-form10-table td { border: 1px solid #444; padding: 8px; }
                .bulk-form10-table th { background: #f2f4f7; text-align: left; font-weight: 700; }
                /* Keep headers on each page and avoid row splitting across pages */
                .bulk-form10-table thead { display: table-header-group; }
                .bulk-form10-table tfoot { display: table-row-group; }
                .bulk-form10-table tr { page-break-inside: avoid !important; break-inside: avoid !important; }
                .bulk-form10-table td, .bulk-form10-table th { page-break-inside: avoid !important; break-inside: avoid !important; }
                .bulk-form10-table { page-break-inside: auto; page-break-after: auto; }
                table { page-break-after: auto; }
                tr { page-break-after: auto; }
                td { page-break-after: auto; }
                .page-break { page-break-after: always; }
                .signature-blocks { display: flex; justify-content: space-between; gap: 0; margin-top: 40px; }
                .signature { width: 23%; text-align: center; padding-top: 0; }
                .signature p { margin: 2px 0; font-size: 16px; font-weight: 700; }
                /* Insert a page break after every 10 rows */
                tr.row-break { page-break-after: always; }
                body, .bulk-form10-table, .bulk-form10-table th, .bulk-form10-table td, h2, h3, p, div, span {
                    font-family: 'Noto Sans Devanagari', 'Mangal', 'Arial Unicode MS', 'DejaVu Sans', sans-serif;
                    unicode-bidi: embed;
                    direction: ltr;
                }
            </style>

            <div class="page">
                <t t-foreach="range(0, len(surveys), 5)" t-as="start">
                    <h2 style="text-decoration: underline; margin: 0 0 12px 0; text-align: center; font-size: 20px;"><strong>भू-अर्जन फार्म-10 (प्रारंभिक सर्वे प्रपत्र)</strong></h2>

                    <!-- Header info (project / department / village / tehsil / date) -->
                    <table style="width: 100%; border-collapse: collapse; margin-bottom: 10px; font-size: 14px;">
                        <tr>
                            <td style="width: 50%; padding: 6px; border: 1px solid #000;">
                                <strong>परियोजना का नाम :</strong>
                                <span t-if="first" t-field="first.project_id.name"/>
                            </td>
                            <td style="width: 50%; padding: 6px; border: 1px solid #000;">
                                <strong>विभाग का नाम</strong>
                                <span t-if="first" t-field="first.department_id.name"/>
                            </td>
                        </tr>
                        <tr>
                            <td style="width: 50%; padding: 6px; border: 1px solid #000;">
                                <strong>ग्राम का नाम</strong>
                                <span t-if="first" t-field="first.village_id.name"/>
                            </td>
                            <td style="width: 50%; padding: 6px; border: 1px solid #000;">
                                <strong>तहसील का नाम</strong>
                                <span t-if="first" t-field="first.tehsil_id.name"/> <strong>जिला-रायगढ़ (छ.ग.)</strong>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2" style="padding: 6px; border: 1px solid #000;">
                                <strong>सर्वे दिनाँक</strong>
                                <span t-if="first" t-field="first.survey_date" t-options="{'widget': 'date', 'format': 'dd/MM/yyyy'}"/>
                            </td>
                        </tr>
                    </table>
                    <table class="bulk-form10-table">
                        <thead>
                            <tr>
                                <th rowspan="2" style="text-align:center">क्र.</th>
                                <th rowspan="2" style="text-align:center">प्रभावित खसरा क्रमांक</th>
                                <th rowspan="2" style="text-align:center">कुल रकबा (हे.में.)</th>
                                <th rowspan="2" style="text-align:center">कुल अर्जित रकबा (हे.में.)</th>
                                <th rowspan="2" style="text-align:center">भूमिस्वामी का नाम</th>
                                <th colspan="4" style="text-align:center">भूमि का प्रकार</th>
                                <th colspan="3" style="text-align:center">भूमि पर स्थित वृक्ष की संख्या (प्रजातिवार)</th>
                                <th colspan="6" style="text-align:center">भूमि पर स्थित परिसंपत्तियों का विवरण</th>
                            </tr>
                            <tr>
                                <th style="text-align:center">एक फसली</th>
                                <th style="text-align:center">दो फसली</th>
                                <th style="text-align:center">सिंचित</th>
                                <th style="text-align:center">असिंचित</th>
                                <th style="text-align:center">अविकसित</th>
                                <th style="text-align:center">अर्द्ध विकसित</th>
                                <th style="text-align:center">पूर्ण विकसित</th>
                                <th style="text-align:center">मकान (कच्चा/पक्का) क्षेत्रफल वर्गफुट में</th>
                                <th style="text-align:center">शेड (क्षेत्रफल वर्गफुट में)</th>
                                <th style="text-align:center">कुँआ (कच्चा/पक्का) (हाँ/नहीं)</th>
                                <th style="text-align:center">ट्यूबवेल / सम्बमर्शिबल पम्प फिटिंग सहित (हाँ/नहीं)</th>
                                <th style="text-align:center">तालाब (हाँ/नहीं)</th>
                                <th style="text-align:center">रिमार्क</th>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-foreach="surveys[start:start+5]" t-as="s">
                                <tr>
                                    <td style="text-align:center"><t t-esc="start + s_index + 1"/></td>
                                    <td style="text-align:center">
                                        <t t-if="s.khasra_number">
                                            <t t-esc="s.khasra_number"/>
                                        </t>
                                        <span t-if="not s.khasra_number" style="color:#dc3545;font-weight:bold">नहीं</span>
                                    </td>
                                    <td style="text-align:center">
                                        <t t-if="s.total_area is not None">
                                            <t t-esc="s.total_area"/>
                                        </t>
                                        <span t-if="s.total_area is None" style="color:#dc3545;font-weight:bold">नहीं</span>
                                    </td>
                                    <td style="text-align:center">
                                        <t t-if="s.acquired_area is not None">
                                            <t t-esc="s.acquired_area"/>
                                        </t>
                                        <span t-if="s.acquired_area is None" style="color:#dc3545;font-weight:bold">नहीं</span>
                                    </td>
                                    <td>
                                        <t t-if="s.landowner_ids and len(s.landowner_ids) &gt; 0">
                                            <t t-foreach="s.landowner_ids" t-as="lo" t-foreach-index="li">
                                                <div>
                                                    <t t-esc="(li or 0) + 1"/>. <t t-esc="lo.name"/>
                                                    <t t-if="lo.gender == 'female'">
                                                        <t t-if="lo.spouse_name">
                                                            &#160;पत्नी&#160;<t t-esc="lo.spouse_name"/>
                                                        </t>
                                                        <t t-else="">
                                                            &#160;पुत्री&#160;<t t-esc="lo.father_name or ''"/>
                                                        </t>
                                                    </t>
                                                    <t t-else="">
                                                        &#160;पुत्र&#160;<t t-esc="lo.father_name or ''"/>
                                                    </t>
                                                </div>
                                            </t>
                                        </t>
                                        <span t-if="not (s.landowner_ids and len(s.landowner_ids) &gt; 0)" style="color:#dc3545;font-weight:bold">नहीं</span>
                                    </td>
                                    <td style="text-align:center"><span t-if="s.is_single_crop" style="color:#28a745;font-weight:bold">हाँ</span><span t-if="not s.is_single_crop" style="color:#dc3545;font-weight:bold">नहीं</span></td>
                                    <td style="text-align:center"><span t-if="s.is_double_crop" style="color:#28a745;font-weight:bold">हाँ</span><span t-if="not s.is_double_crop" style="color:#dc3545;font-weight:bold">नहीं</span></td>
                                    <td style="text-align:center"><span t-if="s.is_irrigated" style="color:#28a745;font-weight:bold">हाँ</span><span t-if="not s.is_irrigated" style="color:#dc3545;font-weight:bold">नहीं</span></td>
                                    <td style="text-align:center"><span t-if="s.is_unirrigated" style="color:#28a745;font-weight:bold">हाँ</span><span t-if="not s.is_unirrigated" style="color:#dc3545;font-weight:bold">नहीं</span></td>
                                    <td style="text-align:center"><span t-if="s.tree_development_stage == 'undeveloped'"><span t-esc="s.tree_count"/></span><span t-if="s.tree_development_stage != 'undeveloped'" style="color:#dc3545;font-weight:bold">नहीं</span></td>
                                    <td style="text-align:center"><span t-if="s.tree_development_stage == 'semi_developed'"><span t-esc="s.tree_count"/></span><span t-if="s.tree_development_stage != 'semi_developed'" style="color:#dc3545;font-weight:bold">नहीं</span></td>
                                    <td style="text-align:center"><span t-if="s.tree_development_stage == 'fully_developed'"><span t-esc="s.tree_count"/></span><span t-if="s.tree_development_stage != 'fully_developed'" style="color:#dc3545;font-weight:bold">नहीं</span></td>
                                    <td style="text-align:center">
                                        <span t-if="s.house_type">
                                            <span t-esc="s.house_type"/> / <span t-esc="s.house_area"/>
                                        </span>
                                        <span t-if="not s.house_type" style="color:#dc3545;font-weight:bold">नहीं</span>
                                    </td>
                                    <td style="text-align:center"><span t-if="s.shed_area"><span t-esc="s.shed_area"/></span><span t-if="not s.shed_area" style="color:#dc3545;font-weight:bold">नहीं</span></td>
                                    <td style="text-align:center">
                                        <span t-if="s.has_well == 'yes' and s.well_type == 'kachcha'" style="color:#28a745;font-weight:bold">हाँ-कच्चा</span>
                                        <span t-if="s.has_well == 'yes' and s.well_type == 'pakka'" style="color:#28a745;font-weight:bold">हाँ-पक्का</span>
                                        <span t-if="s.has_well != 'yes'" style="color:#dc3545;font-weight:bold">नहीं</span>
                                    </td>
                                    <td style="text-align:center"><span t-if="s.has_tubewell" style="color:#28a745;font-weight:bold">हाँ</span><span t-if="not s.has_tubewell" style="color:#dc3545;font-weight:bold">नहीं</span></td>
                                    <td style="text-align:center"><span t-if="s.has_pond" style="color:#28a745;font-weight:bold">हाँ</span><span t-if="not s.has_pond" style="color:#dc3545;font-weight:bold">नहीं</span></td>
                                    <td><span style="color:#dc3545;font-weight:bold">नहीं</span></td>
                                </tr>
                            </t>
                        </tbody>
                    </table>
                    <!-- Footer (signatures) on every page -->
                    <table style="width:100%; border-collapse:collapse; margin-top: 20px; page-break-inside: avoid;">
                        <tr>
                            <td style="width:25%; text-align:center; padding:6px;">
                                <p style="margin: 4px 0; font-size: 16px; font-weight: 700;">(हस्ताक्षर)</p>
                                <p style="margin: 4px 0; font-size: 16px; font-weight: 700;">अपेक्षक निकाय के</p>
                                <p style="margin: 4px 0; font-size: 16px; font-weight: 700;">अधिकृत प्रतिनिधि</p>
                                <p style="margin: 4px 0; font-size: 16px; font-weight: 700;">नाम -</p>
                                <p style="margin: 4px 0; font-size: 16px; font-weight: 700;">पदनाम</p>
                            </td>
                            <td style="width:25%; text-align:center; padding:6px;">
                                <p style="margin: 4px 0; font-size: 16px; font-weight: 700;">(हस्ताक्षर)</p>
                                <p style="margin: 4px 0; font-size: 16px; font-weight: 700;">तहसीलदार</p>
                                <p style="margin: 4px 0; font-size: 16px; font-weight: 700;">नाम -</p>
                            </td>
                            <td style="width:25%; text-align:center; padding:6px;">
                                <p style="margin: 4px 0; font-size: 16px; font-weight: 700;">(हस्ताक्षर)</p>
                                <p style="margin: 4px 0; font-size: 16px; font-weight: 700;">नायब तहसीलदार</p>
                                <p style="margin: 4px 0; font-size: 16px; font-weight: 700;">नाम -</p>
                            </td>
                            <td style="width:25%; text-align:center; padding:6px;">
                                <p style="margin: 4px 0; font-size: 16px; font-weight: 700;">(हस्ताक्षर)</p>
                                <p style="margin: 4px 0; font-size: 16px; font-weight: 700;">राजस्व निरीक्षक</p>
                                <p style="margin: 4px 0; font-size: 16px; font-weight: 700;">नाम-</p>
                                <p style="margin: 4px 0; font-size: 16px; font-weight: 700;">रा.नि.मं.</p>
                            </td>
                        </tr>
                    </table>
                    <t t-if="(start + 5) &lt; len(surveys)">
                        <div style="page-break-after: always;"></div>
                    </t>
                </t>
            </div>
            </t>
        </t>
    </template>
</odoo>


