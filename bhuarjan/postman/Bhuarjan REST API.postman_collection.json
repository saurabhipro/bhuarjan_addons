{
	"info": {
		"_postman_id": "10ca4a24-20ae-4b5d-a56a-246d9311b389",
		"name": "Bhuarjan REST API",
		"description": "REST API collection for Bhuarjan mobile app integration. All APIs are public (no authentication required).",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "19928031",
		"_collection_link": "https://solardesk.postman.co/workspace/24b88f13-f075-4ab9-9223-1d8667a7eab6/collection/19928031-10ca4a24-20ae-4b5d-a56a-246d9311b389?action=share&source=collection_link&creator=19928031"
	},
	"item": [
		{
			"name": "Users",
			"item": [
				{
					"name": "get_otp",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"mobile\": \"9990649990\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/auth/request_otp",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"request_otp"
							]
						}
					},
					"response": []
				},
				{
					"name": "login",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"mobile\":\"9990649990\",\n  \"otp_input\":\"525314\",\n  \"channel_id\": 1\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/auth/login",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"login"
							]
						},
						"description": "Login with mobile and OTP. channel_id is REQUIRED. Validates that the channel exists and is active. If channel is inactive, returns error: 'Channel is inactive. Please contact Administrator.'"
					},
					"response": []
				},
				{
					"name": "Get All Users",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/bhuarjan/users?limit=100&offset=0&role=",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"bhuarjan",
								"users"
							],
							"query": [
								{
									"key": "limit",
									"value": "100",
									"description": "Number of records to return (default: 100)"
								},
								{
									"key": "offset",
									"value": "0",
									"description": "Number of records to skip (default: 0)"
								},
								{
									"key": "role",
									"value": "",
									"description": "Filter by bhuarjan_role: patwari, revenue_inspector, nayab_tahsildar, tahsildar, sdm, additional_collector, collector, administrator (optional)"
								}
							]
						},
						"description": "Get all users with their details including villages, tehsils, districts, and roles"
					},
					"response": []
				},
				{
					"name": "Autocomplete Users",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/bhuarjan/users/autocomplete?q=john&limit=20",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"bhuarjan",
								"users",
								"autocomplete"
							],
							"query": [
								{
									"key": "q",
									"value": "john",
									"description": "Search query (minimum 3 characters required). Searches in both name and login fields."
								},
								{
									"key": "limit",
									"value": "20",
									"description": "Maximum number of results to return (default: 20, max: 50)"
								}
							]
						},
						"description": "Autocomplete API for searching users by username or name. Returns simplified user objects suitable for autocomplete dropdowns. Requires minimum 3 characters in the search query."
					},
					"response": []
				}
			]
		},
		{
			"name": "Projects & Villages",
			"item": [
				{
					"name": "Get All Projects and Villages",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/bhuarjan/user/projects",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"bhuarjan",
								"user",
								"projects"
							]
						},
						"description": "Get all projects and their associated villages (no filter)"
					},
					"response": []
				},
				{
					"name": "Get Projects and Villages by User ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/bhuarjan/user/projects?user_id=1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"bhuarjan",
								"user",
								"projects"
							],
							"query": [
								{
									"key": "user_id",
									"value": "1",
									"description": "User ID to filter projects and villages (optional - if not provided, returns all)"
								}
							]
						},
						"description": "Get projects and villages mapped to a specific user. Only returns villages that are assigned to the user."
					},
					"response": []
				}
			]
		},
		{
			"name": "Dashboard",
			"item": [
				{
					"name": "Get Village Dashboard",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/bhuarjan/dashboard/village?village_id=1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"bhuarjan",
								"dashboard",
								"village"
							],
							"query": [
								{
									"key": "village_id",
									"value": "1",
									"description": "Village ID (required)",
									"disabled": false
								}
							]
						},
						"description": "Get survey statistics dashboard for a village. Returns total surveys, and counts by state (draft, submitted, approved, rejected, locked) with percentages."
					},
					"response": []
				}
			]
		},
		{
			"name": "Departments",
			"item": [
				{
					"name": "Get All Departments",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/bhuarjan/departments?limit=100&offset=0",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"bhuarjan",
								"departments"
							],
							"query": [
								{
									"key": "limit",
									"value": "100",
									"description": "Number of records to return (default: 100)"
								},
								{
									"key": "offset",
									"value": "0",
									"description": "Number of records to skip (default: 0)"
								}
							]
						},
					"description": "Get all departments with their details"
				},
				"response": []
			},
			{
				"name": "Get Projects in Department",
				"request": {
					"method": "GET",
					"header": [],
					"url": {
						"raw": "{{base_url}}/api/bhuarjan/departments/1/projects?limit=100&offset=0",
						"host": [
							"{{base_url}}"
						],
						"path": [
							"api",
							"bhuarjan",
							"departments",
							"1",
							"projects"
						],
						"query": [
							{
								"key": "limit",
								"value": "100",
								"description": "Number of records to return (default: 100)"
							},
							{
								"key": "offset",
								"value": "0",
								"description": "Number of records to skip (default: 0)"
							}
						]
					},
					"description": "Get all projects associated with a specific department. Replace '1' in the URL path with the actual department ID."
				},
				"response": []
			}
		]
	},
		{
			"name": "Land Types",
			"item": [
				{
					"name": "Get All Land Types",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/bhuarjan/land-types?limit=100&offset=0&active=true",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"bhuarjan",
								"land-types"
							],
							"query": [
								{
									"key": "limit",
									"value": "100",
									"description": "Number of records to return (default: 100)"
								},
								{
									"key": "offset",
									"value": "0",
									"description": "Number of records to skip (default: 0)"
								},
								{
									"key": "active",
									"value": "true",
									"description": "Filter by active status: true/false/1/0/yes (optional, default: true - returns only active land types)"
								}
							]
						},
						"description": "Get all land types with their details. Returns active land types by default."
					},
					"response": []
				}
			]
		},
		{
			"name": "Surveys",
			"item": [
				{
					"name": "Create Survey",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"project_id\": 1,\n    \"village_id\": 1,\n    \"department_id\": 1,\n    \"tehsil_id\": 1,\n    \"khasra_number\": \"103\",\n    \"total_area\": 2.5,\n    \"acquired_area\": 2.0,\n    \"has_traded_land\": \"no\",\n    \"traded_land_area\": 0.0,\n    \"crop_type\": 1,\n    \"irrigation_type\": \"irrigated\",\n    \"tree_development_stage\": \"fully_developed\",\n    \"tree_count\": 25,\n    \"has_house\": \"no\",\n    \"house_type\": \"pakka\",\n    \"house_area\": 0.0,\n    \"has_shed\": \"yes\",\n    \"shed_area\": 100.0,\n    \"has_well\": \"yes\",\n    \"well_type\": \"pakka\",\n    \"has_tubewell\": \"no\",\n    \"has_pond\": \"no\",\n    \"trees_description\": \"Mango and neem trees\",\n    \"latitude\": 21.8974,\n    \"longitude\": 83.3960,\n    \"location_accuracy\": 10.5,\n    \"location_timestamp\": \"2024-12-15 10:30:00\",\n    \"remarks\": \"Survey completed successfully\",\n    \"state\": \"draft\",\n    \"landowner_ids\": [1, 2, 3]\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/bhuarjan/survey",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"bhuarjan",
								"survey"
							]
						},
						"description": "Create a new survey. Replace IDs with actual values from your database."
					},
					"response": []
				},
				{
					"name": "Get Survey Details",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/bhuarjan/survey/1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"bhuarjan",
								"survey",
								"1"
							],
							"variable": [
								{
									"key": "survey_id",
									"value": "1",
									"description": "Replace with actual survey ID"
								}
							]
						},
						"description": "Get detailed information about a specific survey"
					},
					"response": []
				},
				{
					"name": "List Surveys",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/bhuarjan/surveys?project_id=1&village_id=1&state=draft&limit=100&offset=0",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"bhuarjan",
								"surveys"
							],
							"query": [
								{
									"key": "project_id",
									"value": "1",
									"description": "Filter by project ID (optional)"
								},
								{
									"key": "village_id",
									"value": "1",
									"description": "Filter by village ID (optional)"
								},
								{
									"key": "state",
									"value": "draft",
									"description": "Filter by state: draft, submitted, approved, rejected, locked (optional)"
								},
								{
									"key": "limit",
									"value": "100",
									"description": "Number of records to return (default: 100)"
								},
								{
									"key": "offset",
									"value": "0",
									"description": "Number of records to skip (default: 0)"
								}
							]
						},
						"description": "List surveys with optional filters"
					},
					"response": []
				},
				{
					"name": "Update Survey (PATCH)",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"description": "JWT token from login API"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"khasra_number\": \"104\",\n    \"total_area\": 3.0,\n    \"acquired_area\": 2.5,\n    \"has_traded_land\": \"yes\",\n    \"traded_land_area\": 1.5,\n    \"crop_type\": 2,\n    \"irrigation_type\": \"irrigated\",\n    \"tree_count\": 30,\n    \"landowner_ids\": [1, 2]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/bhuarjan/survey/1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"bhuarjan",
								"survey",
								"1"
							],
							"variable": [
								{
									"key": "survey_id",
									"value": "1",
									"description": "Replace with actual survey ID"
								}
							]
						},
						"description": "Update a survey. Only surveys in 'draft' or 'submitted' state can be edited. Once approved or locked, surveys cannot be edited. Include only the fields you want to update in the request body."
					},
					"response": []
				}
			]
		},
		{
			"name": "Form 10 (Bulk Table Report)",
			"item": [
				{
					"name": "Download Form 10 PDF (by village)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/bhuarjan/form10/download?village_id=1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"bhuarjan",
								"form10",
								"download"
							],
							"query": [
								{
									"key": "village_id",
									"value": "1",
									"description": "Village ID (required)"
								}
							]
						},
						"description": "Download Form 10 (Bulk Table Report) PDF based on village_id. Returns all surveys for the specified village across all projects."
					},
					"response": []
				},
				{
					"name": "Download Form 10 PDF (by village and project)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/bhuarjan/form10/download?village_id=1&project_id=1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"bhuarjan",
								"form10",
								"download"
							],
							"query": [
								{
									"key": "village_id",
									"value": "1",
									"description": "Village ID (required)"
								},
								{
									"key": "project_id",
									"value": "1",
									"description": "Project ID (optional)"
								}
							]
						},
						"description": "Download Form 10 (Bulk Table Report) PDF based on village_id and project_id. Returns surveys for the specified village and project only."
					},
					"response": []
				}
			]
		},
		{
			"name": "Landowners",
			"item": [
				{
					"name": "Create Landowner",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"राम कुमार सिंह\",\n    \"father_name\": \"श्याम सिंह\",\n    \"mother_name\": \"गीता देवी\",\n    \"spouse_name\": \"सीता देवी\",\n    \"age\": 45,\n    \"gender\": \"male\",\n    \"phone\": \"9876543210\",\n    \"village_id\": 1,\n    \"tehsil_id\": 1,\n    \"district_id\": 1,\n    \"owner_address\": \"House No. 123, Street Name, पंडरीपानी, रायगढ़, Chhattisgarh\",\n    \"aadhar_number\": \"123456789012\",\n    \"pan_number\": \"ABCDE1234F\",\n    \"bank_name\": \"State Bank of India\",\n    \"bank_branch\": \"Raigarh Main Branch\",\n    \"account_number\": \"1234567890123456\",\n    \"ifsc_code\": \"SBIN0001234\",\n    \"account_holder_name\": \"राम कुमार सिंह\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/bhuarjan/landowner",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"bhuarjan",
								"landowner"
							]
						},
						"description": "Create a new landowner. Replace IDs with actual values from your database."
					},
					"response": []
				},
				{
					"name": "Get Landowners",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/bhuarjan/landowners?survey_id=&village_id=&limit=100&offset=0",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"bhuarjan",
								"landowners"
							],
							"query": [
								{
									"key": "survey_id",
									"value": "",
									"description": "Filter by survey ID (optional)"
								},
								{
									"key": "village_id",
									"value": "",
									"description": "Filter by village ID (optional)"
								},
								{
									"key": "limit",
									"value": "100",
									"description": "Number of records to return (default: 100)"
								},
								{
									"key": "offset",
									"value": "0",
									"description": "Number of records to skip (default: 0)"
								}
							]
						},
						"description": "Get landowners based on survey_id and/or village_id (both optional). If both are provided, returns landowners that match both criteria."
					},
					"response": []
				}
			]
		},
		{
			"name": "S3 File Upload",
			"item": [
				{
					"name": "Generate S3 Presigned URLs",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"survey_id\": 1,\n    \"file_names\": [\"image1.jpg\", \"document1.pdf\"]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/bhuarjan/s3/presigned-urls",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"bhuarjan",
								"s3",
								"presigned-urls"
							]
						},
						"description": "Generate S3 presigned URLs for file upload. Supports single file (file_name) or multiple files (file_names array). The presigned URLs are valid for 1 hour. After getting the presigned URL, use it to upload files directly to S3 using a PUT request."
					},
					"response": []
				},
				{
					"name": "Upload File to S3 (using presigned URL)",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/octet-stream",
								"description": "Or use the appropriate content type for your file (e.g., image/jpeg, application/pdf)"
							}
						],
						"body": {
							"mode": "file",
							"file": {
								"src": ""
							},
							"options": {
								"raw": {}
							}
						},
						"url": {
							"raw": "{{presigned_url}}",
							"host": [
								"{{presigned_url}}"
							]
						},
						"description": "Upload a file to S3 using the presigned URL obtained from 'Generate S3 Presigned URLs' API. Replace {{presigned_url}} with the actual presigned_url from the previous API response. Set the file in the Body tab (binary mode). The Content-Type header should match the 'content_type' value from the API response.\n\nCRITICAL REQUIREMENTS:\n1. Method MUST be PUT (not GET or POST) - presigned URLs are generated for PUT operations\n2. Do NOT include any Authorization header - the presigned URL contains all authentication\n3. Content-Type header must match exactly what was used when generating the presigned URL\n4. Use the 'content_type' value from the API response for the Content-Type header\n\nCommon Errors:\n- 'SignatureDoesNotMatch': Usually means wrong HTTP method (use PUT) or wrong Content-Type header\n- 'Only one auth mechanism allowed': Remove Authorization header\n- 'AccessDenied': Check AWS IAM permissions"
					},
					"response": []
				},
				{
					"name": "Generate Single File Presigned URL",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"survey_id\": 1,\n    \"file_name\": \"image1.jpg\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/bhuarjan/s3/presigned-urls",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"bhuarjan",
								"s3",
								"presigned-urls"
							]
						},
						"description": "Generate a presigned URL for a single file. Use file_name (string) instead of file_names (array) for single file uploads."
					},
					"response": []
				}
			]
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "https://bhuarjan.com",
			"type": "string"
		}
	]
}