<?xml version='1.0' encoding='utf-8'?>
<odoo>

    <record model="ir.module.category" id="module_category_bhuarjan_bhuarjan">
        <field name="name">Bhuarjan</field>
        <field name="description">Bhuarjan Module Category</field>
        <field name="sequence">1</field>
    </record>

    <record id="group_bhuarjan_patwari" model="res.groups">
        <field name="name">Patwari</field>                     
        <field name="category_id" ref="module_category_bhuarjan_bhuarjan"/>
        <field name="implied_ids" eval="[(6, 0, [ref('base.group_user')])]"/>
        <field name="comment">The user will be able to approve document created by employees.</field>
    </record>

    <record id="group_bhuarjan_ri" model="res.groups">
        <field name="name">Revenue Inspector</field>
        <field name="category_id" ref="module_category_bhuarjan_bhuarjan"/>
        <field name="implied_ids" eval="[(4, ref('group_bhuarjan_patwari'))]"/>
        <field name="comment">The user will be able to approve document created by employees.</field>
    </record>

    <record id="group_bhuarjan_nayab_tahsildar" model="res.groups">
        <field name="name">Nayab Tahsildar</field>
        <field name="category_id" ref="module_category_bhuarjan_bhuarjan"/>
        <field name="implied_ids" eval="[(4, ref('group_bhuarjan_ri'))]"/>
        <field name="comment">The user will be able to approve document created by employees.</field>
    </record>

    <record id="group_bhuarjan_tahsildar" model="res.groups">
        <field name="name">Tahsildar</field>
        <field name="category_id" ref="module_category_bhuarjan_bhuarjan"/>
        <field name="implied_ids" eval="[(4, ref('group_bhuarjan_nayab_tahsildar'))]"/>
        <field name="comment">The user will be able to approve document created by employees.</field>
    </record>

    <record id="group_bhuarjan_sdm" model="res.groups">
        <field name="name">SDM</field>
        <field name="category_id" ref="module_category_bhuarjan_bhuarjan"/>
        <field name="implied_ids" eval="[(4, ref('group_bhuarjan_tahsildar'))]"/>
        <field name="comment">The user will be able to approve document created by employees.</field>
    </record>

    <record id="group_bhuarjan_additional_collector" model="res.groups">
        <field name="name">Additional Collector</field>
        <field name="category_id" ref="module_category_bhuarjan_bhuarjan"/>
        <field name="implied_ids" eval="[(4, ref('group_bhuarjan_sdm'))]"/>
        <field name="comment">The user will be able to approve document created by employees.</field>
    </record>

    <record id="group_bhuarjan_collector" model="res.groups">
        <field name="name">Collector</field>
        <field name="category_id" ref="module_category_bhuarjan_bhuarjan"/>
        <field name="implied_ids" eval="[(4, ref('group_bhuarjan_additional_collector'))]"/>
        <field name="comment">The user will be able to approve document created by employees.</field>
    </record>

    <record id="group_bhuarjan_district_administrator" model="res.groups">
        <field name="name">District Administrator</field>
        <field name="category_id" ref="module_category_bhuarjan_bhuarjan"/>
        <field name="implied_ids" eval="[(6, 0, [ref('base.group_user')])]"/>
        <field name="comment">District Administrator can manage district-level operations.</field>
    </record>

    <record id="group_bhuarjan_admin" model="res.groups">
        <field name="name">Administrator</field>
        <field name="category_id" ref="module_category_bhuarjan_bhuarjan"/>
        <field name="implied_ids" eval="[(4, ref('group_bhuarjan_collector'))]"/>
        <field name="comment">The user will be able to approve document created by employees.</field>
    </record>

    <record id="group_bhuarjan_sia_team_member" model="res.groups">
        <field name="name">SIA Team Member</field>
        <field name="category_id" ref="module_category_bhuarjan_bhuarjan"/>
        <field name="implied_ids" eval="[(6, 0, [ref('base.group_user')])]"/>
        <field name="comment">The user will be able to access SIA team member features.</field>
    </record>

    
    <!-- Survey access rule for Patwari -->
    <data noupdate="0">
        <!-- ##################### ADMINISTRATOR ################### -->
        <!-- SIA TEAM -->
        <record id="record_bhu_sia_team_rule_admin" model="ir.rule">
            <field name="name">SDM can see own sia data</field>
            <field name="model_id" ref="model_bhu_sia_team"/>
            <field name="domain_force">[(1, '=', 1)]</field>            
            <field name="groups" eval="[(4, ref('bhuarjan.group_bhuarjan_admin'))]"/>
        </record>

        <!-- Section Notification Rule -->
        <record id="record_bhu_section4_notification_rule_admin" model="ir.rule">
            <field name="name">SDM can see own Section Notification Rule Data</field>
            <field name="model_id" ref="model_bhu_section4_notification"/>
            <field name="domain_force">[(1, '=', 1)]</field>            
            <field name="groups" eval="[(4, ref('bhuarjan.group_bhuarjan_admin'))]"/>
        </record>

        <!-- Own Bhu Expert Committee Report -->
        <record id="record_bhu_expert_committee_report_rule_admin" model="ir.rule">
            <field name="name">SDM Can See Own Bhu Expert Committee Report Data</field>
            <field name="model_id" ref="model_bhu_expert_committee_report"/>
            <field name="domain_force">[(1, '=', 1)]</field>            
            <field name="groups" eval="[(4, ref('bhuarjan.group_bhuarjan_admin'))]"/>
        </record>

        <!-- Own Bhu Expert Committee -->
        <record id="record_bhu_expert_committee_report_rule_admin" model="ir.rule">
            <field name="name">SDM Can See Own Bhu Expert Committee Report Data</field>
            <field name="model_id" ref="model_bhu_expert_committee_report"/>
            <field name="domain_force">[(1, '=', 1)]</field>            
            <field name="groups" eval="[(4, ref('bhuarjan.group_bhuarjan_admin'))]"/>
        </record>

        <!-- Section 11 Report -->
        <record id="record_bhu_section11_preliminary_report_rule_admin" model="ir.rule">
            <field name="name">SDM Can Section 11 Report Data</field>
            <field name="model_id" ref="model_bhu_section11_preliminary_report"/>
            <field name="domain_force">[(1, '=', 1)]</field>            
            <field name="groups" eval="[(4, ref('bhuarjan.group_bhuarjan_admin'))]"/>
        </record>

        <!-- Bhu Section15 Objection -->
        <record id="record_bhu_section15_objection_rule_admin" model="ir.rule">
            <field name="name">SDM Can Bhu Section15 Objection Report Data</field>
            <field name="model_id" ref="model_bhu_section15_objection"/>
            <field name="domain_force">[(1, '=', 1)]</field>            
            <field name="groups" eval="[(4, ref('bhuarjan.group_bhuarjan_admin'))]"/>
        </record>

        <!-- Section 19 Notification -->
        <record id="record_bhu_section19_notification_rule_admin" model="ir.rule">
            <field name="name">SDM Can Section 19 Notification Data</field>
            <field name="model_id" ref="model_bhu_section19_notification"/>
            <field name="domain_force">[(1, '=', 1)]</field>            
            <field name="groups" eval="[(4, ref('bhuarjan.group_bhuarjan_admin'))]"/>
        </record>

        <!-- BHU Draft Award -->
        <record id="record_bhu_draft_award_rule_admin" model="ir.rule">
            <field name="name">SDM Can BHU Draft Award Report Data</field>
            <field name="model_id" ref="model_bhu_draft_award"/>
            <field name="domain_force">[(1, '=', 1)]</field>            
            <field name="groups" eval="[(4, ref('bhuarjan.group_bhuarjan_admin'))]"/>
        </record>


        <!-- ##################### SDM ################### -->
        <!-- SIA TEAM -->
        <record id="record_bhu_sia_team_rule" model="ir.rule">
            <field name="name">SDM can see own sia data</field>
            <field name="model_id" ref="model_bhu_sia_team"/>
            <field name="domain_force">[('project_id.sdm_ids', 'in', [user.id])]</field>            
            <field name="groups" eval="[(4, ref('bhuarjan.group_bhuarjan_sdm'))]"/>
        </record>

        <!-- Section Notification Rule -->
        <record id="record_bhu_section4_notification_rule" model="ir.rule">
            <field name="name">SDM can see own Section Notification Rule Data</field>
            <field name="model_id" ref="model_bhu_section4_notification"/>
            <field name="domain_force">[('project_id.sdm_ids', 'in', [user.id])]</field>            
            <field name="groups" eval="[(4, ref('bhuarjan.group_bhuarjan_sdm'))]"/>
        </record>

        <!-- Own Bhu Expert Committee Report -->
        <record id="record_bhu_expert_committee_report_rule" model="ir.rule">
            <field name="name">SDM Can See Own Bhu Expert Committee Report Data</field>
            <field name="model_id" ref="model_bhu_expert_committee_report"/>
            <field name="domain_force">[('project_id.sdm_ids', 'in', [user.id])]</field>            
            <field name="groups" eval="[(4, ref('bhuarjan.group_bhuarjan_sdm'))]"/>
        </record>

        <!-- Own Bhu Expert Committee -->
        <record id="record_bhu_expert_committee_report_rule" model="ir.rule">
            <field name="name">SDM Can See Own Bhu Expert Committee Report Data</field>
            <field name="model_id" ref="model_bhu_expert_committee_report"/>
            <field name="domain_force">[('project_id.sdm_ids', 'in', [user.id])]</field>            
            <field name="groups" eval="[(4, ref('bhuarjan.group_bhuarjan_sdm'))]"/>
        </record>

        <!-- Section 11 Report -->
        <record id="record_bhu_section11_preliminary_report_rule" model="ir.rule">
            <field name="name">SDM Can Section 11 Report Data</field>
            <field name="model_id" ref="model_bhu_section11_preliminary_report"/>
            <field name="domain_force">[('project_id.sdm_ids', 'in', [user.id])]</field>            
            <field name="groups" eval="[(4, ref('bhuarjan.group_bhuarjan_sdm'))]"/>
        </record>

        <!-- Bhu Section15 Objection -->
        <record id="record_bhu_section15_objection_rule" model="ir.rule">
            <field name="name">SDM Can Bhu Section15 Objection Report Data</field>
            <field name="model_id" ref="model_bhu_section15_objection"/>
            <field name="domain_force">[('project_id.sdm_ids', 'in', [user.id])]</field>            
            <field name="groups" eval="[(4, ref('bhuarjan.group_bhuarjan_sdm'))]"/>
        </record>

        <!-- Section 19 Notification -->
        <record id="record_bhu_section19_notification_rule" model="ir.rule">
            <field name="name">SDM Can Section 19 Notification Data</field>
            <field name="model_id" ref="model_bhu_section19_notification"/>
            <field name="domain_force">[('project_id.sdm_ids', 'in', [user.id])]</field>            
            <field name="groups" eval="[(4, ref('bhuarjan.group_bhuarjan_sdm'))]"/>
        </record>

        <!-- BHU Draft Award -->
        <record id="record_bhu_draft_award_rule" model="ir.rule">
            <field name="name">SDM Can BHU Draft Award Report Data</field>
            <field name="model_id" ref="model_bhu_draft_award"/>
            <field name="domain_force">[('project_id.sdm_ids', 'in', [user.id])]</field>            
            <field name="groups" eval="[(4, ref('bhuarjan.group_bhuarjan_sdm'))]"/>
        </record>


        <!-- ##################### COLLECTOR ################### -->
        <!-- Collectors can see ALL process documents for ALL projects -->
        <!-- Note: Collector group implies Additional Collector, so this covers both -->
        <!-- SIA TEAM -->
        <record id="record_bhu_sia_team_rule_collector" model="ir.rule">
            <field name="name">Collector can see all SIA Team data</field>
            <field name="model_id" ref="model_bhu_sia_team"/>
            <field name="domain_force">[(1, '=', 1)]</field>            
            <field name="groups" eval="[(4, ref('bhuarjan.group_bhuarjan_collector'))]"/>
        </record>

        <!-- Section 4 Notification -->
        <record id="record_bhu_section4_notification_rule_collector" model="ir.rule">
            <field name="name">Collector can see all Section 4 Notification data</field>
            <field name="model_id" ref="model_bhu_section4_notification"/>
            <field name="domain_force">[(1, '=', 1)]</field>            
            <field name="groups" eval="[(4, ref('bhuarjan.group_bhuarjan_collector'))]"/>
        </record>

        <!-- Expert Committee Report -->
        <record id="record_bhu_expert_committee_report_rule_collector" model="ir.rule">
            <field name="name">Collector can see all Expert Committee Report data</field>
            <field name="model_id" ref="model_bhu_expert_committee_report"/>
            <field name="domain_force">[(1, '=', 1)]</field>            
            <field name="groups" eval="[(4, ref('bhuarjan.group_bhuarjan_collector'))]"/>
        </record>

        <!-- Section 11 Preliminary Report -->
        <record id="record_bhu_section11_preliminary_report_rule_collector" model="ir.rule">
            <field name="name">Collector can see all Section 11 Preliminary Report data</field>
            <field name="model_id" ref="model_bhu_section11_preliminary_report"/>
            <field name="domain_force">[(1, '=', 1)]</field>            
            <field name="groups" eval="[(4, ref('bhuarjan.group_bhuarjan_collector'))]"/>
        </record>

        <!-- Section 15 Objection -->
        <record id="record_bhu_section15_objection_rule_collector" model="ir.rule">
            <field name="name">Collector can see all Section 15 Objection data</field>
            <field name="model_id" ref="model_bhu_section15_objection"/>
            <field name="domain_force">[(1, '=', 1)]</field>            
            <field name="groups" eval="[(4, ref('bhuarjan.group_bhuarjan_collector'))]"/>
        </record>

        <!-- Section 19 Notification -->
        <record id="record_bhu_section19_notification_rule_collector" model="ir.rule">
            <field name="name">Collector can see all Section 19 Notification data</field>
            <field name="model_id" ref="model_bhu_section19_notification"/>
            <field name="domain_force">[(1, '=', 1)]</field>            
            <field name="groups" eval="[(4, ref('bhuarjan.group_bhuarjan_collector'))]"/>
        </record>

        <!-- Draft Award -->
        <record id="record_bhu_draft_award_rule_collector" model="ir.rule">
            <field name="name">Collector can see all Draft Award data</field>
            <field name="model_id" ref="model_bhu_draft_award"/>
            <field name="domain_force">[(1, '=', 1)]</field>            
            <field name="groups" eval="[(4, ref('bhuarjan.group_bhuarjan_collector'))]"/>
        </record>


        <record id="record_bhu_survey_rule" model="ir.rule">
            <field name="name">Patwari can see own surveys and surveys from assigned villages</field>
            <field name="model_id" ref="model_bhu_survey"/>
            <field name="domain_force">['|', ('user_id', '=', user.id), ('village_id', 'in', user.village_ids.ids)]</field>
            <field name="groups" eval="[(4, ref('bhuarjan.group_bhuarjan_patwari'))]"/>
        </record>

        <!-- SDM Survey Rule -->
        <record id="record_bhu_survey_rule_sdm" model="ir.rule">
            <field name="name">SDM can see surveys from assigned projects</field>
            <field name="model_id" ref="model_bhu_survey"/>
            <field name="domain_force">[('project_id.sdm_ids', 'in', [user.id])]</field>
            <field name="groups" eval="[(4, ref('bhuarjan.group_bhuarjan_sdm'))]"/>
        </record>

       
        <record id="record_bhu_landowner_rule" model="ir.rule">
            <field name="name">Patwari can see landowners from assigned villages and their surveys</field>
            <field name="model_id" ref="model_bhu_landowner"/>
            <field name="domain_force">['&amp;', ('village_id', '!=', False), '|', ('village_id', 'in', user.village_ids.ids), ('survey_ids.user_id', '=', user.id)]</field>
            <field name="groups" eval="[(4, ref('bhuarjan.group_bhuarjan_patwari'))]"/>
        </record>

        <record id="record_bhu_survey_company_rule" model="ir.rule">
            <field name="name">Admin can filter company and check company wise data.</field>
            <field name="model_id" ref="model_bhu_survey"/>
            <field name="domain_force">[('company_id', 'in', company_ids)]</field>
            <field name="groups" eval="[(4, ref('base.group_system'))]"/>
        </record>

        <record id="record_bhu_district_rule_admin" model="ir.rule">
            <field name="name">Admin can see all districts</field>
            <field name="model_id" ref="model_bhu_district"/>
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups" eval="[(4, ref('base.group_system'))]"/>
        </record>


        <record id="record_bhu_landowner_company_rule" model="ir.rule">
            <field name="name">Company: Admin can see all data</field>
            <field name="model_id" ref="model_bhu_landowner"/>
            <field name="domain_force">[('company_id', 'in', company_ids)]</field>
            <field name="groups" eval="[(4, ref('base.group_system'))]"/>
        </record>


        <record id="record_bhu_post_award_payment_company_rule" model="ir.rule">
            <field name="name">Company: Admin can see all data</field>
            <field name="model_id" ref="model_bhu_post_award_payment"/>
            <field name="domain_force">[('company_id', 'in', company_ids)]</field>
            <field name="groups" eval="[(4, ref('base.group_system'))]"/>
        </record>

        <record id="record_bhu_payment_reconciliation_company_rule" model="ir.rule">
            <field name="name">Company: Admin can see all data</field>
            <field name="model_id" ref="model_bhu_payment_reconciliation"/>
            <field name="domain_force">[('company_id', 'in', company_ids)]</field>
            <field name="groups" eval="[(4, ref('base.group_system'))]"/>
        </record>
        
        
    </data>
</odoo>