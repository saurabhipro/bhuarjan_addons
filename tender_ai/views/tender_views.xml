<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="view_tende_ai_tender_list" model="ir.ui.view">
        <field name="name">tende_ai.tender.list</field>
        <field name="model">tende_ai.tender</field>
        <field name="arch" type="xml">
            <list string="Tenders">
                <field name="state" widget="badge"
                       decoration-success="state == 'published'"
                       decoration-info="state == 'in_review'"
                       decoration-warning="state == 'approved'"
                       decoration-danger="state == 'rejected'"/>
                <field name="tender_id"/>
                <field name="ref_no"/>
                <field name="department_name"/>
                <field name="tender_creator"/>
                <field name="estimated_value_inr"/>
                <field name="published_on_dt"/>
            </list>
        </field>
    </record>

    <record id="view_tende_ai_tender_form" model="ir.ui.view">
        <field name="name">tende_ai.tender.form</field>
        <field name="model">tende_ai.tender</field>
        <field name="arch" type="xml">
            <form string="Tender Information" class="tender_ai_form">
                <header>
                    <button name="action_submit_for_approval" string="Submit for Approval"
                            type="object" class="btn-primary"
                            invisible="state != 'draft'"/>
                    <button name="action_approve" string="Approve"
                            type="object" class="btn-primary"
                            groups="base.group_system"
                            invisible="state != 'in_review'"/>
                    <button name="action_reject" string="Reject"
                            type="object" class="btn-secondary"
                            groups="base.group_system"
                            invisible="state not in ('in_review','approved')"/>
                    <button name="action_publish" string="Publish"
                            type="object" class="btn-primary"
                            groups="base.group_system"
                            invisible="state != 'approved'"/>
                    <button name="action_reset_to_draft" string="Reset to Draft"
                            type="object" class="btn-secondary"
                            groups="base.group_system"
                            invisible="state == 'draft'"/>
                    <field name="state" widget="statusbar"
                           statusbar_visible="draft,in_review,approved,published,rejected"/>
                </header>
                <sheet>
                    <group>
                        <group>
                            <field name="department_name"/>
                            <field name="tender_id"/>
                            <field name="ref_no"/>
                            <field name="tender_creator"/>
                            <field name="job_id" options="{'no_open': True, 'no_create': True, 'no_create_edit': True}"/>
                        </group>
                        <group>
                            <field name="procurement_category"/>
                            <field name="tender_type"/>
                            <field name="organization_hierarchy"/>
                            <field name="estimated_value_inr"/>
                            <field name="tender_currency"/>
                            <field name="bidding_currency"/>
                        </group>
                    </group>
                    <group>
                        <group>
                            <field name="offer_validity_days"/>
                            <field name="previous_tender_no"/>
                        </group>
                        <group>
                            <field name="published_on"/>
                            <field name="bid_submission_start"/>
                            <field name="bid_submission_end"/>
                            <field name="tender_opened_on"/>
                        </group>
                    </group>
                    <group>
                        <field name="description"/>
                        <field name="nit"/>
                    </group>
                    <notebook>
                        <page string="Tender Details (Rich Text)">
                            <field name="details_html" widget="html" nolabel="1"/>
                        </page>
                        <page string="Eligibility Criteria">
                            <field name="eligibility_criteria" nolabel="1">
                                <list>
                                    <field name="sl_no"/>
                                    <field name="criteria"/>
                                    <field name="supporting_document"/>
                                </list>
                            </field>
                        </page>
                        <page string="Workflow Info">
                            <group>
                                <group>
                                    <field name="approved_by" readonly="1"/>
                                    <field name="approved_on" readonly="1"/>
                                </group>
                                <group>
                                    <field name="published_by" readonly="1"/>
                                    <field name="published_on_dt" readonly="1"/>
                                </group>
                            </group>
                        </page>
                    </notebook>
                </sheet>
                <chatter/>
            </form>
        </field>
    </record>

    <record id="action_tende_ai_tender" model="ir.actions.act_window">
        <field name="name">Tenders</field>
        <field name="res_model">tende_ai.tender</field>
        <field name="view_mode">list,form</field>
    </record>
</odoo>

